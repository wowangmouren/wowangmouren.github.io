

<!DOCTYPE html>
<html lang="en" color-mode=light>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>前端知识总结 - 王文涛的博客</title>
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="google" content="notranslate" />
  
  <meta name="description" content="一.AI前端CSS规范#分号每个属性声明后面都要加分号...">
  <meta name="author" content="wowangmouren">
  <link rel="icon" href="/images/icons/favicon-16x16.png" type="image/png" sizes="16x16">
  <link rel="icon" href="/images/icons/favicon-32x32.png" type="image/png" sizes="32x32">
  <link rel="apple-touch-icon" href="/images/icons/apple-touch-icon.png" sizes="180x180">
  <meta rel="mask-icon" href="/images/icons/stun-logo.svg" color="#333333">
  
    <meta rel="msapplication-TileImage" content="/images/icons/favicon-144x144.png">
    <meta rel="msapplication-TileColor" content="#000000">
  

  
<link rel="stylesheet" href="/css/style.css">


  
    
<link rel="stylesheet" href="//at.alicdn.com/t/font_1445822_r673sha78lq.css">

  

  
    
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css">

  

  
    
      
        
        
<link rel="stylesheet" href="https://cdn.bootcss.com/highlight.js/9.18.1/styles/xcode.min.css" name="highlight-style" mode="light">

      
        
        
<link rel="stylesheet" href="https://cdn.bootcss.com/highlight.js/9.18.1/styles/solarized-dark.min.css" name="highlight-style" mode="dark">

      
  

  <script>
    var CONFIG = window.CONFIG || {};
    var ZHAOO = window.ZHAOO || {};
    CONFIG = {
      isHome: false,
      fancybox: true,
      pjax: false,
      lazyload: {
        enable: true,
        only_post: 'false',
        loading: '[object Object]'
      },
      donate: {
        enable: true,
        alipay: '/images/theme/alipay.png',
        wechat: '/images/theme/wechat.png'
      },
      galleries: {
        enable: true
      },
      fab: {
        enable: true,
        always_show: true
      },
      carrier: {
        enable: true
      },
      daovoice: {
        enable: false
      },
      preview: {
        background: {
          default: '',
          api: ''
        },
        motto: {
          default: '王文涛的博客',
          typing: true,
          api: '',
          data_contents: ''
        },
      },
      qrcode: {
        enable: true,
        type: 'url',
        image: 'https://pic.izhaoo.com/weapp-code.jpg',
      },
      toc: {
        enable: true
      },
      scrollbar: {
        type: 'default'
      },
      notification: {
        enable: false,
        delay: 4500,
        list: '',
        page_white_list: '',
        page_black_list: ''
      },
      search: {
        enable: false,
        path: ''
      }
    }
  </script>

  

  

<meta name="generator" content="Hexo 5.4.0"></head>

<body class="lock-screen">
  <div class="loading"></div>
  
    


  <nav class="navbar">
    <div class="left">
      
        <i class="iconfont iconhome j-navbar-back-home"></i>
      
      
        <i class="iconfont iconqrcode j-navbar-qrcode"></i>
      
      
        <i class="iconfont iconmoono" id="color-toggle" color-toggle="light"></i>
      
      
    </div>
    <div class="center">前端知识总结</div>
    <div class="right">
      <i class="iconfont iconmenu j-navbar-menu"></i>
    </div>
    
      <div id="qrcode-navbar"></div>
    
  </nav>

  
  

<nav class="menu">
  <div class="menu-container">
    <div class="menu-close">
      <i class="iconfont iconbaseline-close-px"></i>
    </div>
    <ul class="menu-content"><li class="menu-item">
        <a href="/ " class="underline "> 首页</a>
      </li><li class="menu-item">
        <a href="/galleries/ " class="underline "> 相册</a>
      </li><li class="menu-item">
        <a href="/archives/ " class="underline "> 归档</a>
      </li><li class="menu-item">
        <a href="/tags/ " class="underline "> 标签</a>
      </li><li class="menu-item">
        <a href="/categories/ " class="underline "> 分类</a>
      </li><li class="menu-item">
        <a href="/about/ " class="underline "> 关于</a>
      </li></ul>
    
      <div class="menu-copyright"><p>欢迎进入王文涛的个人博客~  |  <a target="_blank" href="https://github.com/izhaoo/hexo-theme-zhaoo">主题</a></p></div>
    
  </div>
</nav>
  <main id="main">
  <div class="article-wrap">
    <div class="row container">
      <div class="col-xl-3"></div>
      <div class="col-xl-6"><article class="article">
  <div class="wrap">
    <section class="head">
  <img   class="lazyload" data-original="/images/theme/cover/web.jpg" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="  draggable="false">
  <div class="head-mask">
    <h1 class="head-title">前端知识总结</h1>
    <div class="head-info">
      <span class="post-info-item"><i class="iconfont iconcalendar"></i>November 08, 2023</span>
      
      <span class="post-info-item"><i class="iconfont iconfont-size"></i>74162</span>
    </div>
  </div>
</section>
    <section class="main">
      <section class="content">
        <h1 id="一-AI前端CSS规范"><a href="#一-AI前端CSS规范" class="headerlink" title="一.AI前端CSS规范"></a>一.AI前端CSS规范</h1><h2 id="分号"><a href="#分号" class="headerlink" title="#分号"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-css.html#%E5%88%86%E5%8F%B7">#</a>分号</h2><p>每个属性声明后面都要加分号。</p>
<h2 id="命名"><a href="#命名" class="headerlink" title="#命名"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-css.html#%E5%91%BD%E5%90%8D">#</a>命名</h2><ol>
<li>不使用id选择器</li>
<li>适用有意义的名词命名</li>
<li>单词全部小写，名词超过1个时，使用<code>-</code>分隔符</li>
</ol>
<h2 id="属性声明顺序"><a href="#属性声明顺序" class="headerlink" title="#属性声明顺序"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-css.html#%E5%B1%9E%E6%80%A7%E5%A3%B0%E6%98%8E%E9%A1%BA%E5%BA%8F">#</a>属性声明顺序</h2><p>原则：整体到局部，外部到内部，重要属性优先</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.element</span> &#123;<br>    <span class="hljs-attribute">display</span>: block;<br>    <span class="hljs-attribute">float</span>: left;<br>    <span class="hljs-attribute">position</span>: absolute;<br>    <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;<br>    <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;<br>    <span class="hljs-attribute">bottom</span>: <span class="hljs-number">0</span>;<br>    <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;<br>    <span class="hljs-attribute">z-index</span>: <span class="hljs-number">100</span>;<br>    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> <span class="hljs-number">100px</span>;<br>    <span class="hljs-attribute">padding</span>: <span class="hljs-number">50px</span>; // <span class="hljs-attribute">padding</span>习惯写到<span class="hljs-attribute">margin</span>后面<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;<br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;<br>    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#e5e5e5</span>; <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">3px</span>;<br>    <span class="hljs-attribute">font</span>: normal <span class="hljs-number">13px</span> <span class="hljs-string">&quot;Helvetica Neue&quot;</span>, sans-serif;<br>    <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;<br>    <span class="hljs-attribute">text-align</span>: center;<br>    <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.5</span>;<br>    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f5f5f5</span>;<br>    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h2 id="其他规范"><a href="#其他规范" class="headerlink" title="#其他规范"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-css.html#%E5%85%B6%E4%BB%96%E8%A7%84%E8%8C%83">#</a>其他规范</h2><p>使用prettier格式化工具约束，推荐配置如下：</p>
<ul>
<li>格式自动化</li>
<li>4个缩进</li>
<li>全部单引号</li>
<li>属性<code>:</code>后有空格</li>
<li>颜色全部小写</li>
<li>小数点前面0自动添加</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">module</span>.exports = &#123;<br>    <span class="hljs-attr">printWidth</span>: <span class="hljs-number">100</span>, <span class="hljs-comment">// 设置prettier单行输出（不折行）的（最大）长度</span><br><br>    <span class="hljs-attr">tabWidth</span>: <span class="hljs-number">4</span>, <span class="hljs-comment">// 设置工具每一个水平缩进的空格数</span><br><br>    <span class="hljs-attr">useTabs</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// 使用tab（制表位）缩进而非空格</span><br><br>    <span class="hljs-attr">semi</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// 在语句末尾添加分号</span><br><br>    <span class="hljs-attr">singleQuote</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 使用单引号而非双引号</span><br><br>    <span class="hljs-attr">trailingComma</span>: <span class="hljs-string">&#x27;none&#x27;</span>, <span class="hljs-comment">// 在任何可能的多行中输入尾逗号</span><br><br>    <span class="hljs-attr">bracketSpacing</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 在对象字面量声明所使用的的花括号后（&#123;）和前（&#125;）输出空格</span><br><br>    <span class="hljs-attr">arrowParens</span>: <span class="hljs-string">&#x27;avoid&#x27;</span>, <span class="hljs-comment">// 为单行箭头函数的参数添加圆括号，参数个数为1时可以省略圆括号</span><br><br>    <span class="hljs-comment">// parser: &#x27;babylon&#x27;, // 指定使用哪一种解析器</span><br><br>    <span class="hljs-attr">jsxBracketSameLine</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 在多行JSX元素最后一行的末尾添加 &gt; 而使 &gt; 单独一行（不适用于自闭和元素）</span><br><br>    <span class="hljs-attr">rangeStart</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">// 只格式化某个文件的一部分</span><br><br>    <span class="hljs-attr">rangeEnd</span>: <span class="hljs-literal">Infinity</span>, <span class="hljs-comment">// 只格式化某个文件的一部分</span><br><br>    <span class="hljs-attr">filepath</span>: <span class="hljs-string">&#x27;none&#x27;</span>, <span class="hljs-comment">// 指定文件的输入路径，这将被用于解析器参照</span><br><br>    <span class="hljs-attr">requirePragma</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// (v1.7.0+) Prettier可以严格按照按照文件顶部的一些特殊的注释格式化代码，这些注释称为“require pragma”(必须杂注)</span><br><br>    <span class="hljs-attr">insertPragma</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">//  (v1.8.0+) Prettier可以在文件的顶部插入一个 @format的特殊注释，以表明改文件已经被Prettier格式化过了。</span><br><br>    <span class="hljs-attr">proseWrap</span>: <span class="hljs-string">&#x27;preserve&#x27;</span> <span class="hljs-comment">// (v1.8.2+)</span><br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h2 id="参考连接"><a href="#参考连接" class="headerlink" title="#参考连接"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-css.html#%E5%8F%82%E8%80%83%E8%BF%9E%E6%8E%A5">#</a>参考连接</h2><p><a target="_blank" rel="noopener" href="https://github.com/ecomfe/spec/blob/master/css-style-guide.md">百度CSS规范指南(opens new window)</a></p>
<p><a target="_blank" rel="noopener" href="http://alloyteam.github.io/CodeGuide/#css">腾讯CSS规范指南(opens new window)</a></p>
<p><a target="_blank" rel="noopener" href="http://iischajn.github.io/trans/htmlcss-guide/">Google CSS规范指南</a></p>
<h1 id="二、AI前端Git规范"><a href="#二、AI前端Git规范" class="headerlink" title="二、AI前端Git规范"></a>二、AI前端Git规范</h1><h2 id="Git分支命名"><a href="#Git分支命名" class="headerlink" title="#Git分支命名"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-git.html#git%E5%88%86%E6%94%AF%E5%91%BD%E5%90%8D">#</a>Git分支命名</h2><ul>
<li>master：主分支，负责记录上线版本的迭代，该分支代码与线上代码是完全一致的。</li>
<li>develop：开发分支，该分支记录相对稳定的版本，所有的feature分支和bugfix分支都从该分支创建。其它分支为短期分支，其完成功能开发之后需要删除</li>
<li>feature/*：特性（功能）分支，用于开发新的功能，不同的功能创建不同的功能分支，功能分支开发完成并自测通过之后，需要合并到 develop 分支，之后删除该分支。</li>
<li>bugfix/*：bug修复分支，用于修复不紧急的bug，普通bug均需要创建bugfix分支开发，开发完成自测没问题后合并到 develop 分支后，删除该分支。</li>
<li>release/*：发布分支，用于代码上线准备，该分支从develop分支创建，创建之后由测试同学发布到测试环境进行测试，测试过程中发现bug需要开发人员在该release分支上进行bug修复，所有bug修复完后，在上线之前，需要合并该release分支到master分支和develop分支。</li>
<li>hotfix/*：紧急bug修复分支，该分支只有在紧急情况下使用，从master分支创建，用于紧急修复线上bug，修复完成后，需要合并该分支到master分支以便上线，同时需要再合并到develop分支。</li>
</ul>
<p><img    class="lazyload" data-original="https://user-gold-cdn.xitu.io/2018/7/9/1647e5710a461adc?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="   ><span class="image-caption">img</span></p>
<h2 id="Git-Commit-Message格式"><a href="#Git-Commit-Message格式" class="headerlink" title="#Git Commit Message格式"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-git.html#git-commit-message%E6%A0%BC%E5%BC%8F">#</a>Git Commit Message格式</h2><p>type : subject</p>
<h3 id="type-提交类型："><a href="#type-提交类型：" class="headerlink" title="#type 提交类型："></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-git.html#type-%E6%8F%90%E4%BA%A4%E7%B1%BB%E5%9E%8B">#</a>type 提交类型：</h3><ul>
<li>feature: 新特性</li>
<li>fix: 修改问题</li>
<li>style: 代码格式修改</li>
<li>test: 测试用例修改</li>
<li>docs: 文档修改</li>
<li>refactor: 代码重构</li>
<li>misc: 其他修改, 比如构建流程, 依赖管理</li>
</ul>
<h3 id="subject-提交描述"><a href="#subject-提交描述" class="headerlink" title="#subject 提交描述"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-git.html#subject-%E6%8F%90%E4%BA%A4%E6%8F%8F%E8%BF%B0">#</a>subject 提交描述</h3><p>对应内容是commit 目的的简短描述，一般不超过50个字符</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="#参考链接"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-git.html#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5">#</a>参考链接</h2><ul>
<li><a target="_blank" rel="noopener" href="https://nvie.com/posts/a-successful-git-branching-model/">A successful Git branching model(opens new window)</a></li>
<li><a target="_blank" rel="noopener" href="https://www.conventionalcommits.org/zh/v1.0.0-beta.2/">约定式提交(opens new window)</a></li>
<li><a target="_blank" rel="noopener" href="https://juejin.im/post/5b4328bbf265da0fa21a6820">必须知道的 Git 分支开发规范(opens new window)</a></li>
<li><a target="_blank" rel="noopener" href="http://www.open-open.com/lib/view/open1451353135339.html">Git 在团队中的最佳实践–如何正确使用Git Flow(opens new window)</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/34223150">优雅的提交你的 Git Commit Message</a></li>
</ul>
<h1 id="三、AI前端JS规范"><a href="#三、AI前端JS规范" class="headerlink" title="三、AI前端JS规范"></a>三、AI前端JS规范</h1><h2 id="变量"><a href="#变量" class="headerlink" title="#变量"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-js.html#%E5%8F%98%E9%87%8F">#</a>变量</h2><p>命名方式：小驼峰</p>
<p>命名规范：前缀名词</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// bad</span><br><span class="hljs-keyword">let</span> setCount = <span class="hljs-number">10</span><br><br><span class="hljs-comment">// good</span><br><span class="hljs-keyword">let</span> maxCount = <span class="hljs-number">10</span><br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h2 id="常量"><a href="#常量" class="headerlink" title="#常量"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-js.html#%E5%B8%B8%E9%87%8F">#</a>常量</h2><p>命名方式：全部大写</p>
<p>命名规范：多个单词时使用分隔符<code>_</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// bad</span><br><span class="hljs-keyword">const</span> serverErrorCode = &#123;<br>    <span class="hljs-attr">success</span>: <span class="hljs-number">200</span>,<br>    <span class="hljs-attr">repeat</span>: <span class="hljs-number">444</span><br>&#125;<br><br><span class="hljs-comment">// good</span><br><span class="hljs-keyword">const</span> SERVER_ERROR_CODE = &#123;<br>    <span class="hljs-attr">SUCCESS</span>: <span class="hljs-number">200</span>,<br>    <span class="hljs-attr">REPEAT</span>: <span class="hljs-number">444</span><br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h2 id="函数"><a href="#函数" class="headerlink" title="#函数"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-js.html#%E5%87%BD%E6%95%B0">#</a>函数</h2><p>命名方式：小驼峰</p>
<p>命名规范：前缀动词</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// bad</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">wordClass</span>(<span class="hljs-params"></span>) </span>&#123;&#125;<br><br><span class="hljs-comment">// good</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">saveWordClass</span>(<span class="hljs-params"></span>) </span>&#123;&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<blockquote>
<p>常用动词：can、has、is、load、get、set</p>
</blockquote>
<h2 id="类"><a href="#类" class="headerlink" title="#类"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-js.html#%E7%B1%BB">#</a>类</h2><p>命名方式：大驼峰</p>
<p>命名规范：前缀名词</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// bad</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">person</span> </span>&#123;&#125;<br><br><span class="hljs-comment">// good</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> </span>&#123;&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h2 id="注释"><a href="#注释" class="headerlink" title="#注释"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-js.html#%E6%B3%A8%E9%87%8A">#</a>注释</h2><h3 id="单行"><a href="#单行" class="headerlink" title="#单行"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-js.html#%E5%8D%95%E8%A1%8C">#</a>单行</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 单行注释，注意前面的空格</span><br><span class="hljs-keyword">let</span> maxCount = <span class="hljs-number">123</span><br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h3 id="多行"><a href="#多行" class="headerlink" title="#多行"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-js.html#%E5%A4%9A%E8%A1%8C">#</a>多行</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 多行注释</span><br><span class="hljs-comment"> * /</span><br><span class="hljs-comment"> </span><br><span class="hljs-comment"> </span><br><span class="hljs-comment">        Copied!</span><br><span class="hljs-comment">    </span><br></code></pre></td></tr></table></figure>

<h2 id="减少嵌套"><a href="#减少嵌套" class="headerlink" title="#减少嵌套"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-js.html#%E5%87%8F%E5%B0%91%E5%B5%8C%E5%A5%97">#</a>减少嵌套</h2><p>确定条件不允许时，尽早返回。经典使用场景：校验数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// bad</span><br><span class="hljs-keyword">if</span> (condition1) &#123;<br>    <span class="hljs-keyword">if</span> (condition2) &#123;<br>        ...<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// good</span><br><span class="hljs-keyword">if</span> (!condition1) <span class="hljs-keyword">return</span><br><span class="hljs-keyword">if</span> (!condition2) <span class="hljs-keyword">return</span><br>...<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h2 id="减少特定标记值"><a href="#减少特定标记值" class="headerlink" title="#减少特定标记值"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-js.html#%E5%87%8F%E5%B0%91%E7%89%B9%E5%AE%9A%E6%A0%87%E8%AE%B0%E5%80%BC">#</a>减少特定标记值</h2><p>使用常量进行自解释</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// bad</span><br><span class="hljs-attr">type</span>: <span class="hljs-number">1</span> <span class="hljs-comment">// 1代表新增  2代表修改</span><br><br><span class="hljs-comment">// good</span><br><span class="hljs-keyword">const</span> MODIFY_TYPE = &#123;<br>    <span class="hljs-attr">ADD</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">EDIT</span>: <span class="hljs-number">2</span><br>&#125;<br><br><span class="hljs-attr">type</span>: MODIFY_TYPE.ADD<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h2 id="表达式"><a href="#表达式" class="headerlink" title="#表达式"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-js.html#%E8%A1%A8%E8%BE%BE%E5%BC%8F">#</a>表达式</h2><p>尽可能简洁表达式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// bad</span><br><span class="hljs-keyword">if</span> (name === <span class="hljs-string">&#x27;&#x27;</span>)&#123;&#125;<br><span class="hljs-keyword">if</span> (collection.length &gt; <span class="hljs-number">0</span>)&#123;&#125;<br><span class="hljs-keyword">if</span> (notTrue === <span class="hljs-literal">false</span>)&#123;&#125;<br><br><span class="hljs-comment">// good</span><br><span class="hljs-keyword">if</span> (!name) &#123;&#125;<br><span class="hljs-keyword">if</span> (collection.length)&#123;&#125;<br><span class="hljs-keyword">if</span> (notTrue)&#123;&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h2 id="分支较多处理"><a href="#分支较多处理" class="headerlink" title="#分支较多处理"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-js.html#%E5%88%86%E6%94%AF%E8%BE%83%E5%A4%9A%E5%A4%84%E7%90%86">#</a>分支较多处理</h2><p>对于相同变量或表达式的多值条件，用<code>switch</code>代替<code>if</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// bad</span><br><span class="hljs-keyword">let</span> type = <span class="hljs-keyword">typeof</span> variable<br><span class="hljs-keyword">if</span> (type === <span class="hljs-string">&#x27;object&#x27;</span>) &#123;<br>    <span class="hljs-comment">// ......</span><br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (type === <span class="hljs-string">&#x27;number&#x27;</span> || type === <span class="hljs-string">&#x27;boolean&#x27;</span> || type === <span class="hljs-string">&#x27;string&#x27;</span>) &#123;<br>    <span class="hljs-comment">// ......</span><br>&#125;<br><br><span class="hljs-comment">// good</span><br><span class="hljs-keyword">switch</span> (<span class="hljs-keyword">typeof</span> variable) &#123;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;object&#x27;</span>:<br>        <span class="hljs-comment">// ......</span><br>        <span class="hljs-keyword">break</span><br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;number&#x27;</span>:<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;boolean&#x27;</span>:<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;string&#x27;</span>:<br>        <span class="hljs-comment">// ......</span><br>        <span class="hljs-keyword">break</span><br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h2 id="使用变量名自解释-V1-1"><a href="#使用变量名自解释-V1-1" class="headerlink" title="#使用变量名自解释 V1.1"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-js.html#%E4%BD%BF%E7%94%A8%E5%8F%98%E9%87%8F%E5%90%8D%E8%87%AA%E8%A7%A3%E9%87%8A-v1-1">#</a>使用变量名自解释 <code>V1.1</code></h2><p><strong>逻辑复杂</strong>时，建议使用变量名自解释，而不是晦涩难懂的简写。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// bad</span><br><span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>&#123;<br>    <span class="hljs-keyword">return</span> !helpers.req(value) || <span class="hljs-built_in">this</span>.entity.entVocabularyEntries.filter(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.vocabularyEntryName === value).length &lt; <span class="hljs-number">2</span><br>&#125;<br><br><span class="hljs-comment">// good</span><br><span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>&#123;<br>    <span class="hljs-keyword">let</span> entVocabularyList = <span class="hljs-built_in">this</span>.entity.entVocabularyEntries<br>    <span class="hljs-keyword">let</span> repeatCount = entVocabularyList.filter(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.vocabularyEntryName === value).length<br>    <span class="hljs-keyword">return</span> !helpers.req(value) || repeatCount &lt; <span class="hljs-number">2</span><br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h2 id="使用函数名自解释-V1-1"><a href="#使用函数名自解释-V1-1" class="headerlink" title="#使用函数名自解释 V1.1"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-js.html#%E4%BD%BF%E7%94%A8%E5%87%BD%E6%95%B0%E5%90%8D%E8%87%AA%E8%A7%A3%E9%87%8A-v1-1">#</a>使用函数名自解释 <code>V1.1</code></h2><p><strong>遵循单一职责</strong>的基础上，可以把逻辑隐藏在函数中，同时使用准确的函数名自解释。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// bad</span><br><span class="hljs-keyword">if</span> (modifyType === MODIFY_TYPE.ADD) &#123;<br>    batchVariableAPI(data).then(<span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-built_in">this</span>.closeModal()<br>        <span class="hljs-built_in">this</span>.$toast.show(<span class="hljs-string">&#x27;添加变量成功&#x27;</span>)<br>    &#125;)<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>  updateVariableAPI(data).then(<span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-built_in">this</span>.closeModal()<br>        <span class="hljs-built_in">this</span>.$toast.show(<span class="hljs-string">&#x27;修改变量成功&#x27;</span>)<br>    &#125;)<br>&#125;<br><br><span class="hljs-comment">// good</span><br>modifyType === MODIFY_TYPE.ADD ？ <span class="hljs-built_in">this</span>._insertVariable(data) : <span class="hljs-built_in">this</span>._updateVariable(data)<br><br><span class="hljs-function"><span class="hljs-title">_insertVariable</span>(<span class="hljs-params"></span>)</span> &#123;<br>    batchVariableAPI(data).then(<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">this</span>._successOperation(<span class="hljs-string">&#x27;添加变量成功&#x27;</span>))<br>&#125;<br><br><span class="hljs-function"><span class="hljs-title">_updateVariable</span>(<span class="hljs-params"></span>)</span> &#123;<br>    updateVariableAPI(data).then(<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">this</span>._successOperation(<span class="hljs-string">&#x27;修改变量成功&#x27;</span>))<br>&#125;<br><br><span class="hljs-function"><span class="hljs-title">_successOperation</span>(<span class="hljs-params">toastMsg</span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.closeModal()<br>    <span class="hljs-built_in">this</span>.$toast.show(toastMsg)<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h2 id="其他规范-1"><a href="#其他规范-1" class="headerlink" title="#其他规范"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-js.html#%E5%85%B6%E4%BB%96%E8%A7%84%E8%8C%83">#</a>其他规范</h2><p>使用prettier格式化工具以及eslint校验</p>
<ul>
<li>格式自动化</li>
<li>4个缩进</li>
<li>全部单引号</li>
<li>方法if / else / for / while / function / switch / do / try / catch / finally 关键字后有一个空格</li>
<li>自动省略分号</li>
</ul>
<p>.prettierrc配置：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">module</span>.exports = &#123;<br>    <span class="hljs-attr">printWidth</span>: <span class="hljs-number">100</span>, <span class="hljs-comment">// 设置prettier单行输出（不折行）的（最大）长度</span><br><br>    <span class="hljs-attr">tabWidth</span>: <span class="hljs-number">4</span>, <span class="hljs-comment">// 设置工具每一个水平缩进的空格数</span><br><br>    <span class="hljs-attr">useTabs</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// 使用tab（制表位）缩进而非空格</span><br><br>    <span class="hljs-attr">semi</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// 在语句末尾添加分号</span><br><br>    <span class="hljs-attr">singleQuote</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 使用单引号而非双引号</span><br><br>    <span class="hljs-attr">trailingComma</span>: <span class="hljs-string">&#x27;none&#x27;</span>, <span class="hljs-comment">// 在任何可能的多行中输入尾逗号</span><br><br>    <span class="hljs-attr">bracketSpacing</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 在对象字面量声明所使用的的花括号后（&#123;）和前（&#125;）输出空格</span><br><br>    <span class="hljs-attr">arrowParens</span>: <span class="hljs-string">&#x27;avoid&#x27;</span>, <span class="hljs-comment">// 为单行箭头函数的参数添加圆括号，参数个数为1时可以省略圆括号</span><br><br>    <span class="hljs-comment">// parser: &#x27;babylon&#x27;, // 指定使用哪一种解析器</span><br><br>    <span class="hljs-attr">jsxBracketSameLine</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 在多行JSX元素最后一行的末尾添加 &gt; 而使 &gt; 单独一行（不适用于自闭和元素）</span><br><br>    <span class="hljs-attr">rangeStart</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">// 只格式化某个文件的一部分</span><br><br>    <span class="hljs-attr">rangeEnd</span>: <span class="hljs-literal">Infinity</span>, <span class="hljs-comment">// 只格式化某个文件的一部分</span><br><br>    <span class="hljs-attr">filepath</span>: <span class="hljs-string">&#x27;none&#x27;</span>, <span class="hljs-comment">// 指定文件的输入路径，这将被用于解析器参照</span><br><br>    <span class="hljs-attr">requirePragma</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// (v1.7.0+) Prettier可以严格按照按照文件顶部的一些特殊的注释格式化代码，这些注释称为“require pragma”(必须杂注)</span><br><br>    <span class="hljs-attr">insertPragma</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">//  (v1.8.0+) Prettier可以在文件的顶部插入一个 @format的特殊注释，以表明改文件已经被Prettier格式化过了。</span><br><br>    <span class="hljs-attr">proseWrap</span>: <span class="hljs-string">&#x27;preserve&#x27;</span> <span class="hljs-comment">// (v1.8.2+)</span><br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p>.eslintrc.js规则：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">module</span>.exports = &#123;<br>    <span class="hljs-attr">root</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">env</span>: &#123;<br>        <span class="hljs-attr">browser</span>: <span class="hljs-literal">true</span>,<br>        <span class="hljs-attr">node</span>: <span class="hljs-literal">true</span><br>    &#125;,<br>    <span class="hljs-attr">extends</span>: [<span class="hljs-string">&#x27;plugin:vue/essential&#x27;</span>],<br>    <span class="hljs-attr">parserOptions</span>: &#123;<br>        <span class="hljs-attr">parser</span>: <span class="hljs-string">&#x27;babel-eslint&#x27;</span><br>    &#125;,<br>    <span class="hljs-attr">plugins</span>: [<span class="hljs-string">&#x27;vue&#x27;</span>],<br>    <span class="hljs-comment">// add your custom rules here</span><br>    <span class="hljs-attr">rules</span>: &#123;<br>        <span class="hljs-string">&#x27;arrow-parens&#x27;</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">// allow paren-less arrow functions</span><br><br>        <span class="hljs-string">&#x27;generator-star-spacing&#x27;</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">// allow async-await</span><br><br>        <span class="hljs-string">&#x27;no-unused-vars&#x27;</span>: <span class="hljs-string">&#x27;error&#x27;</span>, <span class="hljs-comment">// disabled no ununsed var  `V1.1`</span><br><br>        <span class="hljs-string">&#x27;no-debugger&#x27;</span>: process.env.NODE_ENV === <span class="hljs-string">&#x27;production&#x27;</span> ? <span class="hljs-string">&#x27;error&#x27;</span> : <span class="hljs-string">&#x27;off&#x27;</span>, <span class="hljs-comment">// no use debugger in production</span><br><br>        <span class="hljs-string">&#x27;indent&#x27;</span>: [<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, &#123; <span class="hljs-attr">SwitchCase</span>: <span class="hljs-number">1</span> &#125;], <span class="hljs-comment">// 4 space for tab for perttier</span><br><br>        <span class="hljs-string">&#x27;space-before-function-paren&#x27;</span>: [<span class="hljs-string">&#x27;error&#x27;</span>, <span class="hljs-string">&#x27;never&#x27;</span>], <span class="hljs-comment">// no space in function name for perttier</span><br>    &#125;<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<blockquote>
<p>如果是vue-cli3项目，以上配置的eslint插件默认已安装；如果不是vue-cli3项目，需要npm安装对应包：npm install –save-dev babel-eslint eslint-plugin-vue</p>
</blockquote>
<h2 id="参考链接-1"><a href="#参考链接-1" class="headerlink" title="#参考链接"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-js.html#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5">#</a>参考链接</h2><p><a target="_blank" rel="noopener" href="https://github.com/ecomfe/spec/blob/master/javascript-style-guide.md">百度JS规范</a></p>
<h1 id="四、AI前端Vue规范"><a href="#四、AI前端Vue规范" class="headerlink" title="四、AI前端Vue规范"></a>四、AI前端Vue规范</h1><h3 id="文件命名"><a href="#文件命名" class="headerlink" title="#文件命名"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vue.html#%E6%96%87%E4%BB%B6%E5%91%BD%E5%90%8D">#</a>文件命名</h3><p>统一小写，多个单词作为文件名使用分隔符<code>-</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// bad</span><br>EntityList.vue<br>entityList.vue<br><br><span class="hljs-comment">// good</span><br>entity-list.vue<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h3 id="紧密耦合的组件命名"><a href="#紧密耦合的组件命名" class="headerlink" title="#紧密耦合的组件命名"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vue.html#%E7%B4%A7%E5%AF%86%E8%80%A6%E5%90%88%E7%9A%84%E7%BB%84%E4%BB%B6%E5%91%BD%E5%90%8D">#</a>紧密耦合的组件命名</h3><p>和父组件紧密耦合的子组件应该以父组件名作为前缀命名</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// bad</span><br>components/<br>|- todo-list.vue<br>|- todo-item.vue<br>└─ todo-button.vue<br><br><span class="hljs-comment">// good</span><br>components/<br>|- todo-list.vue<br>|- todo-list-item.vue<br>└─ todo-list-item-button.vue<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h3 id="自闭合组件"><a href="#自闭合组件" class="headerlink" title="#自闭合组件"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vue.html#%E8%87%AA%E9%97%AD%E5%90%88%E7%BB%84%E4%BB%B6">#</a>自闭合组件</h3><p>在单文件组件中没有内容的组件应该是自闭合的</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- bad --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">u-input</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">u-input</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- good --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">u-input</span> /&gt;</span><br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h3 id="指令缩写"><a href="#指令缩写" class="headerlink" title="#指令缩写"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vue.html#%E6%8C%87%E4%BB%A4%E7%BC%A9%E5%86%99">#</a>指令缩写</h3><p>用<code>:</code> 表示 <code>v-bind</code>: ，用<code>@</code>表示<code>v-on</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- bad --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-bind:value</span>=<span class="hljs-string">&quot;value&quot;</span> <span class="hljs-attr">v-on:input</span>=<span class="hljs-string">&quot;onInput&quot;</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- good --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">:value</span>=<span class="hljs-string">&quot;value&quot;</span> @<span class="hljs-attr">input</span>=<span class="hljs-string">&quot;onInput&quot;</span>&gt;</span><br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h3 id="组件数据"><a href="#组件数据" class="headerlink" title="#组件数据"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vue.html#%E7%BB%84%E4%BB%B6%E6%95%B0%E6%8D%AE">#</a>组件数据</h3><p>组件的 data 必须是一个函数,并且建议在此不使用箭头函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// bad</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-attr">data</span>: <span class="hljs-function">() =&gt;</span> (&#123;<br>    <span class="hljs-attr">foo</span>: <span class="hljs-string">&#x27;bar&#x27;</span><br>  &#125;)<br>&#125;<br><br><span class="hljs-comment">// good</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  data () &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      <span class="hljs-attr">foo</span>: <span class="hljs-string">&#x27;bar&#x27;</span><br>    &#125;<br>  &#125;<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h3 id="props命名"><a href="#props命名" class="headerlink" title="#props命名"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vue.html#props%E5%91%BD%E5%90%8D">#</a>props命名</h3><p>小驼峰命名。内容尽量详细，至少有默认值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// bad</span><br>greeting-text: <span class="hljs-built_in">String</span><br><br><span class="hljs-comment">// good</span><br><span class="hljs-attr">greetingText</span>: &#123; <span class="hljs-attr">type</span>: <span class="hljs-built_in">String</span>, <span class="hljs-attr">default</span>: <span class="hljs-string">&#x27;&#x27;</span>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h3 id="组件属性顺序和分行规则"><a href="#组件属性顺序和分行规则" class="headerlink" title="#组件属性顺序和分行规则"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vue.html#%E7%BB%84%E4%BB%B6%E5%B1%9E%E6%80%A7%E9%A1%BA%E5%BA%8F%E5%92%8C%E5%88%86%E8%A1%8C%E8%A7%84%E5%88%99">#</a>组件属性顺序和分行规则</h3><p>顺序原则：重要属性放前面</p>
<p>顺序依据：依次<code>指令</code>-&gt;<code>props属性</code>-&gt; <code>事件</code>-&gt;<code>dom属性(class有标记作用，除外)</code></p>
<p>分行规则：放在一行，重要内容较多时，可放置2～3行</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- bad --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">u-select</span></span><br><span class="hljs-tag">    <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;select&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">size</span>=<span class="hljs-string">&quot;s&quot;</span></span><br><span class="hljs-tag">    @<span class="hljs-attr">select</span>=<span class="hljs-string">&quot;searchEntity($event, row)&quot;</span></span><br><span class="hljs-tag">    @<span class="hljs-attr">blur</span>=<span class="hljs-string">&quot;searchEntity($event, row)&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;row.variableId&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">:list</span>=<span class="hljs-string">&quot;variableList&quot;</span> /&gt;</span><br><br><span class="hljs-comment">&lt;!-- good --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">u-select</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;row.variableId&quot;</span> <span class="hljs-attr">:list</span>=<span class="hljs-string">&quot;variableList&quot;</span> <span class="hljs-attr">size</span>=<span class="hljs-string">&quot;s&quot;</span></span><br><span class="hljs-tag">    @<span class="hljs-attr">select</span>=<span class="hljs-string">&quot;searchEntity($event, row)&quot;</span> @<span class="hljs-attr">blur</span>=<span class="hljs-string">&quot;searchEntity($event, row)&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;select&quot;</span> /&gt;</span><br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h3 id="Vue-API顺序"><a href="#Vue-API顺序" class="headerlink" title="#Vue API顺序"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vue.html#vue-api%E9%A1%BA%E5%BA%8F">#</a>Vue API顺序</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>    <span class="hljs-comment">/*1. Vue扩展 */</span><br>    <span class="hljs-attr">extends</span>: <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-comment">// extends和mixins都扩展逻辑，需要重点放前面</span><br>    <span class="hljs-attr">mixins</span>: [],   <br>    <span class="hljs-attr">components</span>: &#123;&#125;,<br>    <span class="hljs-comment">/* 2. Vue数据 */</span><br>    <span class="hljs-attr">props</span>: &#123;&#125;,<br>    <span class="hljs-attr">model</span>: &#123; <span class="hljs-attr">prop</span>: <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-attr">event</span>: <span class="hljs-string">&#x27;&#x27;</span> &#125;, <span class="hljs-comment">// model 会使用到 props</span><br>    data () &#123;<br>        <span class="hljs-keyword">return</span> &#123;&#125;<br>    &#125;,<br>    <span class="hljs-attr">computed</span>: &#123;&#125;,<br>    <span class="hljs-attr">watch</span>:&#123;&#125;, <span class="hljs-comment">// watch 监控的是 props 和 data，有必要时监控computed</span><br>    <span class="hljs-comment">/* 3. Vue资源 */</span><br>    <span class="hljs-attr">filters</span>: &#123;&#125;,<br>    <span class="hljs-attr">directives</span>: &#123;&#125;,<br>    <span class="hljs-comment">/* 4. Vue生命周期 */</span><br>    created () &#123;&#125;,<br>    mounted () &#123;&#125;,<br>    destroy () &#123;&#125;,<br>    <span class="hljs-comment">/* 5. Vue方法 */</span><br>    <span class="hljs-attr">methods</span>: &#123;&#125;, <span class="hljs-comment">// all the methods should be put here in the last</span><br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h3 id="Vue组件顶级标签顺序"><a href="#Vue组件顶级标签顺序" class="headerlink" title="#Vue组件顶级标签顺序"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vue.html#vue%E7%BB%84%E4%BB%B6%E9%A1%B6%E7%BA%A7%E6%A0%87%E7%AD%BE%E9%A1%BA%E5%BA%8F">#</a>Vue组件顶级标签顺序</h3><p>顺序保持一致，且标签之间留有空行。template第一层级下四个空格，script和style第一层级都不加空格</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;&#125;</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br>.app &#123;&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h3 id="import引入顺序-V1-1"><a href="#import引入顺序-V1-1" class="headerlink" title="#import引入顺序 V1.1"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vue.html#import%E5%BC%95%E5%85%A5%E9%A1%BA%E5%BA%8F-v1-1">#</a>import引入顺序 <code>V1.1</code></h3><p>原则：同等类型的放一起，优先放mixins和components等UI资源。忌随意放置</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// bad</span><br><span class="hljs-keyword">import</span> &#123; getAllEntityList, getVariableGroup &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/server/api&#x27;</span><br><span class="hljs-keyword">import</span> &#123; helpers &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vuelidate/lib/validators&#x27;</span><br><span class="hljs-keyword">import</span> &#123; getRepeatLine &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/utils/common&#x27;</span><br><span class="hljs-keyword">import</span> &#123; CloseModalMixin, InvalidCheckMixin &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/components/common/mixins&#x27;</span><br><span class="hljs-keyword">import</span> VSearchSelect <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/components/variable/v-search-select&#x27;</span><br><span class="hljs-keyword">import</span> EModifyModal <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/components/entity/e-modify-modal&#x27;</span><br><span class="hljs-keyword">import</span> &#123; MODIFY_MODAL_TYPE &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/utils/config&#x27;</span><br><span class="hljs-keyword">import</span> &#123; botIdLoc, custIdLoc &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/utils/locs&#x27;</span><br><br><span class="hljs-comment">// good</span><br><span class="hljs-keyword">import</span> &#123; CloseModalMixin, InvalidCheckMixin &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/components/common/mixins&#x27;</span><br><span class="hljs-keyword">import</span> VSearchSelect <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/components/variable/v-search-select&#x27;</span><br><span class="hljs-keyword">import</span> EModifyModal <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/components/entity/e-modify-modal&#x27;</span><br><span class="hljs-keyword">import</span> &#123; getAllEntityList, getVariableGroup &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/server/api&#x27;</span><br><span class="hljs-keyword">import</span> &#123; helpers &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vuelidate/lib/validators&#x27;</span><br><span class="hljs-keyword">import</span> &#123; MODIFY_MODAL_TYPE &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/utils/config&#x27;</span><br><span class="hljs-keyword">import</span> &#123; getRepeatLine &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/utils/common&#x27;</span><br><span class="hljs-keyword">import</span> &#123; botIdLoc, custIdLoc &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/utils/locs&#x27;</span><br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h3 id="Vue-复杂data加注释-分组-V1-1"><a href="#Vue-复杂data加注释-分组-V1-1" class="headerlink" title="#Vue 复杂data加注释/分组 V1.1"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vue.html#vue-%E5%A4%8D%E6%9D%82data%E5%8A%A0%E6%B3%A8%E9%87%8A-%E5%88%86%E7%BB%84-v1-1">#</a>Vue 复杂data加注释/分组 <code>V1.1</code></h3><p>data数据是连接View和Modal的基础，当ViewModal复杂时，建议进行注释并分组。另外，当data过于复杂时应考虑优化重构。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// bad</span><br><span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>        <span class="hljs-attr">isOpenModal</span>: <span class="hljs-literal">false</span>,<br>        <span class="hljs-attr">list</span>: [],<br>        <span class="hljs-attr">groupList</span>: [],<br>        <span class="hljs-attr">searchParams</span>: &#123; <span class="hljs-attr">groupId</span>: <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-attr">searchParam</span>: <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-attr">searchType</span>: <span class="hljs-string">&#x27;&#x27;</span> &#125;,<br>        <span class="hljs-attr">pageParam</span>: &#123; <span class="hljs-attr">currentPage</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">pageSize</span>: <span class="hljs-number">50</span> &#125;,<br>        <span class="hljs-attr">totalCount</span>: <span class="hljs-number">0</span>,<br>        <span class="hljs-attr">groupId</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>        <span class="hljs-attr">typeList</span>: [],<br>        <span class="hljs-attr">defaultType</span>: <span class="hljs-string">&#x27;paramName&#x27;</span><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// good</span><br><span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>        <span class="hljs-attr">variableList</span>: [],<br>        <span class="hljs-attr">groupList</span>: [],<br>        <span class="hljs-attr">typeList</span>: [],<br><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        * 查询参数</span><br><span class="hljs-comment">        * 组与组之间通过空行区分</span><br><span class="hljs-comment">        */</span><br>        <span class="hljs-attr">searchParams</span>: &#123; <span class="hljs-attr">groupId</span>: <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-attr">searchParam</span>: <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-attr">searchType</span>: <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-attr">currentPage</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">pageSize</span>: <span class="hljs-number">50</span> &#125;,<br>        <span class="hljs-attr">totalCount</span>: <span class="hljs-number">0</span>,<br>        <span class="hljs-attr">defaultType</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br><br>        <span class="hljs-attr">isOpenModal</span>: <span class="hljs-literal">false</span><br>    &#125;<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h1 id="五、AI前端工程工具链"><a href="#五、AI前端工程工具链" class="headerlink" title="五、AI前端工程工具链"></a>五、AI前端工程工具链</h1><p>为了提高整体开发效率，需要定制一些vue/electron/官网等脚手架工具。首先要将一些代码规范考虑在内，需要保持git仓库的代码就像是一个人写出来的。根据团队习惯，考虑后使用组合工具：</p>
<ol>
<li><strong>规范提交代码（必需）</strong>：<code>eslint</code> + <code>stylelint</code> + <code>prettier</code> + <code>husky</code> + <code>lint-staged</code>。</li>
<li><strong>规范commit日志（必需）</strong>：<code>commitlint</code> + <code>commitizen</code> + <code>cz-conventional-changelog</code> + <code>conventional-changelog-cli</code></li>
<li><strong>规范提交流程（github项目）</strong>：<code>release-it</code> + <code>gh-pages</code>。</li>
<li><strong>辅助代码分析（可选）</strong>：<code>jsinspect</code> + <code>jscpd</code></li>
</ol>
<h3 id="1-规范提交代码"><a href="#1-规范提交代码" class="headerlink" title="#1. 规范提交代码"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vuetool.html#_1-%E8%A7%84%E8%8C%83%E6%8F%90%E4%BA%A4%E4%BB%A3%E7%A0%81">#</a>1. 规范提交代码</h3><p>针对写出符合团队代码规范的js、css代码</p>
<ol>
<li><strong>eslint</strong>: 对js做规则约束。强制校验</li>
<li><strong>stylelint</strong>: 对css做规则约束</li>
<li><strong>prettier</strong>: 代码格式化。强制格式化</li>
<li>**husky + <a target="_blank" rel="noopener" href="https://github.com/okonet/lint-staged">lint-staged (opens new window)</a>**：本地git钩子工具</li>
</ol>
<h4 id="1-1-eslint-opens-new-window"><a href="#1-1-eslint-opens-new-window" class="headerlink" title="#1.1 eslint(opens new window)"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vuetool.html#_1-1-eslint">#</a>1.1 <a target="_blank" rel="noopener" href="https://github.com/eslint/eslint">eslint(opens new window)</a></h4><h5 id="1-1-1-安装"><a href="#1-1-1-安装" class="headerlink" title="#1.1.1 安装"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vuetool.html#_1-1-1-%E5%AE%89%E8%A3%85">#</a>1.1.1 安装</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm install --save-dev eslint eslint-plugin-vue babel-eslint<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h5 id="1-1-2-eslintrc-js配置"><a href="#1-1-2-eslintrc-js配置" class="headerlink" title="#1.1.2 .eslintrc.js配置"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vuetool.html#_1-1-2-eslintrc-js%E9%85%8D%E7%BD%AE">#</a>1.1.2 <code>.eslintrc.js</code>配置</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">module</span>.exports = &#123;<br>    <span class="hljs-attr">root</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-comment">// 指定代码的运行环境。不同的运行环境，全局变量不一样</span><br>    <span class="hljs-attr">env</span>: &#123;<br>      <span class="hljs-attr">browser</span>: <span class="hljs-literal">true</span>,<br>      <span class="hljs-attr">node</span>: <span class="hljs-literal">true</span><br>    &#125;,<br>    <span class="hljs-attr">parserOptions</span>: &#123;<br>    <span class="hljs-comment">// ESLint 默认使用Espree作为其解析器,安装了 babel-eslint 用来代替默认的解析器</span><br>      <span class="hljs-attr">parser</span>: <span class="hljs-string">&#x27;babel-eslint&#x27;</span><br>    &#125;,<br>    <span class="hljs-comment">// 使得不需要自行定义大量的规则</span><br>    <span class="hljs-attr">extends</span>: [<br>      <span class="hljs-comment">// consider switching to `plugin:vue/strongly-recommended` or `plugin:vue/recommended` for stricter rules.</span><br>      <span class="hljs-string">&#x27;plugin:vue/essential&#x27;</span><br>    ],<br>    <span class="hljs-comment">// 插件</span><br>    <span class="hljs-attr">plugins</span>: [<br>      <span class="hljs-string">&#x27;vue&#x27;</span><br>    ],<br>    <span class="hljs-comment">// add your custom rules here</span><br>    <span class="hljs-attr">rules</span>: &#123;<br>      <span class="hljs-comment">// allow async-await</span><br>      <span class="hljs-string">&#x27;generator-star-spacing&#x27;</span>: <span class="hljs-string">&#x27;off&#x27;</span>,<br>      <span class="hljs-comment">// allow debugger during development</span><br>      <span class="hljs-string">&#x27;no-debugger&#x27;</span>: process.env.NODE_ENV === <span class="hljs-string">&#x27;production&#x27;</span> ? <span class="hljs-string">&#x27;error&#x27;</span> : <span class="hljs-string">&#x27;off&#x27;</span>,<br>      <span class="hljs-string">&#x27;indent&#x27;</span>: [<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, &#123; <span class="hljs-string">&#x27;SwitchCase&#x27;</span>: <span class="hljs-number">1</span> &#125;],<br>      ...<br>    &#125;<br>  &#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h5 id="1-1-3-提交前强制校验"><a href="#1-1-3-提交前强制校验" class="headerlink" title="#1.1.3 提交前强制校验"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vuetool.html#_1-1-3-%E6%8F%90%E4%BA%A4%E5%89%8D%E5%BC%BA%E5%88%B6%E6%A0%A1%E9%AA%8C">#</a>1.1.3 提交前强制校验</h5><p>将约束命令放置在提交代码前检查，这就要使用<a target="_blank" rel="noopener" href="https://github.com/typicode/husky">husky (opens new window)</a>+ <a target="_blank" rel="noopener" href="https://github.com/okonet/lint-staged">lint-staged (opens new window)</a>工具，工具能在提交代码precommit时调用钩子命令。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs sh">npm install husky lint-staged -D<br> <br>        Copied!<br>    <br><span class="hljs-string">&quot;scripts&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;lint&quot;</span>: <span class="hljs-string">&quot;eslint --ext .js,.vue --ignore-path .gitignore .&quot;</span>,<br>&#125;,<br><span class="hljs-string">&quot;gitHooks&quot;</span>: &#123;<br>  <span class="hljs-string">&quot;pre-commit&quot;</span>: <span class="hljs-string">&quot;lint-staged&quot;</span><br>&#125;,<br><span class="hljs-string">&quot;lint-staged&quot;</span>: &#123;<br>  <span class="hljs-string">&quot;*.&#123;js,vue,ts&#125;&quot;</span>: [<br>    <span class="hljs-string">&quot;npm run lint&quot;</span><br>  ]<br>&#125;,<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p>TIP</p>
<p>如果是vue-cli3项目创建的项目，以上配置都自动生成了，直接执行vue-cli-service lint即可。</p>
<h4 id="1-2-prettier-opens-new-window"><a href="#1-2-prettier-opens-new-window" class="headerlink" title="#1.2 prettier(opens new window)"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vuetool.html#_1-2-prettier">#</a>1.2 <a target="_blank" rel="noopener" href="https://github.com/prettier/prettier">prettier(opens new window)</a></h4><h5 id="1-2-1-安装"><a href="#1-2-1-安装" class="headerlink" title="#1.2.1 安装"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vuetool.html#_1-2-1-%E5%AE%89%E8%A3%85">#</a>1.2.1 安装</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm install --save-dev prettier<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h5 id="1-2-2-prettierrc-js配置"><a href="#1-2-2-prettierrc-js配置" class="headerlink" title="#1.2.2. .prettierrc.js配置"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vuetool.html#_1-2-2-prettierrc-js%E9%85%8D%E7%BD%AE">#</a>1.2.2. <code>.prettierrc.js</code>配置</h5><p>以下感谢团队伙伴@Birttany的配置说明</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">module</span>.exports = &#123;<br>    <span class="hljs-attr">printWidth</span>: <span class="hljs-number">100</span>, <span class="hljs-comment">// 设置prettier单行输出（不折行）的（最大）长度</span><br><br>    <span class="hljs-attr">tabWidth</span>: <span class="hljs-number">4</span>, <span class="hljs-comment">// 设置工具每一个水平缩进的空格数</span><br><br>    <span class="hljs-attr">useTabs</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// 使用tab（制表位）缩进而非空格</span><br><br>    <span class="hljs-attr">semi</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// 在语句末尾添加分号</span><br><br>    <span class="hljs-attr">singleQuote</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 使用单引号而非双引号</span><br><br>    <span class="hljs-attr">trailingComma</span>: <span class="hljs-string">&#x27;none&#x27;</span>, <span class="hljs-comment">// 在任何可能的多行中输入尾逗号</span><br><br>    <span class="hljs-attr">bracketSpacing</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 在对象字面量声明所使用的的花括号后（&#123;）和前（&#125;）输出空格</span><br><br>    <span class="hljs-attr">arrowParens</span>: <span class="hljs-string">&#x27;avoid&#x27;</span>, <span class="hljs-comment">// 为单行箭头函数的参数添加圆括号，参数个数为1时可以省略圆括号</span><br><br>    <span class="hljs-attr">parser</span>: <span class="hljs-string">&#x27;babylon&#x27;</span>, <span class="hljs-comment">// 指定使用哪一种解析器</span><br><br>    <span class="hljs-attr">jsxBracketSameLine</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 在多行JSX元素最后一行的末尾添加 &gt; 而使 &gt; 单独一行（不适用于自闭和元素）</span><br><br>    <span class="hljs-attr">rangeStart</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">// 只格式化某个文件的一部分</span><br><br>    <span class="hljs-attr">rangeEnd</span>: <span class="hljs-literal">Infinity</span>, <span class="hljs-comment">// 只格式化某个文件的一部分</span><br><br>    <span class="hljs-attr">filepath</span>: <span class="hljs-string">&#x27;none&#x27;</span>, <span class="hljs-comment">// 指定文件的输入路径，这将被用于解析器参照</span><br><br>    <span class="hljs-attr">requirePragma</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// (v1.7.0+) Prettier可以严格按照按照文件顶部的一些特殊的注释格式化代码，这些注释称为“require pragma”(必须杂注)</span><br><br>    <span class="hljs-attr">insertPragma</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">//  (v1.8.0+) Prettier可以在文件的顶部插入一个 @format的特殊注释，以表明改文件已经被Prettier格式化过了。</span><br><br>    <span class="hljs-attr">proseWrap</span>: <span class="hljs-string">&#x27;preserve&#x27;</span> <span class="hljs-comment">// (v1.8.2+)</span><br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h5 id="1-2-3-提交前强制格式化"><a href="#1-2-3-提交前强制格式化" class="headerlink" title="#1.2.3 提交前强制格式化"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vuetool.html#_1-2-3-%E6%8F%90%E4%BA%A4%E5%89%8D%E5%BC%BA%E5%88%B6%E6%A0%BC%E5%BC%8F%E5%8C%96">#</a>1.2.3 提交前强制格式化</h5><p>在提交git时需要对整个项目执行<code>format</code>格式化，使得代码强制统一。格式化之后再用<code>eslint</code>检查语法错误，无误后把格式化后的代码用<code>git add .</code>添加进入。如果有错误直接中断提交。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-string">&quot;scripts&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;lint&quot;</span>: <span class="hljs-string">&quot;eslint --ext .js,.vue --ignore-path .gitignore .&quot;</span>,<br>&#125;,<br><span class="hljs-string">&quot;gitHooks&quot;</span>: &#123;<br>  <span class="hljs-attr">&quot;pre-commit&quot;</span>: <span class="hljs-string">&quot;lint-staged&quot;</span><br>&#125;,<br><span class="hljs-string">&quot;lint-staged&quot;</span>: &#123;<br>  <span class="hljs-attr">&quot;*.&#123;js,vue,ts&#125;&quot;</span>: [<br>    <span class="hljs-string">&quot;prettier --write&quot;</span>,<br>    <span class="hljs-string">&quot;npm run lint&quot;</span><br>  ]<br>&#125;,<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h4 id="1-3-stylelint"><a href="#1-3-stylelint" class="headerlink" title="#1.3 stylelint"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vuetool.html#_1-3-stylelint">#</a>1.3 stylelint</h4><p><a target="_blank" rel="noopener" href="https://github.com/lq782655835/blogs/issues/1">参见另一篇博客(opens new window)</a></p>
<h3 id="2-规范commit日志-必需"><a href="#2-规范commit日志-必需" class="headerlink" title="#2. 规范commit日志(必需)"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vuetool.html#_2-%E8%A7%84%E8%8C%83commit%E6%97%A5%E5%BF%97-%E5%BF%85%E9%9C%80">#</a>2. 规范commit日志(必需)</h3><p>在多人协作的项目中，如果Git的提交说明精准，在后期协作以及Bug处理时会变得有据可查，项目的开发可以根据规范的提交说明快速生成开发日志，从而方便开发者或用户追踪项目的开发信息和功能特性。</p>
<p>规范的Git提交说明:</p>
<ul>
<li>提供更多的历史信息，方便快速浏览</li>
<li>可以过滤某些commit，便于筛选代码review</li>
<li>可以追踪commit生成更新日志</li>
<li>可以关联issues</li>
</ul>
<p>Git提交说明结构:</p>
<p>Git提交说明可分为三个部分：Header、Body和Footer。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">Header</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">Body</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">Footer</span>&gt;</span><br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p>Header部分包括三个字段type（必需）、scope（可选）和subject（必需）。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>(<span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>): <span class="hljs-tag">&lt;<span class="hljs-name">subject</span>&gt;</span><br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p>type用于说明 commit 的提交性质。(Angular规范)</p>
<ul>
<li>feat 新增一个功能</li>
<li>fix 修复一个Bug</li>
<li>docs 文档变更</li>
<li>style 代码格式（不影响功能，例如空格、分号等格式修正）</li>
<li>refactor 代码重构</li>
<li>perf 改善性能</li>
<li>test 测试</li>
<li>build 变更项目构建或外部依赖（例如scopes: webpack、gulp、npm等）</li>
<li>ci 更改持续集成软件的配置文件和package中的scripts命令，例如scopes: Travis, Circle等</li>
<li>chore 变更构建流程或辅助工具</li>
<li>revert 代码回退</li>
</ul>
<h4 id="2-1-commitlint-opens-new-window"><a href="#2-1-commitlint-opens-new-window" class="headerlink" title="#2.1 commitlint(opens new window)"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vuetool.html#_2-1-commitlint">#</a>2.1 <a target="_blank" rel="noopener" href="https://github.com/conventional-changelog/commitlint">commitlint(opens new window)</a></h4><p><strong>约定commit message提交的格式</strong>。</p>
<h5 id="2-1-1-安装"><a href="#2-1-1-安装" class="headerlink" title="#2.1.1 安装"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vuetool.html#_2-1-1-%E5%AE%89%E8%A3%85">#</a>2.1.1 安装</h5><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">npm install --save-dev @commitlint/config-conventional @commitlint/cli<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h5 id="2-1-2-配置"><a href="#2-1-2-配置" class="headerlink" title="#2.1.2 配置"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vuetool.html#_2-1-2-%E9%85%8D%E7%BD%AE">#</a>2.1.2 配置</h5><p>在根目录执行以下命令作为commitlint的配置</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;module.exports = &#123;extends: [&#x27;@commitlint/config-conventional&#x27;]&#125;&quot;</span> &gt; commitlint.config.js<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h5 id="2-1-2-提交前校验"><a href="#2-1-2-提交前校验" class="headerlink" title="#2.1.2 提交前校验"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vuetool.html#_2-1-2-%E6%8F%90%E4%BA%A4%E5%89%8D%E6%A0%A1%E9%AA%8C">#</a>2.1.2 提交前校验</h5><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-string">&quot;husky&quot;</span>: &#123;<br>  <span class="hljs-attr">&quot;hooks&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;commit-msg&quot;</span>: <span class="hljs-string">&quot;commitlint -E HUSKY_GIT_PARAMS&quot;</span><br>  &#125;<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h4 id="2-2-commitizen-cz-conventional-changelog"><a href="#2-2-commitizen-cz-conventional-changelog" class="headerlink" title="#2.2 commitizen cz-conventional-changelog"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vuetool.html#_2-2-commitizen-cz-conventional-changelog">#</a>2.2 commitizen cz-conventional-changelog</h4><p>commitlint约定了提交的格式，但每次书写都需要记住那些约定，增加记忆负担。所以<strong>使用cz工具让提交commit过程更加可视化</strong>。</p>
<p>commitizen/cz-cli是一个可以实现规范的提交说明的工具，提供选择的提交信息类别，快速生成提交说明。</p>
<h5 id="2-2-1-安装"><a href="#2-2-1-安装" class="headerlink" title="#2.2.1 安装"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vuetool.html#_2-2-1-%E5%AE%89%E8%A3%85">#</a>2.2.1 安装</h5><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">npm i commitizen cz-conventional-changelog -D<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h5 id="2-2-2-配置"><a href="#2-2-2-配置" class="headerlink" title="#2.2.2 配置"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vuetool.html#_2-2-2-%E9%85%8D%E7%BD%AE">#</a>2.2.2 配置</h5><p>使用cz-conventional-changelog适配器（介于AngularJS规范），约定提交代码时的选项。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-string">&quot;config&quot;</span>: &#123;<br>  <span class="hljs-attr">&quot;commitizen&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;./node_modules/cz-conventional-changelog&quot;</span><br>  &#125;<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h5 id="2-2-3-命令执行"><a href="#2-2-3-命令执行" class="headerlink" title="#2.2.3 命令执行"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vuetool.html#_2-2-3-%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C">#</a>2.2.3 命令执行</h5><p>以后git commit都使用npm run commit（即git-cz）代替</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-string">&quot;scripts&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;commit&quot;</span>: <span class="hljs-string">&quot;git add -A &amp;&amp; git-cz&quot;</span><br>&#125;,<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p>commitlint + commitizen cz-conventional-changelog + conventional-changelog-cli</p>
<h4 id="2-3-conventional-changelog-cli-opens-new-window"><a href="#2-3-conventional-changelog-cli-opens-new-window" class="headerlink" title="#2.3 conventional-changelog-cli(opens new window)"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vuetool.html#_2-3-conventional-changelog-cli">#</a>2.3 <a target="_blank" rel="noopener" href="https://github.com/conventional-changelog/conventional-changelog/tree/master/packages/conventional-changelog-cli">conventional-changelog-cli(opens new window)</a></h4><p><strong>自动根据commit生成changelog</strong>。</p>
<p>良好的changelog可以让用户一眼知道组件库的版本迭代演进，也是长期维护项目的必备内容。</p>
<h5 id="2-3-1-安装"><a href="#2-3-1-安装" class="headerlink" title="#2.3.1 安装"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vuetool.html#_2-3-1-%E5%AE%89%E8%A3%85">#</a>2.3.1 安装</h5><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">npm install conventional-changelog-cli -D<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h5 id="2-3-2-命令执行"><a href="#2-3-2-命令执行" class="headerlink" title="#2.3.2 命令执行"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vuetool.html#_2-3-2-%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C">#</a>2.3.2 命令执行</h5><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-string">&quot;scripts&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;changelog&quot;</span>: <span class="hljs-string">&quot;conventional-changelog -p angular -i CHANGELOG.md -s -r 0&quot;</span><br>&#125;,<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p>TIP</p>
<p>每次发布组件包版本后，即可使用npm run changelog命令，自动根据git commit生成日志。</p>
<h3 id="3-规范提交流程（可选）"><a href="#3-规范提交流程（可选）" class="headerlink" title="#3. 规范提交流程（可选）"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vuetool.html#_3-%E8%A7%84%E8%8C%83%E6%8F%90%E4%BA%A4%E6%B5%81%E7%A8%8B-%E5%8F%AF%E9%80%89">#</a>3. 规范提交流程（可选）</h3><p>针对github + npm项目，可以简化流程。内部非开源项目可跳过该内容。</p>
<ul>
<li>gh-pages（发布demo到github）</li>
<li>release-it/<a target="_blank" rel="noopener" href="https://github.com/conventional-changelog/standard-version">standard-version (opens new window)</a>（自动提交github代码 + 自动修改lib库版本 + 推送npm服务器）</li>
</ul>
<h4 id="3-1-安装"><a href="#3-1-安装" class="headerlink" title="#3.1 安装"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vuetool.html#_3-1-%E5%AE%89%E8%A3%85">#</a>3.1 安装</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">npm i gh-pages release-it -D<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h4 id="3-2-命令执行"><a href="#3-2-命令执行" class="headerlink" title="#3.2 命令执行"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vuetool.html#_3-2-%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C">#</a>3.2 命令执行</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-string">&quot;scripts&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;release&quot;</span>: <span class="hljs-string">&quot;release-it&quot;</span>,<br>    <span class="hljs-attr">&quot;release:docs&quot;</span>: <span class="hljs-string">&quot;npm run build:docs &amp;&amp; gh-pages -d docs/.vuepress/dist</span><br><span class="hljs-string">&#125;,</span><br><span class="hljs-string"> </span><br><span class="hljs-string">        Copied!</span><br><span class="hljs-string">    </span><br></code></pre></td></tr></table></figure>

<h3 id="4-辅助代码分析（可选）"><a href="#4-辅助代码分析（可选）" class="headerlink" title="#4. 辅助代码分析（可选）"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vuetool.html#_4-%E8%BE%85%E5%8A%A9%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90-%E5%8F%AF%E9%80%89">#</a>4. 辅助代码分析（可选）</h3><p>敏捷开发过程中，代码复查是至关重要的一环，团队需要使用工具辅助代码分析。经比较和实践后，使用工具：<code>jsinspect</code> + <code>jscpd</code></p>
<ol>
<li><strong>jsinspect</strong>: 对js或jsx代码做重复检测。</li>
<li><strong>jscpd</strong>: 对代码重复率进行报告总结，辅助代码复查</li>
</ol>
<h4 id="4-1-jsinspect-opens-new-window"><a href="#4-1-jsinspect-opens-new-window" class="headerlink" title="#4.1 jsinspect(opens new window)"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vuetool.html#_4-1-jsinspect">#</a>4.1 <a target="_blank" rel="noopener" href="https://github.com/danielstjules/jsinspect">jsinspect(opens new window)</a></h4><h5 id="4-1-1-安装"><a href="#4-1-1-安装" class="headerlink" title="#4.1.1 安装"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vuetool.html#_4-1-1-%E5%AE%89%E8%A3%85">#</a>4.1.1 安装</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm install jsinspect --save-dev<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h5 id="4-1-2-提交前强制校验"><a href="#4-1-2-提交前强制校验" class="headerlink" title="#4.1.2 提交前强制校验"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vuetool.html#_4-1-2-%E6%8F%90%E4%BA%A4%E5%89%8D%E5%BC%BA%E5%88%B6%E6%A0%A1%E9%AA%8C">#</a>4.1.2 提交前强制校验</h5><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-string">&quot;scripts&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;inspect&quot;</span>: <span class="hljs-string">&quot;jsinspect -t 50 ./src&quot;</span>,<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h4 id="4-2-jscpd-opens-new-window"><a href="#4-2-jscpd-opens-new-window" class="headerlink" title="#4.2 jscpd(opens new window)"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vuetool.html#_4-2-jscpd">#</a>4.2 <a target="_blank" rel="noopener" href="https://github.com/kucherenko/jscpd">jscpd(opens new window)</a></h4><h5 id="4-2-1-安装"><a href="#4-2-1-安装" class="headerlink" title="#4.2.1 安装"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vuetool.html#_4-2-1-%E5%AE%89%E8%A3%85">#</a>4.2.1 安装</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm install jscpd --save-dev<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h5 id="4-2-2-代码复查辅助命令"><a href="#4-2-2-代码复查辅助命令" class="headerlink" title="#4.2.2 代码复查辅助命令"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vuetool.html#_4-2-2-%E4%BB%A3%E7%A0%81%E5%A4%8D%E6%9F%A5%E8%BE%85%E5%8A%A9%E5%91%BD%E4%BB%A4">#</a>4.2.2 代码复查辅助命令</h5><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-string">&quot;scripts&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;codereview&quot;</span>: <span class="hljs-string">&quot;jscpd ./src&quot;</span><br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h3 id="总结"><a href="#总结" class="headerlink" title="#总结"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/1.standard-ai-vuetool.html#%E6%80%BB%E7%BB%93">#</a>总结</h3><ul>
<li>eslint + husky + lint-staged + prettier作为基础工具。</li>
<li>commitlint约束提交规范,commitizen让工具通过select选项，进行git commit, conventional-changelog-cli自动根据git commit生成changelog文件。</li>
<li>release-it核心是可以把包自动发送到npm上，gh-pages把指定目录发布到github gh-pages分支上。</li>
</ul>
<p>配置好以上工具，开发组件库时常用三个命令：</p>
<ul>
<li>平时开发提交commit： npm run commit “commit”: “git add -A &amp;&amp; git-cz”,</li>
<li>发布npm包: npm publish “prepublish”: “npm run build &amp;&amp; release-it &amp;&amp; npm run changelog”,</li>
<li>发布docs: npm run docs “release:docs”: “npm run build:docs &amp;&amp; gh-pages -d docs/.vuepress/dist”,</li>
</ul>
<p>以下示例个实际github项目配置: <a target="_blank" rel="noopener" href="https://github.com/lq782655835/yi-ui">lq782655835/yi-ui(opens new window)</a></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-string">&quot;scripts&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;commit&quot;</span>: <span class="hljs-string">&quot;git add -A &amp;&amp; git-cz&quot;</span>,<br>    <span class="hljs-attr">&quot;changelog&quot;</span>: <span class="hljs-string">&quot;conventional-changelog -p angular -i CHANGELOG.md -s -r 0&quot;</span>,<br>    <span class="hljs-attr">&quot;release&quot;</span>: <span class="hljs-string">&quot;release-it&quot;</span>,<br>    <span class="hljs-attr">&quot;lint&quot;</span>: <span class="hljs-string">&quot;vue-cli-service lint&quot;</span><br>&#125;,<br><span class="hljs-string">&quot;husky&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;hooks&quot;</span>: &#123;<br>        <span class="hljs-attr">&quot;pre-commit&quot;</span>: <span class="hljs-string">&quot;lint-staged&quot;</span>,<br>        <span class="hljs-attr">&quot;commit-msg&quot;</span>: <span class="hljs-string">&quot;commitlint -E HUSKY_GIT_PARAMS&quot;</span><br>    &#125;<br>&#125;,<br><span class="hljs-string">&quot;lint-staged&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;packages/**/*.&#123;vue,ts,tsx,js,jsx,json&#125;&quot;</span>: [<br>        <span class="hljs-string">&quot;prettier --write&quot;</span>,<br>        <span class="hljs-string">&quot;npm run lint&quot;</span><br>    ]<br>&#125;,<br><span class="hljs-string">&quot;config&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;commitizen&quot;</span>: &#123;<br>        <span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;./node_modules/cz-conventional-changelog&quot;</span><br>    &#125;<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h1 id="六、AI-JavaScript-风格指南"><a href="#六、AI-JavaScript-风格指南" class="headerlink" title="六、AI JavaScript 风格指南"></a>六、AI JavaScript 风格指南</h1><p>Original Repository: <a target="_blank" rel="noopener" href="https://github.com/ryanmcdermott/clean-code-javascript">ryanmcdermott/clean-code-javascript(opens new window)</a></p>
<blockquote>
<p>笔者注：本文<a target="_blank" rel="noopener" href="https://github.com/alivebao/clean-code-js">原文地址 (opens new window)</a>,作者根据 Robert C. Martin 《代码整洁之道》总结了适用于 JavaScript 的软件工程原则。该风格指南全面而实用，非常适合作为前端团队代码质量参考标准，也为新融入团队的同学提供一份代码质量指南。</p>
</blockquote>
<h2 id="1-目录"><a href="#1-目录" class="headerlink" title="1.#目录"></a>1.<a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">#</a>目录</h2><ol>
<li><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E4%BB%8B%E7%BB%8D">介绍</a></li>
<li><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E5%8F%98%E9%87%8F">变量</a></li>
<li><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E5%87%BD%E6%95%B0">函数</a></li>
<li><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#objects-and-data-structures">对象和数据结构</a></li>
<li><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%B1%BB">类</a></li>
<li><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E6%B5%8B%E8%AF%95">测试</a></li>
<li><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E5%B9%B6%E5%8F%91">并发</a></li>
<li><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86">错误处理</a></li>
<li><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E6%A0%BC%E5%BC%8F%E5%8C%96">格式化</a></li>
<li><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E6%B3%A8%E9%87%8A">注释</a></li>
</ol>
<h2 id="2-介绍"><a href="#2-介绍" class="headerlink" title="2.#介绍"></a>2.<a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E4%BB%8B%E7%BB%8D">#</a>介绍</h2><p><a target="_blank" rel="noopener" href="https://github.com/ryanmcdermott">作者 (opens new window)</a>根据 Robert C. Martin <a target="_blank" rel="noopener" href="https://www.amazon.com/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882"><em>《代码整洁之道》</em> (opens new window)</a>总结了适用于 JavaScript 的软件工程原则<a target="_blank" rel="noopener" href="https://github.com/ryanmcdermott/clean-code-javascript">《Clean Code JavaScript》 (opens new window)</a>。</p>
<p>本文是对其的翻译。</p>
<p>不必严格遵守本文的所有原则，有时少遵守一些效果可能会更好，具体应根据实际情况决定。这是根据《代码整洁之道》作者多年经验整理的代码优化建议，但也仅仅只是一份建议。</p>
<p>软件工程已经发展了 50 多年，至今仍在不断前进。现在，把这些原则当作试金石，尝试将他们作为团队代码质量考核的标准之一吧。</p>
<p>最后你需要知道的是，这些东西不会让你立刻变成一个优秀的工程师，长期奉行他们也并不意味着你能够高枕无忧不再犯错。千里之行，始于足下。我们需要时常和同行们进行代码评审，不断优化自己的代码。不要惧怕改善代码质量所需付出的努力，加油。</p>
<h2 id="3-变量"><a href="#3-变量" class="headerlink" title="3.#变量"></a>3.<a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E5%8F%98%E9%87%8F">#</a><strong>变量</strong></h2><h3 id="使用有意义，可读性好的变量名"><a href="#使用有意义，可读性好的变量名" class="headerlink" title="#使用有意义，可读性好的变量名"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E4%BD%BF%E7%94%A8%E6%9C%89%E6%84%8F%E4%B9%89-%E5%8F%AF%E8%AF%BB%E6%80%A7%E5%A5%BD%E7%9A%84%E5%8F%98%E9%87%8F%E5%90%8D">#</a>使用有意义，可读性好的变量名</h3><p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> yyyymmdstr = moment().format(<span class="hljs-string">&#x27;YYYY/MM/DD&#x27;</span>);<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> yearMonthDay = moment().format(<span class="hljs-string">&#x27;YYYY/MM/DD&#x27;</span>);<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h3 id="使用-ES6-的-const-定义常量"><a href="#使用-ES6-的-const-定义常量" class="headerlink" title="#使用 ES6 的 const 定义常量"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E4%BD%BF%E7%94%A8-es6-%E7%9A%84-const-%E5%AE%9A%E4%B9%89%E5%B8%B8%E9%87%8F">#</a>使用 ES6 的 const 定义常量</h3><p>反例中使用”var”定义的”常量”是可变的。</p>
<p>在声明一个常量时，该常量在整个程序中都应该是不可变的。</p>
<p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> FIRST_US_PRESIDENT = <span class="hljs-string">&quot;George Washington&quot;</span>;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> FIRST_US_PRESIDENT = <span class="hljs-string">&quot;George Washington&quot;</span>;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h3 id="对功能类似的变量名采用统一的命名风格"><a href="#对功能类似的变量名采用统一的命名风格" class="headerlink" title="#对功能类似的变量名采用统一的命名风格"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E5%AF%B9%E5%8A%9F%E8%83%BD%E7%B1%BB%E4%BC%BC%E7%9A%84%E5%8F%98%E9%87%8F%E5%90%8D%E9%87%87%E7%94%A8%E7%BB%9F%E4%B8%80%E7%9A%84%E5%91%BD%E5%90%8D%E9%A3%8E%E6%A0%BC">#</a>对功能类似的变量名采用统一的命名风格</h3><p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript">getUserInfo();<br>getClientData();<br>getCustomerRecord();<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript">getUser();<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h3 id="使用易于检索名称"><a href="#使用易于检索名称" class="headerlink" title="#使用易于检索名称"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E4%BD%BF%E7%94%A8%E6%98%93%E4%BA%8E%E6%A3%80%E7%B4%A2%E5%90%8D%E7%A7%B0">#</a>使用易于检索名称</h3><p>我们需要阅读的代码远比自己写的要多，使代码拥有良好的可读性且易于检索非常重要。阅读变量名晦涩难懂的代码对读者来说是一种相当糟糕的体验。 让你的变量名易于检索。</p>
<p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 525600 是什么?</span><br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">525600</span>; i++) &#123;<br>  runCronJob();<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// Declare them as capitalized `var` globals.</span><br><span class="hljs-keyword">var</span> MINUTES_IN_A_YEAR = <span class="hljs-number">525600</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; MINUTES_IN_A_YEAR; i++) &#123;<br>  runCronJob();<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h3 id="使用说明变量-即有意义的变量名"><a href="#使用说明变量-即有意义的变量名" class="headerlink" title="#使用说明变量(即有意义的变量名)"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E%E5%8F%98%E9%87%8F-%E5%8D%B3%E6%9C%89%E6%84%8F%E4%B9%89%E7%9A%84%E5%8F%98%E9%87%8F%E5%90%8D">#</a>使用说明变量(即有意义的变量名)</h3><p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> cityStateRegex = <span class="hljs-regexp">/^(.+)[,\\s]+(.+?)\s*(\d&#123;5&#125;)?$/</span>;<br>saveCityState(cityStateRegex.match(cityStateRegex)[<span class="hljs-number">1</span>], cityStateRegex.match(cityStateRegex)[<span class="hljs-number">2</span>]);<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> ADDRESS = <span class="hljs-string">&#x27;One Infinite Loop, Cupertino 95014&#x27;</span>;<br><span class="hljs-keyword">var</span> cityStateRegex = <span class="hljs-regexp">/^(.+)[,\\s]+(.+?)\s*(\d&#123;5&#125;)?$/</span>;<br><span class="hljs-keyword">var</span> match = ADDRESS.match(cityStateRegex)<br><span class="hljs-keyword">var</span> city = match[<span class="hljs-number">1</span>];<br><span class="hljs-keyword">var</span> state = match[<span class="hljs-number">2</span>];<br>saveCityState(city, state);<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h3 id="不要绕太多的弯子"><a href="#不要绕太多的弯子" class="headerlink" title="#不要绕太多的弯子"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E4%B8%8D%E8%A6%81%E7%BB%95%E5%A4%AA%E5%A4%9A%E7%9A%84%E5%BC%AF%E5%AD%90">#</a>不要绕太多的弯子</h3><p>显式优于隐式。</p>
<p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> locations = [<span class="hljs-string">&#x27;Austin&#x27;</span>, <span class="hljs-string">&#x27;New York&#x27;</span>, <span class="hljs-string">&#x27;San Francisco&#x27;</span>];<br>locations.forEach(<span class="hljs-function">(<span class="hljs-params">l</span>) =&gt;</span> &#123;<br>  doStuff();<br>  doSomeOtherStuff();<br>  ...<br>  ...<br>  ...<br>  <span class="hljs-comment">// l是什么？</span><br>  dispatch(l);<br>&#125;);<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> locations = [<span class="hljs-string">&#x27;Austin&#x27;</span>, <span class="hljs-string">&#x27;New York&#x27;</span>, <span class="hljs-string">&#x27;San Francisco&#x27;</span>];<br>locations.forEach(<span class="hljs-function">(<span class="hljs-params">location</span>) =&gt;</span> &#123;<br>  doStuff();<br>  doSomeOtherStuff();<br>  ...<br>  ...<br>  ...<br>  dispatch(location);<br>&#125;);<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h3 id="避免重复的描述"><a href="#避免重复的描述" class="headerlink" title="#避免重复的描述"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E9%81%BF%E5%85%8D%E9%87%8D%E5%A4%8D%E7%9A%84%E6%8F%8F%E8%BF%B0">#</a>避免重复的描述</h3><p>当类/对象名已经有意义时，对其变量进行命名不需要再次重复。</p>
<p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> Car = &#123;<br>  <span class="hljs-attr">carMake</span>: <span class="hljs-string">&#x27;Honda&#x27;</span>,<br>  <span class="hljs-attr">carModel</span>: <span class="hljs-string">&#x27;Accord&#x27;</span>,<br>  <span class="hljs-attr">carColor</span>: <span class="hljs-string">&#x27;Blue&#x27;</span><br>&#125;;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">paintCar</span>(<span class="hljs-params">car</span>) </span>&#123;<br>  car.carColor = <span class="hljs-string">&#x27;Red&#x27;</span>;<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> Car = &#123;<br>  <span class="hljs-attr">make</span>: <span class="hljs-string">&#x27;Honda&#x27;</span>,<br>  <span class="hljs-attr">model</span>: <span class="hljs-string">&#x27;Accord&#x27;</span>,<br>  <span class="hljs-attr">color</span>: <span class="hljs-string">&#x27;Blue&#x27;</span><br>&#125;;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">paintCar</span>(<span class="hljs-params">car</span>) </span>&#123;<br>  car.color = <span class="hljs-string">&#x27;Red&#x27;</span>;<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h3 id="避免无意义的条件判断"><a href="#避免无意义的条件判断" class="headerlink" title="#避免无意义的条件判断"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E9%81%BF%E5%85%8D%E6%97%A0%E6%84%8F%E4%B9%89%E7%9A%84%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD">#</a>避免无意义的条件判断</h3><p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createMicrobrewery</span>(<span class="hljs-params">name</span>) </span>&#123;<br>  <span class="hljs-keyword">var</span> breweryName;<br>  <span class="hljs-keyword">if</span> (name) &#123;<br>    breweryName = name;<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    breweryName = <span class="hljs-string">&#x27;Hipster Brew Co.&#x27;</span>;<br>  &#125;<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createMicrobrewery</span>(<span class="hljs-params">name</span>) </span>&#123;<br>  <span class="hljs-keyword">var</span> breweryName = name || <span class="hljs-string">&#x27;Hipster Brew Co.&#x27;</span><br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h2 id="4-函数"><a href="#4-函数" class="headerlink" title="4.#函数"></a>4.<a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E5%87%BD%E6%95%B0">#</a><strong>函数</strong></h2><h3 id="函数参数-理想情况下应不超过-2-个"><a href="#函数参数-理想情况下应不超过-2-个" class="headerlink" title="#函数参数 (理想情况下应不超过 2 个)"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0-%E7%90%86%E6%83%B3%E6%83%85%E5%86%B5%E4%B8%8B%E5%BA%94%E4%B8%8D%E8%B6%85%E8%BF%87-2-%E4%B8%AA">#</a>函数参数 (理想情况下应不超过 2 个)</h3><p>限制函数参数数量很有必要，这么做使得在测试函数时更加轻松。过多的参数将导致难以采用有效的测试用例对函数的各个参数进行测试。</p>
<p>应避免三个以上参数的函数。通常情况下，参数超过两个意味着函数功能过于复杂，这时需要重新优化你的函数。当确实需要多个参数时，大多情况下可以考虑这些参数封装成一个对象。</p>
<p>JS 定义对象非常方便，当需要多个参数时，可以使用一个对象进行替代。</p>
<p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createMenu</span>(<span class="hljs-params">title, body, buttonText, cancellable</span>) </span>&#123;<br>  ...<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> menuConfig = &#123;<br>  <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;Foo&#x27;</span>,<br>  <span class="hljs-attr">body</span>: <span class="hljs-string">&#x27;Bar&#x27;</span>,<br>  <span class="hljs-attr">buttonText</span>: <span class="hljs-string">&#x27;Baz&#x27;</span>,<br>  <span class="hljs-attr">cancellable</span>: <span class="hljs-literal">true</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createMenu</span>(<span class="hljs-params">menuConfig</span>) </span>&#123;<br>  ...<br>&#125;<br><br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h3 id="函数功能的单一性"><a href="#函数功能的单一性" class="headerlink" title="#函数功能的单一性"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E5%87%BD%E6%95%B0%E5%8A%9F%E8%83%BD%E7%9A%84%E5%8D%95%E4%B8%80%E6%80%A7">#</a>函数功能的单一性</h3><p>这是软件功能中最重要的原则之一。</p>
<p>功能不单一的函数将导致难以重构、测试和理解。功能单一的函数易于重构，并使代码更加干净。</p>
<p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">emailClients</span>(<span class="hljs-params">clients</span>) </span>&#123;<br>  clients.forEach(<span class="hljs-function"><span class="hljs-params">client</span> =&gt;</span> &#123;<br>    <span class="hljs-keyword">let</span> clientRecord = database.lookup(client);<br>    <span class="hljs-keyword">if</span> (clientRecord.isActive()) &#123;<br>      email(client);<br>    &#125;<br>  &#125;);<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">emailClients</span>(<span class="hljs-params">clients</span>) </span>&#123;<br>  clients.forEach(<span class="hljs-function"><span class="hljs-params">client</span> =&gt;</span> &#123;<br>    emailClientIfNeeded(client);<br>  &#125;);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">emailClientIfNeeded</span>(<span class="hljs-params">client</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (isClientActive(client)) &#123;<br>    email(client);<br>  &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isClientActive</span>(<span class="hljs-params">client</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> clientRecord = database.lookup(client);<br>  <span class="hljs-keyword">return</span> clientRecord.isActive();<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h3 id="函数名应明确表明其功能"><a href="#函数名应明确表明其功能" class="headerlink" title="#函数名应明确表明其功能"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E5%87%BD%E6%95%B0%E5%90%8D%E5%BA%94%E6%98%8E%E7%A1%AE%E8%A1%A8%E6%98%8E%E5%85%B6%E5%8A%9F%E8%83%BD">#</a>函数名应明确表明其功能</h3><p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dateAdd</span>(<span class="hljs-params">date, month</span>) </span>&#123;<br>  <span class="hljs-comment">// ...</span><br>&#125;<br><br><span class="hljs-keyword">let</span> date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();<br><br><span class="hljs-comment">// 很难理解dateAdd(date, 1)是什么意思</span><br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dateAddMonth</span>(<span class="hljs-params">date, month</span>) </span>&#123;<br>  <span class="hljs-comment">// ...</span><br>&#125;<br><br><span class="hljs-keyword">let</span> date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();<br>dateAddMonth(date, <span class="hljs-number">1</span>);<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h3 id="函数应该只做一层抽象"><a href="#函数应该只做一层抽象" class="headerlink" title="#函数应该只做一层抽象"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E5%87%BD%E6%95%B0%E5%BA%94%E8%AF%A5%E5%8F%AA%E5%81%9A%E4%B8%80%E5%B1%82%E6%8A%BD%E8%B1%A1">#</a>函数应该只做一层抽象</h3><p>当函数的需要的抽象多于一层时通常意味着函数功能过于复杂，需将其进行分解以提高其可重用性和可测试性。</p>
<p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseBetterJSAlternative</span>(<span class="hljs-params">code</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> REGEXES = [<br>    <span class="hljs-comment">// ...</span><br>  ];<br><br>  <span class="hljs-keyword">let</span> statements = code.split(<span class="hljs-string">&#x27; &#x27;</span>);<br>  <span class="hljs-keyword">let</span> tokens;<br>  REGEXES.forEach(<span class="hljs-function">(<span class="hljs-params">REGEX</span>) =&gt;</span> &#123;<br>    statements.forEach(<span class="hljs-function">(<span class="hljs-params">statement</span>) =&gt;</span> &#123;<br>      <span class="hljs-comment">// ...</span><br>    &#125;)<br>  &#125;);<br><br>  <span class="hljs-keyword">let</span> ast;<br>  tokens.forEach(<span class="hljs-function">(<span class="hljs-params">token</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">// lex...</span><br>  &#125;);<br><br>  ast.forEach(<span class="hljs-function">(<span class="hljs-params">node</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">// parse...</span><br>  &#125;)<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">tokenize</span>(<span class="hljs-params">code</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> REGEXES = [<br>    <span class="hljs-comment">// ...</span><br>  ];<br><br>  <span class="hljs-keyword">let</span> statements = code.split(<span class="hljs-string">&#x27; &#x27;</span>);<br>  <span class="hljs-keyword">let</span> tokens;<br>  REGEXES.forEach(<span class="hljs-function">(<span class="hljs-params">REGEX</span>) =&gt;</span> &#123;<br>    statements.forEach(<span class="hljs-function">(<span class="hljs-params">statement</span>) =&gt;</span> &#123;<br>      <span class="hljs-comment">// ...</span><br>    &#125;)<br>  &#125;);<br><br>  <span class="hljs-keyword">return</span> tokens;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">lexer</span>(<span class="hljs-params">tokens</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> ast;<br>  tokens.forEach(<span class="hljs-function">(<span class="hljs-params">token</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">// lex...</span><br>  &#125;);<br><br>  <span class="hljs-keyword">return</span> ast;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseBetterJSAlternative</span>(<span class="hljs-params">code</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> tokens = tokenize(code);<br>  <span class="hljs-keyword">let</span> ast = lexer(tokens);<br>  ast.forEach(<span class="hljs-function">(<span class="hljs-params">node</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">// parse...</span><br>  &#125;)<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h3 id="移除重复的代码"><a href="#移除重复的代码" class="headerlink" title="#移除重复的代码"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%A7%BB%E9%99%A4%E9%87%8D%E5%A4%8D%E7%9A%84%E4%BB%A3%E7%A0%81">#</a>移除重复的代码</h3><p>永远、永远、永远不要在任何循环下有重复的代码。</p>
<p>这种做法毫无意义且潜在危险极大。重复的代码意味着逻辑变化时需要对不止一处进行修改。JS 弱类型的特点使得函数拥有更强的普适性。好好利用这一优点吧。</p>
<p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showDeveloperList</span>(<span class="hljs-params">developers</span>) </span>&#123;<br>  developers.forEach(<span class="hljs-function"><span class="hljs-params">developer</span> =&gt;</span> &#123;<br>    <span class="hljs-keyword">var</span> expectedSalary = developer.calculateExpectedSalary();<br>    <span class="hljs-keyword">var</span> experience = developer.getExperience();<br>    <span class="hljs-keyword">var</span> githubLink = developer.getGithubLink();<br>    <span class="hljs-keyword">var</span> data = &#123;<br>      <span class="hljs-attr">expectedSalary</span>: expectedSalary,<br>      <span class="hljs-attr">experience</span>: experience,<br>      <span class="hljs-attr">githubLink</span>: githubLink<br>    &#125;;<br><br>    render(data);<br>  &#125;);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showManagerList</span>(<span class="hljs-params">managers</span>) </span>&#123;<br>  managers.forEach(<span class="hljs-function"><span class="hljs-params">manager</span> =&gt;</span> &#123;<br>    <span class="hljs-keyword">var</span> expectedSalary = manager.calculateExpectedSalary();<br>    <span class="hljs-keyword">var</span> experience = manager.getExperience();<br>    <span class="hljs-keyword">var</span> portfolio = manager.getMBAProjects();<br>    <span class="hljs-keyword">var</span> data = &#123;<br>      <span class="hljs-attr">expectedSalary</span>: expectedSalary,<br>      <span class="hljs-attr">experience</span>: experience,<br>      <span class="hljs-attr">portfolio</span>: portfolio<br>    &#125;;<br><br>    render(data);<br>  &#125;);<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showList</span>(<span class="hljs-params">employees</span>) </span>&#123;<br>  employees.forEach(<span class="hljs-function"><span class="hljs-params">employee</span> =&gt;</span> &#123;<br>    <span class="hljs-keyword">var</span> expectedSalary = employee.calculateExpectedSalary();<br>    <span class="hljs-keyword">var</span> experience = employee.getExperience();<br>    <span class="hljs-keyword">var</span> portfolio;<br><br>    <span class="hljs-keyword">if</span> (employee.type === <span class="hljs-string">&#x27;manager&#x27;</span>) &#123;<br>      portfolio = employee.getMBAProjects();<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      portfolio = employee.getGithubLink();<br>    &#125;<br><br>    <span class="hljs-keyword">var</span> data = &#123;<br>      <span class="hljs-attr">expectedSalary</span>: expectedSalary,<br>      <span class="hljs-attr">experience</span>: experience,<br>      <span class="hljs-attr">portfolio</span>: portfolio<br>    &#125;;<br><br>    render(data);<br>  &#125;);<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h3 id="采用默认参数精简代码"><a href="#采用默认参数精简代码" class="headerlink" title="#采用默认参数精简代码"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E9%87%87%E7%94%A8%E9%BB%98%E8%AE%A4%E5%8F%82%E6%95%B0%E7%B2%BE%E7%AE%80%E4%BB%A3%E7%A0%81">#</a>采用默认参数精简代码</h3><p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">writeForumComment</span>(<span class="hljs-params">subject, body</span>) </span>&#123;<br>  subject = subject || <span class="hljs-string">&#x27;No Subject&#x27;</span>;<br>  body = body || <span class="hljs-string">&#x27;No text&#x27;</span>;<br>&#125;<br><br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">writeForumComment</span>(<span class="hljs-params">subject = <span class="hljs-string">&#x27;No subject&#x27;</span>, body = <span class="hljs-string">&#x27;No text&#x27;</span></span>) </span>&#123;<br>  ...<br>&#125;<br><br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h3 id="使用-Object-assign-设置默认对象"><a href="#使用-Object-assign-设置默认对象" class="headerlink" title="#使用 Object.assign 设置默认对象"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E4%BD%BF%E7%94%A8-object-assign-%E8%AE%BE%E7%BD%AE%E9%BB%98%E8%AE%A4%E5%AF%B9%E8%B1%A1">#</a>使用 Object.assign 设置默认对象</h3><p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> menuConfig = &#123;<br>  <span class="hljs-attr">title</span>: <span class="hljs-literal">null</span>,<br>  <span class="hljs-attr">body</span>: <span class="hljs-string">&#x27;Bar&#x27;</span>,<br>  <span class="hljs-attr">buttonText</span>: <span class="hljs-literal">null</span>,<br>  <span class="hljs-attr">cancellable</span>: <span class="hljs-literal">true</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createMenu</span>(<span class="hljs-params">config</span>) </span>&#123;<br>  config.title = config.title || <span class="hljs-string">&#x27;Foo&#x27;</span><br>  config.body = config.body || <span class="hljs-string">&#x27;Bar&#x27;</span><br>  config.buttonText = config.buttonText || <span class="hljs-string">&#x27;Baz&#x27;</span><br>  config.cancellable = config.cancellable === <span class="hljs-literal">undefined</span> ? config.cancellable : <span class="hljs-literal">true</span>;<br><br>&#125;<br><br>createMenu(menuConfig);<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> menuConfig = &#123;<br>  <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;Order&#x27;</span>,<br>  <span class="hljs-comment">// User did not include &#x27;body&#x27; key</span><br>  <span class="hljs-attr">buttonText</span>: <span class="hljs-string">&#x27;Send&#x27;</span>,<br>  <span class="hljs-attr">cancellable</span>: <span class="hljs-literal">true</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createMenu</span>(<span class="hljs-params">config</span>) </span>&#123;<br>  config = <span class="hljs-built_in">Object</span>.assign(&#123;<br>    <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;Foo&#x27;</span>,<br>    <span class="hljs-attr">body</span>: <span class="hljs-string">&#x27;Bar&#x27;</span>,<br>    <span class="hljs-attr">buttonText</span>: <span class="hljs-string">&#x27;Baz&#x27;</span>,<br>    <span class="hljs-attr">cancellable</span>: <span class="hljs-literal">true</span><br>  &#125;, config);<br><br>  <span class="hljs-comment">// config now equals: &#123;title: &quot;Order&quot;, body: &quot;Bar&quot;, buttonText: &quot;Send&quot;, cancellable: true&#125;</span><br>  <span class="hljs-comment">// ...</span><br>&#125;<br><br>createMenu(menuConfig);<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h3 id="不要使用标记-Flag-作为函数参数"><a href="#不要使用标记-Flag-作为函数参数" class="headerlink" title="#不要使用标记(Flag)作为函数参数"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E4%B8%8D%E8%A6%81%E4%BD%BF%E7%94%A8%E6%A0%87%E8%AE%B0-flag-%E4%BD%9C%E4%B8%BA%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0">#</a>不要使用标记(Flag)作为函数参数</h3><p>这通常意味着函数的功能的单一性已经被破坏。此时应考虑对函数进行再次划分。</p>
<p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createFile</span>(<span class="hljs-params">name, temp</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (temp) &#123;<br>    fs.create(<span class="hljs-string">&#x27;./temp/&#x27;</span> + name);<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    fs.create(name);<br>  &#125;<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createTempFile</span>(<span class="hljs-params">name</span>) </span>&#123;<br>  fs.create(<span class="hljs-string">&#x27;./temp/&#x27;</span> + name);<br>&#125;<br><br>----------<br><br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createFile</span>(<span class="hljs-params">name</span>) </span>&#123;<br>  fs.create(name);<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h3 id="避免副作用"><a href="#避免副作用" class="headerlink" title="#避免副作用"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E9%81%BF%E5%85%8D%E5%89%AF%E4%BD%9C%E7%94%A8">#</a>避免副作用</h3><p>当函数产生了除了“接受一个值并返回一个结果”之外的行为时，称该函数产生了副作用。比如写文件、修改全局变量或将你的钱全转给了一个陌生人等。</p>
<p>程序在某些情况下确实需要副作用这一行为，如先前例子中的写文件。这时应该将这些功能集中在一起，不要用多个函数/类修改某个文件。用且只用一个 service 完成这一需求。</p>
<p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// Global variable referenced by following function.</span><br><span class="hljs-comment">// If we had another function that used this name, now it&#x27;d be an array and it could break it.</span><br><span class="hljs-keyword">var</span> name = <span class="hljs-string">&#x27;Ryan McDermott&#x27;</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">splitIntoFirstAndLastName</span>(<span class="hljs-params"></span>) </span>&#123;<br>  name = name.split(<span class="hljs-string">&#x27; &#x27;</span>);<br>&#125;<br><br>splitIntoFirstAndLastName();<br><br><span class="hljs-built_in">console</span>.log(name); <span class="hljs-comment">// [&#x27;Ryan&#x27;, &#x27;McDermott&#x27;];</span><br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">splitIntoFirstAndLastName</span>(<span class="hljs-params">name</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> name.split(<span class="hljs-string">&#x27; &#x27;</span>);<br>&#125;<br><br><span class="hljs-keyword">var</span> name = <span class="hljs-string">&#x27;Ryan McDermott&#x27;</span><br><span class="hljs-keyword">var</span> newName = splitIntoFirstAndLastName(name);<br><br><span class="hljs-built_in">console</span>.log(name); <span class="hljs-comment">// &#x27;Ryan McDermott&#x27;;</span><br><span class="hljs-built_in">console</span>.log(newName); <span class="hljs-comment">// [&#x27;Ryan&#x27;, &#x27;McDermott&#x27;];</span><br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h3 id="不要写全局函数"><a href="#不要写全局函数" class="headerlink" title="#不要写全局函数"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E4%B8%8D%E8%A6%81%E5%86%99%E5%85%A8%E5%B1%80%E5%87%BD%E6%95%B0">#</a>不要写全局函数</h3><p>在 JS 中污染全局是一个非常不好的实践，这么做可能和其他库起冲突，且调用你的 API 的用户在实际环境中得到一个 exception 前对这一情况是一无所知的。</p>
<p>想象以下例子：如果你想扩展 JS 中的 Array，为其添加一个 <code>diff</code> 函数显示两个数组间的差异，此时应如何去做？你可以将 diff 写入 <code>Array.prototype</code>，但这么做会和其他有类似需求的库造成冲突。如果另一个库对 diff 的需求为比较一个数组中首尾元素间的差异呢？</p>
<p>使用 ES6 中的 class 对全局的 Array 做简单的扩展显然是一个更棒的选择。</p>
<p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-built_in">Array</span>.prototype.diff = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">comparisonArray</span>) </span>&#123;<br>  <span class="hljs-keyword">var</span> values = [];<br>  <span class="hljs-keyword">var</span> hash = &#123;&#125;;<br><br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i <span class="hljs-keyword">of</span> comparisonArray) &#123;<br>    hash[i] = <span class="hljs-literal">true</span>;<br>  &#125;<br><br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i <span class="hljs-keyword">of</span> <span class="hljs-built_in">this</span>) &#123;<br>    <span class="hljs-keyword">if</span> (!hash[i]) &#123;<br>      values.push(i);<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-keyword">return</span> values;<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SuperArray</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Array</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">...args</span>)</span> &#123;<br>    <span class="hljs-built_in">super</span>(...args);<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">diff</span>(<span class="hljs-params">comparisonArray</span>)</span> &#123;<br>    <span class="hljs-keyword">var</span> values = [];<br>    <span class="hljs-keyword">var</span> hash = &#123;&#125;;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i <span class="hljs-keyword">of</span> comparisonArray) &#123;<br>      hash[i] = <span class="hljs-literal">true</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i <span class="hljs-keyword">of</span> <span class="hljs-built_in">this</span>) &#123;<br>      <span class="hljs-keyword">if</span> (!hash[i]) &#123;<br>        values.push(i);<br>      &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> values;<br>  &#125;<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h3 id="采用函数式编程"><a href="#采用函数式编程" class="headerlink" title="#采用函数式编程"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E9%87%87%E7%94%A8%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B">#</a>采用函数式编程</h3><p>函数式的编程具有更干净且便于测试的特点。尽可能的使用这种风格吧。</p>
<p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> programmerOutput = [<br>  &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Uncle Bobby&#x27;</span>,<br>    <span class="hljs-attr">linesOfCode</span>: <span class="hljs-number">500</span><br>  &#125;, &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Suzie Q&#x27;</span>,<br>    <span class="hljs-attr">linesOfCode</span>: <span class="hljs-number">1500</span><br>  &#125;, &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Jimmy Gosling&#x27;</span>,<br>    <span class="hljs-attr">linesOfCode</span>: <span class="hljs-number">150</span><br>  &#125;, &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Gracie Hopper&#x27;</span>,<br>    <span class="hljs-attr">linesOfCode</span>: <span class="hljs-number">1000</span><br>  &#125;<br>];<br><br><span class="hljs-keyword">var</span> totalOutput = <span class="hljs-number">0</span>;<br><br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; programmerOutput.length; i++) &#123;<br>  totalOutput += programmerOutput[i].linesOfCode;<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> programmerOutput = [<br>  &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Uncle Bobby&#x27;</span>,<br>    <span class="hljs-attr">linesOfCode</span>: <span class="hljs-number">500</span><br>  &#125;, &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Suzie Q&#x27;</span>,<br>    <span class="hljs-attr">linesOfCode</span>: <span class="hljs-number">1500</span><br>  &#125;, &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Jimmy Gosling&#x27;</span>,<br>    <span class="hljs-attr">linesOfCode</span>: <span class="hljs-number">150</span><br>  &#125;, &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Gracie Hopper&#x27;</span>,<br>    <span class="hljs-attr">linesOfCode</span>: <span class="hljs-number">1000</span><br>  &#125;<br>];<br><br><span class="hljs-keyword">var</span> totalOutput = programmerOutput<br>  .map(<span class="hljs-function">(<span class="hljs-params">programmer</span>) =&gt;</span> programmer.linesOfCode)<br>  .reduce(<span class="hljs-function">(<span class="hljs-params">acc, linesOfCode</span>) =&gt;</span> acc + linesOfCode, <span class="hljs-number">0</span>);<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h3 id="封装判断条件"><a href="#封装判断条件" class="headerlink" title="#封装判断条件"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E5%B0%81%E8%A3%85%E5%88%A4%E6%96%AD%E6%9D%A1%E4%BB%B6">#</a>封装判断条件</h3><p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">if</span> (fsm.state === <span class="hljs-string">&#x27;fetching&#x27;</span> &amp;&amp; isEmpty(listNode)) &#123;<br>  <span class="hljs-comment">/// ...</span><br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">shouldShowSpinner</span>(<span class="hljs-params">fsm, listNode</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> fsm.state === <span class="hljs-string">&#x27;fetching&#x27;</span> &amp;&amp; isEmpty(listNode);<br>&#125;<br><br><span class="hljs-keyword">if</span> (shouldShowSpinner(fsmInstance, listNodeInstance)) &#123;<br>  <span class="hljs-comment">// ...</span><br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h3 id="避免“否定情况”的判断"><a href="#避免“否定情况”的判断" class="headerlink" title="#避免“否定情况”的判断"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E9%81%BF%E5%85%8D-%E5%90%A6%E5%AE%9A%E6%83%85%E5%86%B5-%E7%9A%84%E5%88%A4%E6%96%AD">#</a>避免“否定情况”的判断</h3><p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isDOMNodeNotPresent</span>(<span class="hljs-params">node</span>) </span>&#123;<br>  <span class="hljs-comment">// ...</span><br>&#125;<br><br><span class="hljs-keyword">if</span> (!isDOMNodeNotPresent(node)) &#123;<br>  <span class="hljs-comment">// ...</span><br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isDOMNodePresent</span>(<span class="hljs-params">node</span>) </span>&#123;<br>  <span class="hljs-comment">// ...</span><br>&#125;<br><br><span class="hljs-keyword">if</span> (isDOMNodePresent(node)) &#123;<br>  <span class="hljs-comment">// ...</span><br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h3 id="避免条件判断"><a href="#避免条件判断" class="headerlink" title="#避免条件判断"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E9%81%BF%E5%85%8D%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD">#</a>避免条件判断</h3><p>这看起来似乎不太可能。</p>
<p>大多人听到这的第一反应是：“怎么可能不用 if 完成其他功能呢？”许多情况下通过使用多态(polymorphism)可以达到同样的目的。</p>
<p>第二个问题在于采用这种方式的原因是什么。答案是我们之前提到过的：保持函数功能的单一性。</p>
<p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Airplane</span> </span>&#123;<br>  <span class="hljs-comment">//...</span><br>  <span class="hljs-function"><span class="hljs-title">getCruisingAltitude</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-keyword">switch</span> (<span class="hljs-built_in">this</span>.type) &#123;<br>      <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;777&#x27;</span>:<br>        <span class="hljs-keyword">return</span> getMaxAltitude() - getPassengerCount();<br>      <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;Air Force One&#x27;</span>:<br>        <span class="hljs-keyword">return</span> getMaxAltitude();<br>      <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;Cessna&#x27;</span>:<br>        <span class="hljs-keyword">return</span> getMaxAltitude() - getFuelExpenditure();<br>    &#125;<br>  &#125;<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Airplane</span> </span>&#123;<br>  <span class="hljs-comment">//...</span><br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Boeing777</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Airplane</span> </span>&#123;<br>  <span class="hljs-comment">//...</span><br>  <span class="hljs-function"><span class="hljs-title">getCruisingAltitude</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-keyword">return</span> getMaxAltitude() - getPassengerCount();<br>  &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AirForceOne</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Airplane</span> </span>&#123;<br>  <span class="hljs-comment">//...</span><br>  <span class="hljs-function"><span class="hljs-title">getCruisingAltitude</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-keyword">return</span> getMaxAltitude();<br>  &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Cessna</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Airplane</span> </span>&#123;<br>  <span class="hljs-comment">//...</span><br>  <span class="hljs-function"><span class="hljs-title">getCruisingAltitude</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-keyword">return</span> getMaxAltitude() - getFuelExpenditure();<br>  &#125;<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h3 id="避免类型判断-part-1"><a href="#避免类型判断-part-1" class="headerlink" title="#避免类型判断(part 1)"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E9%81%BF%E5%85%8D%E7%B1%BB%E5%9E%8B%E5%88%A4%E6%96%AD-part-1">#</a>避免类型判断(part 1)</h3><p>JS 是弱类型语言，这意味着函数可接受任意类型的参数。</p>
<p>有时这会对你带来麻烦，你会对参数做一些类型判断。有许多方法可以避免这些情况。</p>
<p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">travelToTexas</span>(<span class="hljs-params">vehicle</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (vehicle <span class="hljs-keyword">instanceof</span> Bicycle) &#123;<br>    vehicle.peddle(<span class="hljs-built_in">this</span>.currentLocation, <span class="hljs-keyword">new</span> Location(<span class="hljs-string">&#x27;texas&#x27;</span>));<br>  &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (vehicle <span class="hljs-keyword">instanceof</span> Car) &#123;<br>    vehicle.drive(<span class="hljs-built_in">this</span>.currentLocation, <span class="hljs-keyword">new</span> Location(<span class="hljs-string">&#x27;texas&#x27;</span>));<br>  &#125;<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">travelToTexas</span>(<span class="hljs-params">vehicle</span>) </span>&#123;<br>  vehicle.move(<span class="hljs-built_in">this</span>.currentLocation, <span class="hljs-keyword">new</span> Location(<span class="hljs-string">&#x27;texas&#x27;</span>));<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h3 id="避免类型判断-part-2"><a href="#避免类型判断-part-2" class="headerlink" title="#避免类型判断(part 2)"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E9%81%BF%E5%85%8D%E7%B1%BB%E5%9E%8B%E5%88%A4%E6%96%AD-part-2">#</a>避免类型判断(part 2)</h3><p>如果需处理的数据为字符串，整型，数组等类型，无法使用多态并仍有必要对其进行类型检测时，可以考虑使用 TypeScript。</p>
<p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">combine</span>(<span class="hljs-params">val1, val2</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> val1 == <span class="hljs-string">&quot;number&quot;</span> &amp;&amp; <span class="hljs-keyword">typeof</span> val2 == <span class="hljs-string">&quot;number&quot;</span> ||<br>      <span class="hljs-keyword">typeof</span> val1 == <span class="hljs-string">&quot;string&quot;</span> &amp;&amp; <span class="hljs-keyword">typeof</span> val2 == <span class="hljs-string">&quot;string&quot;</span>) &#123;<br>    <span class="hljs-keyword">return</span> val1 + val2;<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;Must be of type String or Number&#x27;</span>);<br>  &#125;<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">combine</span>(<span class="hljs-params">val1, val2</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> val1 + val2;<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h3 id="避免过度优化"><a href="#避免过度优化" class="headerlink" title="#避免过度优化"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E9%81%BF%E5%85%8D%E8%BF%87%E5%BA%A6%E4%BC%98%E5%8C%96">#</a>避免过度优化</h3><p>现代的浏览器在运行时会对代码自动进行优化。有时人为对代码进行优化可能是在浪费时间。</p>
<p><a target="_blank" rel="noopener" href="https://github.com/petkaantonov/bluebird/wiki/Optimization-killers">这里可以找到许多真正需要优化的地方(opens new window)</a></p>
<p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 这里使用变量len是因为在老式浏览器中，</span><br><span class="hljs-comment">// 直接使用正例中的方式会导致每次循环均重复计算list.length的值，</span><br><span class="hljs-comment">// 而在现代浏览器中会自动完成优化，这一行为是没有必要的</span><br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, len = list.length; i &lt; len; i++) &#123;<br>  <span class="hljs-comment">// ...</span><br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; list.length; i++) &#123;<br>  <span class="hljs-comment">// ...</span><br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h3 id="删除无效的代码"><a href="#删除无效的代码" class="headerlink" title="#删除无效的代码"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E5%88%A0%E9%99%A4%E6%97%A0%E6%95%88%E7%9A%84%E4%BB%A3%E7%A0%81">#</a>删除无效的代码</h3><p>不再被调用的代码应及时删除。</p>
<p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">oldRequestModule</span>(<span class="hljs-params">url</span>) </span>&#123;<br>  <span class="hljs-comment">// ...</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">newRequestModule</span>(<span class="hljs-params">url</span>) </span>&#123;<br>  <span class="hljs-comment">// ...</span><br>&#125;<br><br><span class="hljs-keyword">var</span> req = newRequestModule;<br>inventoryTracker(<span class="hljs-string">&#x27;apples&#x27;</span>, req, <span class="hljs-string">&#x27;www.inventory-awesome.io&#x27;</span>);<br><br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">newRequestModule</span>(<span class="hljs-params">url</span>) </span>&#123;<br>  <span class="hljs-comment">// ...</span><br>&#125;<br><br><span class="hljs-keyword">var</span> req = newRequestModule;<br>inventoryTracker(<span class="hljs-string">&#x27;apples&#x27;</span>, req, <span class="hljs-string">&#x27;www.inventory-awesome.io&#x27;</span>);<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h2 id="5-对象和数据结构"><a href="#5-对象和数据结构" class="headerlink" title="5.#对象和数据结构"></a>5.<a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E5%AF%B9%E8%B1%A1%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84">#</a><strong>对象和数据结构</strong></h2><h3 id="使用-getters-和-setters"><a href="#使用-getters-和-setters" class="headerlink" title="#使用 getters 和 setters"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E4%BD%BF%E7%94%A8-getters-%E5%92%8C-setters">#</a>使用 getters 和 setters</h3><p>JS 没有接口或类型，因此实现这一模式是很困难的，因为我们并没有类似 <code>public</code> 和 <code>private</code> 的关键词。</p>
<p>然而，使用 getters 和 setters 获取对象的数据远比直接使用点操作符具有优势。为什么呢？</p>
<ol>
<li>当需要对获取的对象属性执行额外操作时。</li>
<li>执行 <code>set</code> 时可以增加规则对要变量的合法性进行判断。</li>
<li>封装了内部逻辑。</li>
<li>在存取时可以方便的增加日志和错误处理。</li>
<li>继承该类时可以重载默认行为。</li>
<li>从服务器获取数据时可以进行懒加载。</li>
</ol>
<p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BankAccount</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"></span>)</span> &#123;<br>	   <span class="hljs-built_in">this</span>.balance = <span class="hljs-number">1000</span>;<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">let</span> bankAccount = <span class="hljs-keyword">new</span> BankAccount();<br><br><span class="hljs-comment">// Buy shoes...</span><br>bankAccount.balance = bankAccount.balance - <span class="hljs-number">100</span>;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BankAccount</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"></span>)</span> &#123;<br>	   <span class="hljs-built_in">this</span>.balance = <span class="hljs-number">1000</span>;<br>  &#125;<br><br>  <span class="hljs-comment">// It doesn&#x27;t have to be prefixed with `get` or `set` to be a getter/setter</span><br>  <span class="hljs-function"><span class="hljs-title">withdraw</span>(<span class="hljs-params">amount</span>)</span> &#123;<br>  	<span class="hljs-keyword">if</span> (verifyAmountCanBeDeducted(amount)) &#123;<br>  	  <span class="hljs-built_in">this</span>.balance -= amount;<br>  	&#125;<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">let</span> bankAccount = <span class="hljs-keyword">new</span> BankAccount();<br><br><span class="hljs-comment">// Buy shoes...</span><br>bankAccount.withdraw(<span class="hljs-number">100</span>);<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h3 id="让对象拥有私有成员"><a href="#让对象拥有私有成员" class="headerlink" title="#让对象拥有私有成员"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E8%AE%A9%E5%AF%B9%E8%B1%A1%E6%8B%A5%E6%9C%89%E7%A7%81%E6%9C%89%E6%88%90%E5%91%98">#</a>让对象拥有私有成员</h3><p>可以通过闭包完成</p>
<p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> Employee = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name</span>) </span>&#123;<br>  <span class="hljs-built_in">this</span>.name = name;<br>&#125;<br><br>Employee.prototype.getName = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.name;<br>&#125;<br><br><span class="hljs-keyword">var</span> employee = <span class="hljs-keyword">new</span> Employee(<span class="hljs-string">&#x27;John Doe&#x27;</span>);<br><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Employee name: &#x27;</span> + employee.getName()); <span class="hljs-comment">// Employee name: John Doe</span><br><span class="hljs-keyword">delete</span> employee.name;<br><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Employee name: &#x27;</span> + employee.getName()); <span class="hljs-comment">// Employee name: undefined</span><br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> Employee = (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Employee</span>(<span class="hljs-params">name</span>) </span>&#123;<br>    <span class="hljs-built_in">this</span>.getName = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>      <span class="hljs-keyword">return</span> name;<br>    &#125;;<br>  &#125;<br><br>  <span class="hljs-keyword">return</span> Employee;<br>&#125;());<br><br><span class="hljs-keyword">var</span> employee = <span class="hljs-keyword">new</span> Employee(<span class="hljs-string">&#x27;John Doe&#x27;</span>);<br><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Employee name: &#x27;</span> + employee.getName()); <span class="hljs-comment">// Employee name: John Doe</span><br><span class="hljs-keyword">delete</span> employee.name;<br><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Employee name: &#x27;</span> + employee.getName()); <span class="hljs-comment">// Employee name: John Doe</span><br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h2 id="6-类"><a href="#6-类" class="headerlink" title="6.#类"></a>6.<a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%B1%BB">#</a><strong>类</strong></h2><h3 id="单一职责原则-SRP"><a href="#单一职责原则-SRP" class="headerlink" title="#单一职责原则 (SRP)"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E5%8D%95%E4%B8%80%E8%81%8C%E8%B4%A3%E5%8E%9F%E5%88%99-srp">#</a>单一职责原则 (SRP)</h3><p>如《代码整洁之道》一书中所述，“修改一个类的理由不应该超过一个”。</p>
<p>将多个功能塞进一个类的想法很诱人，但这将导致你的类无法达到概念上的内聚，并经常不得不进行修改。</p>
<p>最小化对一个类需要修改的次数是非常有必要的。如果一个类具有太多太杂的功能，当你对其中一小部分进行修改时，将很难想象到这一修够对代码库中依赖该类的其他模块会带来什么样的影响。</p>
<p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserSettings</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">user</span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.user = user;<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">changeSettings</span>(<span class="hljs-params">settings</span>)</span> &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.verifyCredentials(user)) &#123;<br>      <span class="hljs-comment">// ...</span><br>    &#125;<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">verifyCredentials</span>(<span class="hljs-params">user</span>)</span> &#123;<br>    <span class="hljs-comment">// ...</span><br>  &#125;<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserAuth</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">user</span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.user = user;<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">verifyCredentials</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-comment">// ...</span><br>  &#125;<br>&#125;<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserSettings</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">user</span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.user = user;<br>    <span class="hljs-built_in">this</span>.auth = <span class="hljs-keyword">new</span> UserAuth(user)<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">changeSettings</span>(<span class="hljs-params">settings</span>)</span> &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.auth.verifyCredentials()) &#123;<br>      <span class="hljs-comment">// ...</span><br>    &#125;<br>  &#125;<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h3 id="开-闭原则-OCP"><a href="#开-闭原则-OCP" class="headerlink" title="#开/闭原则 (OCP)"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E5%BC%80-%E9%97%AD%E5%8E%9F%E5%88%99-ocp">#</a>开/闭原则 (OCP)</h3><p>“代码实体(类，模块，函数等)应该易于扩展，难于修改。”</p>
<p>这一原则指的是我们应允许用户方便的扩展我们代码模块的功能，而不需要打开 js 文件源码手动对其进行修改。</p>
<p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AjaxRequester</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-comment">// What if we wanted another HTTP Method, like DELETE? We would have to</span><br>    <span class="hljs-comment">// open this file up and modify this and put it in manually.</span><br>    <span class="hljs-built_in">this</span>.HTTP_METHODS = [<span class="hljs-string">&#x27;POST&#x27;</span>, <span class="hljs-string">&#x27;PUT&#x27;</span>, <span class="hljs-string">&#x27;GET&#x27;</span>];<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">get</span>(<span class="hljs-params">url</span>)</span> &#123;<br>    <span class="hljs-comment">// ...</span><br>  &#125;<br><br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AjaxRequester</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.HTTP_METHODS = [<span class="hljs-string">&#x27;POST&#x27;</span>, <span class="hljs-string">&#x27;PUT&#x27;</span>, <span class="hljs-string">&#x27;GET&#x27;</span>];<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">get</span>(<span class="hljs-params">url</span>)</span> &#123;<br>    <span class="hljs-comment">// ...</span><br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">addHTTPMethod</span>(<span class="hljs-params">method</span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.HTTP_METHODS.push(method);<br>  &#125;<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h3 id="利斯科夫替代原则-LSP"><a href="#利斯科夫替代原则-LSP" class="headerlink" title="#利斯科夫替代原则 (LSP)"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E5%88%A9%E6%96%AF%E7%A7%91%E5%A4%AB%E6%9B%BF%E4%BB%A3%E5%8E%9F%E5%88%99-lsp">#</a>利斯科夫替代原则 (LSP)</h3><p>“子类对象应该能够替换其超类对象被使用”。</p>
<p>也就是说，如果有一个父类和一个子类，当采用子类替换父类时不应该产生错误的结果。</p>
<p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Rectangle</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.width = <span class="hljs-number">0</span>;<br>    <span class="hljs-built_in">this</span>.height = <span class="hljs-number">0</span>;<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">setColor</span>(<span class="hljs-params">color</span>)</span> &#123;<br>    <span class="hljs-comment">// ...</span><br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params">area</span>)</span> &#123;<br>    <span class="hljs-comment">// ...</span><br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">setWidth</span>(<span class="hljs-params">width</span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.width = width;<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">setHeight</span>(<span class="hljs-params">height</span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.height = height;<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">getArea</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.width * <span class="hljs-built_in">this</span>.height;<br>  &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Square</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Rectangle</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-built_in">super</span>();<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">setWidth</span>(<span class="hljs-params">width</span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.width = width;<br>    <span class="hljs-built_in">this</span>.height = width;<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">setHeight</span>(<span class="hljs-params">height</span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.width = height;<br>    <span class="hljs-built_in">this</span>.height = height;<br>  &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">renderLargeRectangles</span>(<span class="hljs-params">rectangles</span>) </span>&#123;<br>  rectangles.forEach(<span class="hljs-function">(<span class="hljs-params">rectangle</span>) =&gt;</span> &#123;<br>    rectangle.setWidth(<span class="hljs-number">4</span>);<br>    rectangle.setHeight(<span class="hljs-number">5</span>);<br>    <span class="hljs-keyword">let</span> area = rectangle.getArea(); <span class="hljs-comment">// BAD: Will return 25 for Square. Should be 20.</span><br>    rectangle.render(area);<br>  &#125;)<br>&#125;<br><br><span class="hljs-keyword">let</span> rectangles = [<span class="hljs-keyword">new</span> Rectangle(), <span class="hljs-keyword">new</span> Rectangle(), <span class="hljs-keyword">new</span> Square()];<br>renderLargeRectangles(rectangles);<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Shape</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"></span>)</span> &#123;&#125;<br><br>  <span class="hljs-function"><span class="hljs-title">setColor</span>(<span class="hljs-params">color</span>)</span> &#123;<br>    <span class="hljs-comment">// ...</span><br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params">area</span>)</span> &#123;<br>    <span class="hljs-comment">// ...</span><br>  &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Rectangle</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Shape</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-built_in">super</span>();<br>    <span class="hljs-built_in">this</span>.width = <span class="hljs-number">0</span>;<br>    <span class="hljs-built_in">this</span>.height = <span class="hljs-number">0</span>;<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">setWidth</span>(<span class="hljs-params">width</span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.width = width;<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">setHeight</span>(<span class="hljs-params">height</span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.height = height;<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">getArea</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.width * <span class="hljs-built_in">this</span>.height;<br>  &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Square</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Shape</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-built_in">super</span>();<br>    <span class="hljs-built_in">this</span>.length = <span class="hljs-number">0</span>;<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">setLength</span>(<span class="hljs-params">length</span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.length = length;<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">getArea</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.length * <span class="hljs-built_in">this</span>.length;<br>  &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">renderLargeShapes</span>(<span class="hljs-params">shapes</span>) </span>&#123;<br>  shapes.forEach(<span class="hljs-function">(<span class="hljs-params">shape</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">switch</span> (shape.constructor.name) &#123;<br>      <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;Square&#x27;</span>:<br>        shape.setLength(<span class="hljs-number">5</span>);<br>      <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;Rectangle&#x27;</span>:<br>        shape.setWidth(<span class="hljs-number">4</span>);<br>        shape.setHeight(<span class="hljs-number">5</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">let</span> area = shape.getArea();<br>    shape.render(area);<br>  &#125;)<br>&#125;<br><br><span class="hljs-keyword">let</span> shapes = [<span class="hljs-keyword">new</span> Rectangle(), <span class="hljs-keyword">new</span> Rectangle(), <span class="hljs-keyword">new</span> Square()];<br>renderLargeShapes(shapes);<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h3 id="接口隔离原则-ISP"><a href="#接口隔离原则-ISP" class="headerlink" title="#接口隔离原则 (ISP)"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E6%8E%A5%E5%8F%A3%E9%9A%94%E7%A6%BB%E5%8E%9F%E5%88%99-isp">#</a>接口隔离原则 (ISP)</h3><p>“客户端不应该依赖它不需要的接口；一个类对另一个类的依赖应该建立在最小的接口上。”</p>
<p>在 JS 中，当一个类需要许多参数设置才能生成一个对象时，或许大多时候不需要设置这么多的参数。此时减少对配置参数数量的需求是有益的。</p>
<p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DOMTraverser</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">settings</span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.settings = settings;<br>    <span class="hljs-built_in">this</span>.setup();<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">setup</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.rootNode = <span class="hljs-built_in">this</span>.settings.rootNode;<br>    <span class="hljs-built_in">this</span>.animationModule.setup();<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">traverse</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-comment">// ...</span><br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">let</span> $ = <span class="hljs-keyword">new</span> DOMTraverser(&#123;<br>  <span class="hljs-attr">rootNode</span>: <span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">&#x27;body&#x27;</span>),<br>  <span class="hljs-attr">animationModule</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;&#125; <span class="hljs-comment">// Most of the time, we won&#x27;t need to animate when traversing.</span><br>  <span class="hljs-comment">// ...</span><br>&#125;);<br><br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DOMTraverser</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">settings</span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.settings = settings;<br>    <span class="hljs-built_in">this</span>.options = settings.options;<br>    <span class="hljs-built_in">this</span>.setup();<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">setup</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.rootNode = <span class="hljs-built_in">this</span>.settings.rootNode;<br>    <span class="hljs-built_in">this</span>.setupOptions();<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">setupOptions</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.options.animationModule) &#123;<br>      <span class="hljs-comment">// ...</span><br>    &#125;<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">traverse</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-comment">// ...</span><br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">let</span> $ = <span class="hljs-keyword">new</span> DOMTraverser(&#123;<br>  <span class="hljs-attr">rootNode</span>: <span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">&#x27;body&#x27;</span>),<br>  <span class="hljs-attr">options</span>: &#123;<br>    <span class="hljs-attr">animationModule</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;&#125;<br>  &#125;<br>&#125;);<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h3 id="依赖反转原则-DIP"><a href="#依赖反转原则-DIP" class="headerlink" title="#依赖反转原则 (DIP)"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E4%BE%9D%E8%B5%96%E5%8F%8D%E8%BD%AC%E5%8E%9F%E5%88%99-dip">#</a>依赖反转原则 (DIP)</h3><p>该原则有两个核心点：</p>
<ol>
<li>高层模块不应该依赖于低层模块。他们都应该依赖于抽象接口。</li>
<li>抽象接口应该脱离具体实现，具体实现应该依赖于抽象接口。</li>
</ol>
<p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InventoryTracker</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">items</span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.items = items;<br><br>    <span class="hljs-comment">// BAD: We have created a dependency on a specific request implementation.</span><br>    <span class="hljs-comment">// We should just have requestItems depend on a request method: `request`</span><br>    <span class="hljs-built_in">this</span>.requester = <span class="hljs-keyword">new</span> InventoryRequester();<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">requestItems</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.items.forEach(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> &#123;<br>      <span class="hljs-built_in">this</span>.requester.requestItem(item);<br>    &#125;);<br>  &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InventoryRequester</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.REQ_METHODS = [<span class="hljs-string">&#x27;HTTP&#x27;</span>];<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">requestItem</span>(<span class="hljs-params">item</span>)</span> &#123;<br>    <span class="hljs-comment">// ...</span><br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">let</span> inventoryTracker = <span class="hljs-keyword">new</span> InventoryTracker([<span class="hljs-string">&#x27;apples&#x27;</span>, <span class="hljs-string">&#x27;bananas&#x27;</span>]);<br>inventoryTracker.requestItems();<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InventoryTracker</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">items, requester</span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.items = items;<br>    <span class="hljs-built_in">this</span>.requester = requester;<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">requestItems</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.items.forEach(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> &#123;<br>      <span class="hljs-built_in">this</span>.requester.requestItem(item);<br>    &#125;);<br>  &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InventoryRequesterV1</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.REQ_METHODS = [<span class="hljs-string">&#x27;HTTP&#x27;</span>];<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">requestItem</span>(<span class="hljs-params">item</span>)</span> &#123;<br>    <span class="hljs-comment">// ...</span><br>  &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InventoryRequesterV2</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.REQ_METHODS = [<span class="hljs-string">&#x27;WS&#x27;</span>];<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">requestItem</span>(<span class="hljs-params">item</span>)</span> &#123;<br>    <span class="hljs-comment">// ...</span><br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// By constructing our dependencies externally and injecting them, we can easily</span><br><span class="hljs-comment">// substitute our request module for a fancy new one that uses WebSockets.</span><br><span class="hljs-keyword">let</span> inventoryTracker = <span class="hljs-keyword">new</span> InventoryTracker([<span class="hljs-string">&#x27;apples&#x27;</span>, <span class="hljs-string">&#x27;bananas&#x27;</span>], <span class="hljs-keyword">new</span> InventoryRequesterV2());<br>inventoryTracker.requestItems();<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h3 id="使用-ES6-的-classes-而不是-ES5-的-Function"><a href="#使用-ES6-的-classes-而不是-ES5-的-Function" class="headerlink" title="#使用 ES6 的 classes 而不是 ES5 的 Function"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E4%BD%BF%E7%94%A8-es6-%E7%9A%84-classes-%E8%80%8C%E4%B8%8D%E6%98%AF-es5-%E7%9A%84-function">#</a>使用 ES6 的 classes 而不是 ES5 的 Function</h3><p>典型的 ES5 的类(function)在继承、构造和方法定义方面可读性较差。</p>
<p>当需要继承时，优先选用 classes。</p>
<p>但是，当在需要更大更复杂的对象时，最好优先选择更小的 function 而非 classes。</p>
<p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> Animal = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">age</span>) </span>&#123;<br>    <span class="hljs-keyword">if</span> (!(<span class="hljs-built_in">this</span> <span class="hljs-keyword">instanceof</span> Animal)) &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&quot;Instantiate Animal with `new`&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-built_in">this</span>.age = age;<br>&#125;;<br><br>Animal.prototype.move = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;&#125;;<br><br><span class="hljs-keyword">var</span> Mammal = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">age, furColor</span>) </span>&#123;<br>    <span class="hljs-keyword">if</span> (!(<span class="hljs-built_in">this</span> <span class="hljs-keyword">instanceof</span> Mammal)) &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&quot;Instantiate Mammal with `new`&quot;</span>);<br>    &#125;<br><br>    Animal.call(<span class="hljs-built_in">this</span>, age);<br>    <span class="hljs-built_in">this</span>.furColor = furColor;<br>&#125;;<br><br>Mammal.prototype = <span class="hljs-built_in">Object</span>.create(Animal.prototype);<br>Mammal.prototype.constructor = Mammal;<br>Mammal.prototype.liveBirth = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;&#125;;<br><br><span class="hljs-keyword">var</span> Human = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">age, furColor, languageSpoken</span>) </span>&#123;<br>    <span class="hljs-keyword">if</span> (!(<span class="hljs-built_in">this</span> <span class="hljs-keyword">instanceof</span> Human)) &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&quot;Instantiate Human with `new`&quot;</span>);<br>    &#125;<br><br>    Mammal.call(<span class="hljs-built_in">this</span>, age, furColor);<br>    <span class="hljs-built_in">this</span>.languageSpoken = languageSpoken;<br>&#125;;<br><br>Human.prototype = <span class="hljs-built_in">Object</span>.create(Mammal.prototype);<br>Human.prototype.constructor = Human;<br>Human.prototype.speak = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;&#125;;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Animal</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">age</span>)</span> &#123;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-title">move</span>(<span class="hljs-params"></span>)</span> &#123;&#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Mammal</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Animal</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">age, furColor</span>)</span> &#123;<br>        <span class="hljs-built_in">super</span>(age);<br>        <span class="hljs-built_in">this</span>.furColor = furColor;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-title">liveBirth</span>(<span class="hljs-params"></span>)</span> &#123;&#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Human</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Mammal</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">age, furColor, languageSpoken</span>)</span> &#123;<br>        <span class="hljs-built_in">super</span>(age, furColor);<br>        <span class="hljs-built_in">this</span>.languageSpoken = languageSpoken;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-title">speak</span>(<span class="hljs-params"></span>)</span> &#123;&#125;<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h3 id="使用方法链"><a href="#使用方法链" class="headerlink" title="#使用方法链"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95%E9%93%BE">#</a>使用方法链</h3><p>这里我们的理解与《代码整洁之道》的建议有些不同。</p>
<p>有争论说方法链不够干净且违反了<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Law_of_Demeter">德米特法则 (opens new window)</a>，也许这是对的，但这种方法在 JS 及许多库(如 JQuery)中显得非常实用。</p>
<p>因此，我认为在 JS 中使用方法链是非常合适的。在 class 的函数中返回 this，能够方便的将类需要执行的多个方法链接起来。</p>
<p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Car</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.make = <span class="hljs-string">&#x27;Honda&#x27;</span>;<br>    <span class="hljs-built_in">this</span>.model = <span class="hljs-string">&#x27;Accord&#x27;</span>;<br>    <span class="hljs-built_in">this</span>.color = <span class="hljs-string">&#x27;white&#x27;</span>;<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">setMake</span>(<span class="hljs-params">make</span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.name = name;<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">setModel</span>(<span class="hljs-params">model</span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.model = model;<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">setColor</span>(<span class="hljs-params">color</span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.color = color;<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">save</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.make, <span class="hljs-built_in">this</span>.model, <span class="hljs-built_in">this</span>.color);<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">let</span> car = <span class="hljs-keyword">new</span> Car();<br>car.setColor(<span class="hljs-string">&#x27;pink&#x27;</span>);<br>car.setMake(<span class="hljs-string">&#x27;Ford&#x27;</span>);<br>car.setModel(<span class="hljs-string">&#x27;F-150&#x27;</span>)<br>car.save();<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Car</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.make = <span class="hljs-string">&#x27;Honda&#x27;</span>;<br>    <span class="hljs-built_in">this</span>.model = <span class="hljs-string">&#x27;Accord&#x27;</span>;<br>    <span class="hljs-built_in">this</span>.color = <span class="hljs-string">&#x27;white&#x27;</span>;<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">setMake</span>(<span class="hljs-params">make</span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.name = name;<br>    <span class="hljs-comment">// <span class="hljs-doctag">NOTE:</span> Returning this for chaining</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">setModel</span>(<span class="hljs-params">model</span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.model = model;<br>    <span class="hljs-comment">// <span class="hljs-doctag">NOTE:</span> Returning this for chaining</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">setColor</span>(<span class="hljs-params">color</span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.color = color;<br>    <span class="hljs-comment">// <span class="hljs-doctag">NOTE:</span> Returning this for chaining</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">save</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.make, <span class="hljs-built_in">this</span>.model, <span class="hljs-built_in">this</span>.color);<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">let</span> car = <span class="hljs-keyword">new</span> Car()<br>  .setColor(<span class="hljs-string">&#x27;pink&#x27;</span>)<br>  .setMake(<span class="hljs-string">&#x27;Ford&#x27;</span>)<br>  .setModel(<span class="hljs-string">&#x27;F-150&#x27;</span>)<br>  .save();<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h3 id="优先使用组合模式而非继承"><a href="#优先使用组合模式而非继承" class="headerlink" title="#优先使用组合模式而非继承"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E4%BC%98%E5%85%88%E4%BD%BF%E7%94%A8%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F%E8%80%8C%E9%9D%9E%E7%BB%A7%E6%89%BF">#</a>优先使用组合模式而非继承</h3><p>在著名的<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Design_Patterns">设计模式 (opens new window)</a>一书中提到，应多使用组合模式而非继承。</p>
<p>这么做有许多优点，在想要使用继承前，多想想能否通过组合模式满足需求吧。</p>
<p>那么，在什么时候继承具有更大的优势呢？这取决于你的具体需求，但大多情况下，可以遵守以下三点：</p>
<ol>
<li>继承关系表现为”是一个”而非”有一个”(如动物-&gt;人 和 用户-&gt;用户细节)</li>
<li>可以复用基类的代码(“Human”可以看成是”All animal”的一种)</li>
<li>希望当基类改变时所有派生类都受到影响(如修改”all animals”移动时的卡路里消耗量)</li>
</ol>
<p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Employee</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">name, email</span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.name = name;<br>    <span class="hljs-built_in">this</span>.email = email;<br>  &#125;<br><br>  <span class="hljs-comment">// ...</span><br>&#125;<br><br><span class="hljs-comment">// Bad because Employees &quot;have&quot; tax data. EmployeeTaxData is not a type of Employee</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EmployeeTaxData</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Employee</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">ssn, salary</span>)</span> &#123;<br>    <span class="hljs-built_in">super</span>();<br>    <span class="hljs-built_in">this</span>.ssn = ssn;<br>    <span class="hljs-built_in">this</span>.salary = salary;<br>  &#125;<br><br>  <span class="hljs-comment">// ...</span><br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Employee</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">name, email</span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.name = name;<br>    <span class="hljs-built_in">this</span>.email = email;<br><br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">setTaxData</span>(<span class="hljs-params">ssn, salary</span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.taxData = <span class="hljs-keyword">new</span> EmployeeTaxData(ssn, salary);<br>  &#125;<br>  <span class="hljs-comment">// ...</span><br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EmployeeTaxData</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">ssn, salary</span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.ssn = ssn;<br>    <span class="hljs-built_in">this</span>.salary = salary;<br>  &#125;<br><br>  <span class="hljs-comment">// ...</span><br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h2 id="7-测试"><a href="#7-测试" class="headerlink" title="7.#测试"></a>7.<a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E6%B5%8B%E8%AF%95">#</a><strong>测试</strong></h2><p><a target="_blank" rel="noopener" href="http://gotwarlost.github.io/istanbul/">一些好的覆盖工具 (opens new window)</a>。</p>
<p><a target="_blank" rel="noopener" href="http://jstherightway.org/#testing-tools">一些好的 JS 测试框架 (opens new window)</a>。</p>
<h3 id="单一的测试每个概念"><a href="#单一的测试每个概念" class="headerlink" title="#单一的测试每个概念"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E5%8D%95%E4%B8%80%E7%9A%84%E6%B5%8B%E8%AF%95%E6%AF%8F%E4%B8%AA%E6%A6%82%E5%BF%B5">#</a>单一的测试每个概念</h3><p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> assert = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;assert&#x27;</span>);<br><br>describe(<span class="hljs-string">&#x27;MakeMomentJSGreatAgain&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>  it(<span class="hljs-string">&#x27;handles date boundaries&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-keyword">let</span> date;<br><br>    date = <span class="hljs-keyword">new</span> MakeMomentJSGreatAgain(<span class="hljs-string">&#x27;1/1/2015&#x27;</span>);<br>    date.addDays(<span class="hljs-number">30</span>);<br>    date.shouldEqual(<span class="hljs-string">&#x27;1/31/2015&#x27;</span>);<br><br>    date = <span class="hljs-keyword">new</span> MakeMomentJSGreatAgain(<span class="hljs-string">&#x27;2/1/2016&#x27;</span>);<br>    date.addDays(<span class="hljs-number">28</span>);<br>    assert.equal(<span class="hljs-string">&#x27;02/29/2016&#x27;</span>, date);<br><br>    date = <span class="hljs-keyword">new</span> MakeMomentJSGreatAgain(<span class="hljs-string">&#x27;2/1/2015&#x27;</span>);<br>    date.addDays(<span class="hljs-number">28</span>);<br>    assert.equal(<span class="hljs-string">&#x27;03/01/2015&#x27;</span>, date);<br>  &#125;);<br>&#125;);<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> assert = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;assert&#x27;</span>);<br><br>describe(<span class="hljs-string">&#x27;MakeMomentJSGreatAgain&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>  it(<span class="hljs-string">&#x27;handles 30-day months&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-keyword">let</span> date = <span class="hljs-keyword">new</span> MakeMomentJSGreatAgain(<span class="hljs-string">&#x27;1/1/2015&#x27;</span>);<br>    date.addDays(<span class="hljs-number">30</span>);<br>    date.shouldEqual(<span class="hljs-string">&#x27;1/31/2015&#x27;</span>);<br>  &#125;);<br><br>  it(<span class="hljs-string">&#x27;handles leap year&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-keyword">let</span> date = <span class="hljs-keyword">new</span> MakeMomentJSGreatAgain(<span class="hljs-string">&#x27;2/1/2016&#x27;</span>);<br>    date.addDays(<span class="hljs-number">28</span>);<br>    assert.equal(<span class="hljs-string">&#x27;02/29/2016&#x27;</span>, date);<br>  &#125;);<br><br>  it(<span class="hljs-string">&#x27;handles non-leap year&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-keyword">let</span> date = <span class="hljs-keyword">new</span> MakeMomentJSGreatAgain(<span class="hljs-string">&#x27;2/1/2015&#x27;</span>);<br>    date.addDays(<span class="hljs-number">28</span>);<br>    assert.equal(<span class="hljs-string">&#x27;03/01/2015&#x27;</span>, date);<br>  &#125;);<br>&#125;);<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h2 id="8-并发"><a href="#8-并发" class="headerlink" title="8.#并发"></a>8.<a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E5%B9%B6%E5%8F%91">#</a><strong>并发</strong></h2><h3 id="用-Promises-替代回调"><a href="#用-Promises-替代回调" class="headerlink" title="#用 Promises 替代回调"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%94%A8-promises-%E6%9B%BF%E4%BB%A3%E5%9B%9E%E8%B0%83">#</a>用 Promises 替代回调</h3><p>回调不够整洁并会造成大量的嵌套。ES6 内嵌了 Promises，使用它吧。</p>
<p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;request&#x27;</span>).get(<span class="hljs-string">&#x27;https://en.wikipedia.org/wiki/Robert_Cecil_Martin&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, response</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (err) &#123;<br>    <span class="hljs-built_in">console</span>.error(err);<br>  &#125;<br>  <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>).writeFile(<span class="hljs-string">&#x27;article.html&#x27;</span>, response.body, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>&#123;<br>      <span class="hljs-keyword">if</span> (err) &#123;<br>        <span class="hljs-built_in">console</span>.error(err);<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;File written&#x27;</span>);<br>      &#125;<br>    &#125;)<br>  &#125;<br>&#125;)<br><br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;request-promise&#x27;</span>).get(<span class="hljs-string">&#x27;https://en.wikipedia.org/wiki/Robert_Cecil_Martin&#x27;</span>)<br>  .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) </span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs-promise&#x27;</span>).writeFile(<span class="hljs-string">&#x27;article.html&#x27;</span>, response);<br>  &#125;)<br>  .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;File written&#x27;</span>);<br>  &#125;)<br>  .catch(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.error(err);<br>  &#125;)<br><br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h3 id="Async-Await-是较-Promises-更好的选择"><a href="#Async-Await-是较-Promises-更好的选择" class="headerlink" title="#Async/Await 是较 Promises 更好的选择"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#async-await-%E6%98%AF%E8%BE%83-promises-%E6%9B%B4%E5%A5%BD%E7%9A%84%E9%80%89%E6%8B%A9">#</a>Async/Await 是较 Promises 更好的选择</h3><p>Promises 是较回调而言更好的一种选择，但 ES7 中的 async 和 await 更胜过 Promises。</p>
<p>在能使用 ES7 特性的情况下可以尽量使用他们替代 Promises。</p>
<p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;request-promise&#x27;</span>).get(<span class="hljs-string">&#x27;https://en.wikipedia.org/wiki/Robert_Cecil_Martin&#x27;</span>)<br>  .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) </span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs-promise&#x27;</span>).writeFile(<span class="hljs-string">&#x27;article.html&#x27;</span>, response);<br>  &#125;)<br>  .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;File written&#x27;</span>);<br>  &#125;)<br>  .catch(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.error(err);<br>  &#125;)<br><br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getCleanCodeArticle</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-keyword">var</span> request = <span class="hljs-keyword">await</span> <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;request-promise&#x27;</span>)<br>    <span class="hljs-keyword">var</span> response = <span class="hljs-keyword">await</span> request.get(<span class="hljs-string">&#x27;https://en.wikipedia.org/wiki/Robert_Cecil_Martin&#x27;</span>);<br>    <span class="hljs-keyword">var</span> fileHandle = <span class="hljs-keyword">await</span> <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs-promise&#x27;</span>);<br><br>    <span class="hljs-keyword">await</span> fileHandle.writeFile(<span class="hljs-string">&#x27;article.html&#x27;</span>, response);<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;File written&#x27;</span>);<br>  &#125; <span class="hljs-keyword">catch</span>(err) &#123;<br>    <span class="hljs-built_in">console</span>.log(err);<br>  &#125;<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h2 id="9-错误处理"><a href="#9-错误处理" class="headerlink" title="9.#错误处理"></a>9.<a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86">#</a><strong>错误处理</strong></h2><p>错误抛出是个好东西！这使得你能够成功定位运行状态中的程序产生错误的位置。</p>
<h3 id="别忘了捕获错误"><a href="#别忘了捕获错误" class="headerlink" title="#别忘了捕获错误"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E5%88%AB%E5%BF%98%E4%BA%86%E6%8D%95%E8%8E%B7%E9%94%99%E8%AF%AF">#</a>别忘了捕获错误</h3><p>对捕获的错误不做任何处理是没有意义的。</p>
<p>代码中 <code>try/catch</code> 的意味着你认为这里可能出现一些错误，你应该对这些可能的错误存在相应的处理方案。</p>
<p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">try</span> &#123;<br>  functionThatMightThrow();<br>&#125; <span class="hljs-keyword">catch</span> (error) &#123;<br>  <span class="hljs-built_in">console</span>.log(error);<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">try</span> &#123;<br>  functionThatMightThrow();<br>&#125; <span class="hljs-keyword">catch</span> (error) &#123;<br>  <span class="hljs-comment">// One option (more noisy than console.log):</span><br>  <span class="hljs-built_in">console</span>.error(error);<br>  <span class="hljs-comment">// Another option:</span><br>  notifyUserOfError(error);<br>  <span class="hljs-comment">// Another option:</span><br>  reportErrorToService(error);<br>  <span class="hljs-comment">// OR do all three!</span><br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h3 id="不要忽略被拒绝的-promises"><a href="#不要忽略被拒绝的-promises" class="headerlink" title="#不要忽略被拒绝的 promises"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E4%B8%8D%E8%A6%81%E5%BF%BD%E7%95%A5%E8%A2%AB%E6%8B%92%E7%BB%9D%E7%9A%84-promises">#</a>不要忽略被拒绝的 promises</h3><p>理由同 <code>try/catch</code>。</p>
<p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript">getdata()<br>.then(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> &#123;<br>  functionThatMightThrow(data);<br>&#125;)<br>.catch(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(error);<br>&#125;);<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs javascript">getdata()<br>.then(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> &#123;<br>  functionThatMightThrow(data);<br>&#125;)<br>.catch(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;<br>  <span class="hljs-comment">// One option (more noisy than console.log):</span><br>  <span class="hljs-built_in">console</span>.error(error);<br>  <span class="hljs-comment">// Another option:</span><br>  notifyUserOfError(error);<br>  <span class="hljs-comment">// Another option:</span><br>  reportErrorToService(error);<br>  <span class="hljs-comment">// OR do all three!</span><br>&#125;);<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h2 id="10-格式化"><a href="#10-格式化" class="headerlink" title="10.#格式化"></a>10.<a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E6%A0%BC%E5%BC%8F%E5%8C%96">#</a><strong>格式化</strong></h2><p>格式化是一件主观的事。如同这里的许多规则一样，这里并没有一定/立刻需要遵守的规则。可以在<a target="_blank" rel="noopener" href="http://standardjs.com/rules.html">这里 (opens new window)</a>完成格式的自动化。</p>
<h3 id="大小写一致"><a href="#大小写一致" class="headerlink" title="#大小写一致"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E5%A4%A7%E5%B0%8F%E5%86%99%E4%B8%80%E8%87%B4">#</a>大小写一致</h3><p>JS 是弱类型语言，合理的采用大小写可以告诉你关于变量/函数等的许多消息。</p>
<p>这些规则是主观定义的，团队可以根据喜欢进行选择。重点在于无论选择何种风格，都需要注意保持一致性。</p>
<p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> DAYS_IN_WEEK = <span class="hljs-number">7</span>;<br><span class="hljs-keyword">var</span> daysInMonth = <span class="hljs-number">30</span>;<br><br><span class="hljs-keyword">var</span> songs = [<span class="hljs-string">&#x27;Back In Black&#x27;</span>, <span class="hljs-string">&#x27;Stairway to Heaven&#x27;</span>, <span class="hljs-string">&#x27;Hey Jude&#x27;</span>];<br><span class="hljs-keyword">var</span> Artists = [<span class="hljs-string">&#x27;ACDC&#x27;</span>, <span class="hljs-string">&#x27;Led Zeppelin&#x27;</span>, <span class="hljs-string">&#x27;The Beatles&#x27;</span>];<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">eraseDatabase</span>(<span class="hljs-params"></span>) </span>&#123;&#125;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">restore_database</span>(<span class="hljs-params"></span>) </span>&#123;&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">animal</span> </span>&#123;&#125;<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Alpaca</span> </span>&#123;&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> DAYS_IN_WEEK = <span class="hljs-number">7</span>;<br><span class="hljs-keyword">var</span> DAYS_IN_MONTH = <span class="hljs-number">30</span>;<br><br><span class="hljs-keyword">var</span> songs = [<span class="hljs-string">&#x27;Back In Black&#x27;</span>, <span class="hljs-string">&#x27;Stairway to Heaven&#x27;</span>, <span class="hljs-string">&#x27;Hey Jude&#x27;</span>];<br><span class="hljs-keyword">var</span> artists = [<span class="hljs-string">&#x27;ACDC&#x27;</span>, <span class="hljs-string">&#x27;Led Zeppelin&#x27;</span>, <span class="hljs-string">&#x27;The Beatles&#x27;</span>];<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">eraseDatabase</span>(<span class="hljs-params"></span>) </span>&#123;&#125;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">restoreDatabase</span>(<span class="hljs-params"></span>) </span>&#123;&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Animal</span> </span>&#123;&#125;<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Alpaca</span> </span>&#123;&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h3 id="调用函数的函数和被调函数应放在较近的位置"><a href="#调用函数的函数和被调函数应放在较近的位置" class="headerlink" title="#调用函数的函数和被调函数应放在较近的位置"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E8%B0%83%E7%94%A8%E5%87%BD%E6%95%B0%E7%9A%84%E5%87%BD%E6%95%B0%E5%92%8C%E8%A2%AB%E8%B0%83%E5%87%BD%E6%95%B0%E5%BA%94%E6%94%BE%E5%9C%A8%E8%BE%83%E8%BF%91%E7%9A%84%E4%BD%8D%E7%BD%AE">#</a>调用函数的函数和被调函数应放在较近的位置</h3><p>当函数间存在相互调用的情况时，应将两者置于较近的位置。</p>
<p>理想情况下，应将调用其他函数的函数写在被调用函数的上方。</p>
<p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PerformanceReview</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">employee</span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.employee = employee;<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">lookupPeers</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-keyword">return</span> db.lookup(<span class="hljs-built_in">this</span>.employee, <span class="hljs-string">&#x27;peers&#x27;</span>);<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">lookupMananger</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-keyword">return</span> db.lookup(<span class="hljs-built_in">this</span>.employee, <span class="hljs-string">&#x27;manager&#x27;</span>);<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">getPeerReviews</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-keyword">let</span> peers = <span class="hljs-built_in">this</span>.lookupPeers();<br>    <span class="hljs-comment">// ...</span><br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">perfReview</span>(<span class="hljs-params"></span>)</span> &#123;<br>      getPeerReviews();<br>      getManagerReview();<br>      getSelfReview();<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">getManagerReview</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-keyword">let</span> manager = <span class="hljs-built_in">this</span>.lookupManager();<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">getSelfReview</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-comment">// ...</span><br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">let</span> review = <span class="hljs-keyword">new</span> PerformanceReview(user);<br>review.perfReview();<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PerformanceReview</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">employee</span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.employee = employee;<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">perfReview</span>(<span class="hljs-params"></span>)</span> &#123;<br>      getPeerReviews();<br>      getManagerReview();<br>      getSelfReview();<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">getPeerReviews</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-keyword">let</span> peers = <span class="hljs-built_in">this</span>.lookupPeers();<br>    <span class="hljs-comment">// ...</span><br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">lookupPeers</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-keyword">return</span> db.lookup(<span class="hljs-built_in">this</span>.employee, <span class="hljs-string">&#x27;peers&#x27;</span>);<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">getManagerReview</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-keyword">let</span> manager = <span class="hljs-built_in">this</span>.lookupManager();<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">lookupMananger</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-keyword">return</span> db.lookup(<span class="hljs-built_in">this</span>.employee, <span class="hljs-string">&#x27;manager&#x27;</span>);<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">getSelfReview</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-comment">// ...</span><br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">let</span> review = <span class="hljs-keyword">new</span> PerformanceReview(employee);<br>review.perfReview();<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h2 id="11-注释"><a href="#11-注释" class="headerlink" title="11.#注释"></a>11.<a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E6%B3%A8%E9%87%8A">#</a><strong>注释</strong></h2><h3 id="只对存在一定业务逻辑复杂性的代码进行注释"><a href="#只对存在一定业务逻辑复杂性的代码进行注释" class="headerlink" title="#只对存在一定业务逻辑复杂性的代码进行注释"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E5%8F%AA%E5%AF%B9%E5%AD%98%E5%9C%A8%E4%B8%80%E5%AE%9A%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E5%A4%8D%E6%9D%82%E6%80%A7%E7%9A%84%E4%BB%A3%E7%A0%81%E8%BF%9B%E8%A1%8C%E6%B3%A8%E9%87%8A">#</a>只对存在一定业务逻辑复杂性的代码进行注释</h3><p>注释并不是必须的，好的代码是能够让人一目了然，不用过多无谓的注释。</p>
<p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hashIt</span>(<span class="hljs-params">data</span>) </span>&#123;<br>  <span class="hljs-comment">// The hash</span><br>  <span class="hljs-keyword">var</span> hash = <span class="hljs-number">0</span>;<br><br>  <span class="hljs-comment">// Length of string</span><br>  <span class="hljs-keyword">var</span> length = data.length;<br><br>  <span class="hljs-comment">// Loop through every character in data</span><br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; length; i++) &#123;<br>    <span class="hljs-comment">// Get character code.</span><br>    <span class="hljs-keyword">var</span> char = data.charCodeAt(i);<br>    <span class="hljs-comment">// Make the hash</span><br>    hash = ((hash &lt;&lt; <span class="hljs-number">5</span>) - hash) + char;<br>    <span class="hljs-comment">// Convert to 32-bit integer</span><br>    hash = hash &amp; hash;<br>  &#125;<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hashIt</span>(<span class="hljs-params">data</span>) </span>&#123;<br>  <span class="hljs-keyword">var</span> hash = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">var</span> length = data.length;<br><br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; length; i++) &#123;<br>    <span class="hljs-keyword">var</span> char = data.charCodeAt(i);<br>    hash = ((hash &lt;&lt; <span class="hljs-number">5</span>) - hash) + char;<br><br>    <span class="hljs-comment">// Convert to 32-bit integer</span><br>    hash = hash &amp; hash;<br>  &#125;<br>&#125;<br><br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h3 id="不要在代码库中遗留被注释掉的代码"><a href="#不要在代码库中遗留被注释掉的代码" class="headerlink" title="#不要在代码库中遗留被注释掉的代码"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E4%B8%8D%E8%A6%81%E5%9C%A8%E4%BB%A3%E7%A0%81%E5%BA%93%E4%B8%AD%E9%81%97%E7%95%99%E8%A2%AB%E6%B3%A8%E9%87%8A%E6%8E%89%E7%9A%84%E4%BB%A3%E7%A0%81">#</a>不要在代码库中遗留被注释掉的代码</h3><p>版本控制的存在是有原因的。让旧代码存在于你的 history 里吧。</p>
<p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript">doStuff();<br><span class="hljs-comment">// doOtherStuff();</span><br><span class="hljs-comment">// doSomeMoreStuff();</span><br><span class="hljs-comment">// doSoMuchStuff();</span><br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript">doStuff();<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h3 id="不需要版本更新类型注释"><a href="#不需要版本更新类型注释" class="headerlink" title="#不需要版本更新类型注释"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E4%B8%8D%E9%9C%80%E8%A6%81%E7%89%88%E6%9C%AC%E6%9B%B4%E6%96%B0%E7%B1%BB%E5%9E%8B%E6%B3%A8%E9%87%8A">#</a>不需要版本更新类型注释</h3><p>记住，我们可以使用版本控制。废代码、被注释的代码及用注释记录代码中的版本更新说明都是没有必要的。</p>
<p>需要时可以使用 <code>git log</code> 获取历史版本。</p>
<p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 2016-12-20: Removed monads, didn&#x27;t understand them (RM)</span><br><span class="hljs-comment"> * 2016-10-01: Improved using special monads (JP)</span><br><span class="hljs-comment"> * 2016-02-03: Removed type-checking (LI)</span><br><span class="hljs-comment"> * 2015-03-14: Added combine with type-checking (JR)</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">combine</span>(<span class="hljs-params">a, b</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> a + b;<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">combine</span>(<span class="hljs-params">a, b</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> a + b;<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h3 id="避免位置标记"><a href="#避免位置标记" class="headerlink" title="#避免位置标记"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E9%81%BF%E5%85%8D%E4%BD%8D%E7%BD%AE%E6%A0%87%E8%AE%B0">#</a>避免位置标记</h3><p>这些东西通常只能代码麻烦，采用适当的缩进就可以了。</p>
<p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">////////////////////////////////////////////////////////////////////////////////</span><br><span class="hljs-comment">// Scope Model Instantiation</span><br><span class="hljs-comment">////////////////////////////////////////////////////////////////////////////////</span><br><span class="hljs-keyword">let</span> $scope.model = &#123;<br>  <span class="hljs-attr">menu</span>: <span class="hljs-string">&#x27;foo&#x27;</span>,<br>  <span class="hljs-attr">nav</span>: <span class="hljs-string">&#x27;bar&#x27;</span><br>&#125;;<br><br><span class="hljs-comment">////////////////////////////////////////////////////////////////////////////////</span><br><span class="hljs-comment">// Action setup</span><br><span class="hljs-comment">////////////////////////////////////////////////////////////////////////////////</span><br><span class="hljs-keyword">let</span> actions = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-comment">// ...</span><br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> $scope.model = &#123;<br>  <span class="hljs-attr">menu</span>: <span class="hljs-string">&#x27;foo&#x27;</span>,<br>  <span class="hljs-attr">nav</span>: <span class="hljs-string">&#x27;bar&#x27;</span><br>&#125;;<br><br><span class="hljs-keyword">let</span> actions = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-comment">// ...</span><br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h3 id="避免在源文件中写入法律评论"><a href="#避免在源文件中写入法律评论" class="headerlink" title="#避免在源文件中写入法律评论"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E9%81%BF%E5%85%8D%E5%9C%A8%E6%BA%90%E6%96%87%E4%BB%B6%E4%B8%AD%E5%86%99%E5%85%A5%E6%B3%95%E5%BE%8B%E8%AF%84%E8%AE%BA">#</a>避免在源文件中写入法律评论</h3><p>将你的 <code>LICENSE</code> 文件置于源码目录树的根目录。</p>
<p><strong>反例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">/*</span><br><span class="hljs-comment">The MIT License (MIT)</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">Copyright (c) 2016 Ryan McDermott</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">Permission is hereby granted, free of charge, to any person obtaining a copy</span><br><span class="hljs-comment">of this software and associated documentation files (the &quot;Software&quot;), to deal</span><br><span class="hljs-comment">in the Software without restriction, including without limitation the rights</span><br><span class="hljs-comment">to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span><br><span class="hljs-comment">copies of the Software, and to permit persons to whom the Software is</span><br><span class="hljs-comment">furnished to do so, subject to the following conditions:</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">The above copyright notice and this permission notice shall be included in all</span><br><span class="hljs-comment">copies or substantial portions of the Software.</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span><br><span class="hljs-comment">IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span><br><span class="hljs-comment">FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span><br><span class="hljs-comment">AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span><br><span class="hljs-comment">LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span><br><span class="hljs-comment">OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE</span><br><span class="hljs-comment">SOFTWARE</span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">calculateBill</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-comment">// ...</span><br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong>正例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">calculateBill</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-comment">// ...</span><br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E7%9B%AE%E5%BD%95">回到目录</a></strong></p>
<h2 id="12-补充"><a href="#12-补充" class="headerlink" title="12.#补充"></a>12.<a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E8%A1%A5%E5%85%85">#</a>补充</h2><ul>
<li>大概率坏代码判断<ul>
<li>重复代码</li>
<li>过长函数</li>
<li>过大的类</li>
<li>过长参数列表</li>
</ul>
</li>
<li>好的命名</li>
<li>函数单一职责</li>
<li>通过引入解释性变量或函数，使得表达更清晰</li>
<li>更少的嵌套，尽早 return</li>
<li>以多态取代条件表达式</li>
<li>倾向于遍历对象而不是 Switch 语句</li>
<li>使用默认参数和解构</li>
<li>善于利用ES6 Array处理数组<ul>
<li>Array.find()</li>
<li>Array.forEach(),Array.filter(),Array.map(),Array.reduce()</li>
<li>数组rest运算符</li>
<li>多重判断时使用 Array.includes</li>
<li>对 所有/部分 判断使用 Array.every &amp; Array.some</li>
</ul>
</li>
<li>善于利用ES6 Object处理对象<ul>
<li>对象解构</li>
<li>rest(ES9开始支持)</li>
<li>Object.assign()</li>
<li>Object.keys(),Object.values()</li>
</ul>
</li>
</ul>
<h2 id="13-参考文章"><a href="#13-参考文章" class="headerlink" title="13.#参考文章"></a>13.<a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/clean-code-javascript.html#%E5%8F%82%E8%80%83%E6%96%87%E7%AB%A0">#</a>参考文章</h2><ul>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/JMwPdQSSTLWPSrLda5Yo5g">写好 JS 条件语句的 5 条守则(opens new window)</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/ryanmcdermott/clean-code-javascript">clean-code-javascript</a></li>
</ul>
<h1 id="七、推荐-200错误统一处理"><a href="#七、推荐-200错误统一处理" class="headerlink" title="七、推荐-200错误统一处理"></a>七、推荐-200错误统一处理</h1><p>对于接口层来说，后端经常定义的结构如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js">&#123;<br>    <span class="hljs-attr">code</span>: [<span class="hljs-built_in">Number</span>], <span class="hljs-comment">// 状态码</span><br>    <span class="hljs-attr">desc</span>: [<span class="hljs-built_in">String</span>], <span class="hljs-comment">// 详细描述</span><br>    <span class="hljs-attr">detail</span>: [<span class="hljs-built_in">Array</span>, <span class="hljs-built_in">Object</span>] <span class="hljs-comment">// 前端需要的数据</span><br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h3 id="bad"><a href="#bad" class="headerlink" title="#bad"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/recommend-code200.html#bad">#</a>bad</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js">batchAddVariable(&#123; <span class="hljs-attr">globalParamList</span>: validList &#125;)<br>    .then(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> &#123;<br>        <span class="hljs-keyword">if</span> (res === SERVER_ERROR_CODE.SUCCESS) &#123; <span class="hljs-comment">// !!!Bad: how many interface, how many judge 200</span><br>            <span class="hljs-built_in">this</span>.close(<span class="hljs-literal">true</span>)<br>            <span class="hljs-built_in">this</span>.$toast.show(res.detail.colletion) <span class="hljs-comment">// !!!Bad: always get detail data</span><br>        &#125; <span class="hljs-keyword">else</span> &#123; <span class="hljs-comment">// !!!Bad: too much nest，reading difficulty</span><br>            <span class="hljs-built_in">this</span>.$toast.show(res.desc)<br>            <span class="hljs-keyword">if</span> (res === SERVER_ERROR_CODE.REPEAT) &#123;<br>                ...<br>            &#125;<br>        &#125;<br>    &#125;)<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h3 id="good"><a href="#good" class="headerlink" title="#good"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/recommend-code200.html#good">#</a>good</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js">batchAddVariable(&#123; <span class="hljs-attr">globalParamList</span>: validList &#125;)<br>    .then(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> &#123;<br>        <span class="hljs-built_in">this</span>.close(<span class="hljs-literal">true</span>)<br>        <span class="hljs-built_in">this</span>.$toast.show(data.colletion)<br>    &#125;)<br>    .catch(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> &#123;<br>        <span class="hljs-keyword">if</span> (res === SERVER_ERROR_CODE.REPEAT) &#123;<br>            ...<br>        &#125;<br>    &#125;)<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h3 id="解决方案"><a href="#解决方案" class="headerlink" title="#解决方案"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/recommend-code200.html#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88">#</a>解决方案</h3><p>http层axios拿到数据后进行统一处理</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span><br><br><span class="hljs-keyword">const</span> service = axios.create(&#123;<br>    <span class="hljs-attr">baseURL</span>: rootURL, <span class="hljs-comment">// api的base_url</span><br>    <span class="hljs-attr">timeout</span>: <span class="hljs-number">15000</span>, <span class="hljs-comment">// 请求超时时间</span><br>&#125;)<br><br><span class="hljs-comment">// request拦截器</span><br>service.interceptors.request.use(<br>    <span class="hljs-function"><span class="hljs-params">config</span> =&gt;</span> &#123;<br>        <span class="hljs-keyword">if</span> (config.method === <span class="hljs-string">&#x27;post&#x27;</span> || config.method === <span class="hljs-string">&#x27;put&#x27;</span> || config.method === <span class="hljs-string">&#x27;delete&#x27;</span>) &#123;<br>            config.headers[<span class="hljs-string">&#x27;Content-Type&#x27;</span>] = <span class="hljs-string">&#x27;application/json&#x27;</span><br>            <span class="hljs-keyword">if</span> (config.type === <span class="hljs-string">&#x27;form&#x27;</span>) &#123;<br>                config.headers[<span class="hljs-string">&#x27;Content-Type&#x27;</span>] = <span class="hljs-string">&#x27;multipart/form-data&#x27;</span><br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-comment">// 序列化</span><br>                config.data = <span class="hljs-built_in">JSON</span>.stringify(config.data)<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> config<br>    &#125;,<br>    <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;<br>        <span class="hljs-built_in">Promise</span>.reject(error)<br>    &#125;<br>)<br><br><span class="hljs-comment">// respone拦截器</span><br>service.interceptors.response.use(<br>    <span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> &#123;<br>        <span class="hljs-keyword">const</span> res = response.data<br>        <span class="hljs-keyword">if</span> (res.code === SERVER_ERROR_CODE.SUCCESS) &#123; <span class="hljs-comment">// 统一处理</span><br>            <span class="hljs-keyword">return</span> res.detail <span class="hljs-comment">// 直接返回数据</span><br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            Vue.prototype.$toast.show(res.desc) <span class="hljs-comment">// 错误统一报出</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(res)<br>        &#125;<br>    &#125;,<br>    <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(error)<br>    &#125;<br>)<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> service<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p>到此基本就可以很优雅的写逻辑代码了。不过还有个点可以继续优化。通常情况，后台返回非200错误，只需要$toast提示结果就行，catch代码部分可以省略。类似如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js">batchAddVariable(&#123; <span class="hljs-attr">globalParamList</span>: validList &#125;)<br>    .then(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span>  <span class="hljs-built_in">this</span>.close(<span class="hljs-literal">true</span>))<br>    <span class="hljs-comment">// .catch(() =&gt; &#123;&#125;) // 业务通常这里不需要写</span><br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p>多么简洁的代码，但Promise执行reject代码，浏览器会报<code>Uncaught (in promise)</code>错误。这是因为中断了Promise操作但又没有对其进行处理，故由此错误。只需要使用<code>unhandledrejection</code>全局处理即可。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// Promise Catch不报错</span><br><span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">&#x27;unhandledrejection&#x27;</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> event.preventDefault())<br> <br></code></pre></td></tr></table></figure>

<h1 id="八、推荐-优雅引用字体"><a href="#八、推荐-优雅引用字体" class="headerlink" title="八、推荐-优雅引用字体"></a>八、推荐-优雅引用字体</h1><h2 id="编程式字体方法的好处"><a href="#编程式字体方法的好处" class="headerlink" title="#编程式字体方法的好处"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/recommend-css-font.html#%E7%BC%96%E7%A8%8B%E5%BC%8F%E5%AD%97%E4%BD%93%E6%96%B9%E6%B3%95%E7%9A%84%E5%A5%BD%E5%A4%84">#</a>编程式字体方法的好处</h2><ol>
<li>学习视觉同学对于具体字体的考量，也许还能发现视觉同学的bug</li>
<li>全局控制，避免样式散乱</li>
<li>书写字体样式成为一门艺术</li>
</ol>
<h2 id="bad-1"><a href="#bad-1" class="headerlink" title="#bad"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/recommend-css-font.html#bad">#</a>bad</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.form-title</span> &#123;<br>    <span class="hljs-attribute">font</span>: <span class="hljs-string">&#x27;PingFang-SC-medium&#x27;</span>;<br>    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;<br>    <span class="hljs-attribute">font</span>-<span class="hljs-attribute">color</span>: <span class="hljs-number">#222</span>22;<br>&#125;<br><br><span class="hljs-selector-class">.form-text</span> &#123;<br>    <span class="hljs-attribute">font</span>: <span class="hljs-string">&#x27;PingFang-SC-regular&#x27;</span>;<br>    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;<br>    <span class="hljs-attribute">font</span>-<span class="hljs-attribute">color</span>: <span class="hljs-number">#333333</span>;<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h2 id="good-1"><a href="#good-1" class="headerlink" title="#good"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/recommend-css-font.html#good">#</a>good</h2><p>variables.scss文件</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-variable">$font-normal-color</span> = <span class="hljs-selector-id">#222222</span>; <span class="hljs-comment">// 字体颜色</span><br><span class="hljs-variable">$font-light-color</span> = <span class="hljs-selector-id">#333333</span>;<br><br><span class="hljs-keyword">@mixin</span> font-class(<span class="hljs-variable">$fontFamily</span>, <span class="hljs-variable">$fontSize</span>, <span class="hljs-variable">$fontColor</span>) &#123;<br>    <span class="hljs-attribute">font-family</span>: <span class="hljs-variable">$fontFamily</span>;<br>    <span class="hljs-attribute">font-size</span>: <span class="hljs-variable">$fontSize</span>;<br>    <span class="hljs-attribute">color</span>: <span class="hljs-variable">$fontColor</span>;<br>&#125;<br><br><span class="hljs-keyword">@mixin</span> font-large(<span class="hljs-variable">$size</span>: <span class="hljs-number">14px</span>, <span class="hljs-variable">$color</span>: <span class="hljs-variable">$font-normal-color</span>) &#123;<br>    <span class="hljs-keyword">@include</span> font-class(<span class="hljs-variable">$font-family-medium</span>, <span class="hljs-variable">$size</span>, <span class="hljs-variable">$color</span>);<br>&#125;<br><br><span class="hljs-keyword">@mixin</span> font-normal(<span class="hljs-variable">$size</span>: <span class="hljs-number">14px</span>, <span class="hljs-variable">$color</span>: <span class="hljs-variable">$font-light-color</span>) &#123;<br>    <span class="hljs-keyword">@include</span> font-class(<span class="hljs-variable">$font-family-regular</span>, <span class="hljs-variable">$size</span>, <span class="hljs-variable">$color</span>);<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<p>应用:</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-selector-class">.form-title</span> &#123;<br>    <span class="hljs-keyword">@include</span> font-large(<span class="hljs-number">18px</span>, <span class="hljs-number">#222</span>22);<br>&#125;<br><br><span class="hljs-selector-class">.form-text</span> &#123;<br>    <span class="hljs-keyword">@include</span> font-large(<span class="hljs-number">14px</span>, <span class="hljs-number">#333333</span>);<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<blockquote>
<p>font-large/font-normal等公用mixins建议放在统一的<code>variables.scss</code>文件中，再通过sass-resource自动引入到所有组件中</p>
</blockquote>
<h2 id="最佳字体顺序参考"><a href="#最佳字体顺序参考" class="headerlink" title="#最佳字体顺序参考"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/recommend-css-font.html#%E6%9C%80%E4%BD%B3%E5%AD%97%E4%BD%93%E9%A1%BA%E5%BA%8F%E5%8F%82%E8%80%83">#</a>最佳字体顺序参考</h2><h3 id="PC端"><a href="#PC端" class="headerlink" title="#PC端"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/recommend-css-font.html#pc%E7%AB%AF">#</a>PC端</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs text">$font-family-medium = &#x27;PingFang-SC-medium&#x27;, Helveti   ca, Tahoma, Arial, &#x27;Microsoft YaHei&#x27;, &#x27;Hiragino Sans GB&#x27;, &#x27;WenQuanYi Micro Hei&#x27;, sans-serif;<br>$font-family-regular = &#x27;PingFang-SC-regular&#x27;, Helvetica, Tahoma, Arial, &#x27;Microsoft YaHei&#x27;, &#x27;Hiragino Sans GB&#x27;, &#x27;WenQuanYi Micro Hei&#x27;, sans-serif;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h3 id="移动端"><a href="#移动端" class="headerlink" title="#移动端"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/recommend-css-font.html#%E7%A7%BB%E5%8A%A8%E7%AB%AF">#</a>移动端</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs text">$font-family-ultralight = &#x27;PingFangSC-Ultralight&#x27;, &#x27;Source Han Sans CN&#x27;, &quot;Helvetica Neue&quot;;<br>$font-family-regular = &#x27;PingFangSC-Regular&#x27;, &#x27;Source Han Sans CN&#x27;, &quot;Helvetica Neue&quot;;<br>$font-family-medium = &#x27;PingFangSC-Medium&#x27;, &#x27;Source Han Sans CN Medium&#x27;, &quot;Helvetica Neue&quot;;<br>$font-family-thin = &#x27;PingFangSC-Thin&#x27;, &#x27;Source Han Sans CN Thin&#x27;, &quot;Helvetica Neue&quot;;<br>$font-family-light = &#x27;PingFangSC-Light&#x27;, &#x27;Source Han Sans CN Light&#x27;, &quot;Helvetica Neue&quot;;<br>$font-family-semibold = &#x27;PingFangSC-Semibold&#x27;, &#x27;Source Han Sans CN Light&#x27;, &quot;Helvetica Neue&quot;;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h1 id="九、推荐-Vue实例选项顺序"><a href="#九、推荐-Vue实例选项顺序" class="headerlink" title="九、推荐-Vue实例选项顺序"></a>九、推荐-Vue实例选项顺序</h1><blockquote>
<p>在Vue中，export default对象中有很多约定的API Key。每个人的顺序排放都可能不一致，但保持统一的代码风格有助于团队成员多人协作。</p>
</blockquote>
<p>Vue官网文档中也有推荐<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/style-guide/index.html#%E7%BB%84%E4%BB%B6-%E5%AE%9E%E4%BE%8B%E7%9A%84%E9%80%89%E9%A1%B9%E7%9A%84%E9%A1%BA%E5%BA%8F-%E6%8E%A8%E8%8D%90">顺序 (opens new window)</a>,文档中对选项顺序做了许多分类。但从工程项目角度思考，需要更加精简以及合理的排序。推荐如下规则进行排序：</p>
<ol>
<li>Vue扩展: extends, mixins, components</li>
<li>Vue数据: props, model, data, computed, watch</li>
<li>Vue资源: filters, directives</li>
<li>Vue生命周期: created, mounted, destroy…</li>
<li>Vue方法: methods</li>
</ol>
<p>以下推荐顺序，基于团队小伙伴@akimoto整理的顺序：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>    <span class="hljs-comment">/*1. Vue扩展 */</span><br>    <span class="hljs-attr">extends</span>: <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-comment">// extends和mixins都扩展逻辑，需要重点放前面</span><br>    <span class="hljs-attr">mixins</span>: [],   <br>    <span class="hljs-attr">components</span>: &#123;&#125;,<br>    <span class="hljs-comment">/* 2. Vue数据 */</span><br>    <span class="hljs-attr">props</span>: &#123;&#125;,<br>    <span class="hljs-attr">model</span>: &#123; <span class="hljs-attr">prop</span>: <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-attr">event</span>: <span class="hljs-string">&#x27;&#x27;</span> &#125;, <span class="hljs-comment">// model 会使用到 props</span><br>    data () &#123;<br>        <span class="hljs-keyword">return</span> &#123;&#125;<br>    &#125;,<br>    <span class="hljs-attr">computed</span>: &#123;&#125;,<br>    <span class="hljs-attr">watch</span>:&#123;&#125;, <span class="hljs-comment">// watch 监控的是 props 和 data，有必要时监控computed</span><br>    <span class="hljs-comment">/* 3. Vue资源 */</span><br>    <span class="hljs-attr">filters</span>: &#123;&#125;,<br>    <span class="hljs-attr">directives</span>: &#123;&#125;,<br>    <span class="hljs-comment">/* 4. Vue生命周期 */</span><br>    created () &#123;&#125;,<br>    mounted () &#123;&#125;,<br>    destroy () &#123;&#125;,<br>    <span class="hljs-comment">/* 5. Vue方法 */</span><br>    <span class="hljs-attr">methods</span>: &#123;&#125;, <span class="hljs-comment">// all the methods should be put here in the last</span><br>&#125;<br> <br></code></pre></td></tr></table></figure>

<h1 id="十、组件设计风格"><a href="#十、组件设计风格" class="headerlink" title="十、组件设计风格"></a>十、组件设计风格</h1><h3 id="要求-Element-元素统一使用El后缀"><a href="#要求-Element-元素统一使用El后缀" class="headerlink" title="#要求 Element 元素统一使用El后缀"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/recommend-vue-component.html#%E8%A6%81%E6%B1%82-element-%E5%85%83%E7%B4%A0%E7%BB%9F%E4%B8%80%E4%BD%BF%E7%94%A8el%E5%90%8E%E7%BC%80">#</a>要求 Element 元素统一使用El后缀</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// ✗ bad</span><br><span class="hljs-keyword">const</span> elem = <span class="hljs-built_in">this</span>.$el;<br><span class="hljs-keyword">const</span> element = e.target;<br><span class="hljs-keyword">const</span> input = <span class="hljs-built_in">this</span>.$refs.input<br><br><span class="hljs-comment">// ✓ good</span><br><span class="hljs-keyword">const</span> el = <span class="hljs-built_in">this</span>.$el;<br><span class="hljs-keyword">const</span> el = e.target;<br><span class="hljs-keyword">const</span> inputEl = <span class="hljs-built_in">this</span>.$refs.input;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h3 id="要求-Vue-实例统一使用VM后缀"><a href="#要求-Vue-实例统一使用VM后缀" class="headerlink" title="#要求 Vue 实例统一使用VM后缀"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/recommend-vue-component.html#%E8%A6%81%E6%B1%82-vue-%E5%AE%9E%E4%BE%8B%E7%BB%9F%E4%B8%80%E4%BD%BF%E7%94%A8vm%E5%90%8E%E7%BC%80">#</a>要求 Vue 实例统一使用VM后缀</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// ✗ bad</span><br><span class="hljs-keyword">const</span> instance = <span class="hljs-built_in">this</span>;<br><span class="hljs-keyword">const</span> form = <span class="hljs-built_in">this</span>.$refs.form;<br><span class="hljs-built_in">this</span>.$emit(<span class="hljs-string">&#x27;select&#x27;</span>, &#123;<br>    item,<br>&#125;);<br><br><span class="hljs-comment">// ✓ good</span><br><span class="hljs-keyword">const</span> vm = <span class="hljs-built_in">this</span>;<br><span class="hljs-keyword">const</span> formVM = <span class="hljs-built_in">this</span>.$refs.form;<br><span class="hljs-built_in">this</span>.$emit(<span class="hljs-string">&#x27;select&#x27;</span>, &#123;<br>    item,<br>    <span class="hljs-attr">itemVM</span>: selectedVM,<br>&#125;);<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h3 id="被动接收事件方法使用on前缀"><a href="#被动接收事件方法使用on前缀" class="headerlink" title="#被动接收事件方法使用on前缀"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/recommend-vue-component.html#%E8%A2%AB%E5%8A%A8%E6%8E%A5%E6%94%B6%E4%BA%8B%E4%BB%B6%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8on%E5%89%8D%E7%BC%80">#</a>被动接收事件方法使用on前缀</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// ✗ bad</span><br>&#123;<br>    <span class="hljs-attr">methods</span>: &#123;<br>        <span class="hljs-function"><span class="hljs-title">input</span>(<span class="hljs-params"></span>)</span> &#123;<br>            <span class="hljs-comment">// ...</span><br>        &#125;,<br>        <span class="hljs-function"><span class="hljs-title">handleValidate</span>(<span class="hljs-params"></span>)</span> &#123;<br>            <span class="hljs-comment">// ...</span><br>        &#125;,<br>    &#125;,<br>&#125;<br><br><span class="hljs-comment">// ✓ good</span><br>&#123;<br>    <span class="hljs-attr">methods</span>: &#123;<br>        <span class="hljs-function"><span class="hljs-title">onInput</span>(<span class="hljs-params"></span>)</span> &#123;<br>            <span class="hljs-comment">// ...</span><br>        &#125;,<br>        <span class="hljs-function"><span class="hljs-title">onValidate</span>(<span class="hljs-params"></span>)</span> &#123;<br>            <span class="hljs-comment">// ...</span><br>        &#125;,<br>    &#125;,<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h3 id="slot-只在对应名称的-class-内设置"><a href="#slot-只在对应名称的-class-内设置" class="headerlink" title="#slot 只在对应名称的 class 内设置"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/recommend-vue-component.html#slot-%E5%8F%AA%E5%9C%A8%E5%AF%B9%E5%BA%94%E5%90%8D%E7%A7%B0%E7%9A%84-class-%E5%86%85%E8%AE%BE%E7%BD%AE">#</a>slot 只在对应名称的 class 内设置</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// ✗ bad</span><br>&lt;slot name=<span class="hljs-string">&quot;head&quot;</span>&gt;<br>    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;$style.head&quot;</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span></span><br><span class="xml">                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;$style.title&quot;</span>&gt;</span></span><br><span class="xml">                    &#123;&#123; title &#125;&#125;</span><br><span class="xml">                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;$style.close&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>&lt;/slot&gt;<br><br><span class="hljs-comment">// ✓ good</span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;$style.head&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;head&quot;</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;$style.title&quot;</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>&#123;&#123; title &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;$style.close&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h3 id="变量命名"><a href="#变量命名" class="headerlink" title="#变量命名"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/recommend-vue-component.html#%E5%8F%98%E9%87%8F%E5%91%BD%E5%90%8D">#</a>变量命名</h3><ul>
<li>常见状态：default, primary, info, success, warning, error, disabled, muted, …</li>
<li>大小分级：mini, small, base, large, huge, …</li>
<li>颜色分级：darkest, darker, dark, base, light, lighter, lightest, …</li>
</ul>
<h1 id="十一、推荐-Vue项目目录结构"><a href="#十一、推荐-Vue项目目录结构" class="headerlink" title="十一、推荐-Vue项目目录结构"></a>十一、推荐-Vue项目目录结构</h1><p>目录结构保持一致，使得多人合作容易理解与管理，提高工作效率。<a target="_blank" rel="noopener" href="https://github.com/lq782655835/standard-vue-project">Vue标准项目(opens new window)</a></p>
<h2 id="简要说明"><a href="#简要说明" class="headerlink" title="#简要说明"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/recommend-vue-project-structure.html#%E7%AE%80%E8%A6%81%E8%AF%B4%E6%98%8E">#</a>简要说明</h2><ul>
<li><code>main.js</code>主入口，<code>router.js</code>路由划分</li>
<li><code>plugins</code> 自己或第三方插件,包括但不限于components、directives、filters、third lib</li>
<li><code>pages</code> 所有路由页面。原则：轻page，重component</li>
<li><code>components</code> 所有组件。包括原子组件、业务公用组件、页面独有组件</li>
<li><code>server</code> api引入入口</li>
<li><code>assets</code> sass、图片资源入口，不常修改数据</li>
<li><code>utils</code> 工具文件夹</li>
<li><code>store</code> 标准vuex格式，非必须</li>
</ul>
<h2 id="详细说明"><a href="#详细说明" class="headerlink" title="#详细说明"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/recommend-vue-project-structure.html#%E8%AF%A6%E7%BB%86%E8%AF%B4%E6%98%8E">#</a>详细说明</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs text">project<br>└───src<br>│   │   app.vue    // 主页面<br>│   │   main.js    // 主入口<br>|   |   router.js  // 所有路由<br>│   │<br>│   |____assets    // css、image、svg等资源<br>│   |   |____css   // 所有sass资源<br>|   |   |    |  reset.scss       // 兼容各浏览器<br>|   |   |    |  global.scss      // 全局css<br>|   |   |    |  variable.scss    // sass变量和function等<br>│   |   |____img   // image图标库<br>|   |   |____svg   // svg图标库<br>|   |<br>|   |____components    // 组件<br>│   |   |____common    // common自注册组件<br>│   |        |____base // 原子组件(如果是引入第三方，该文件夹可省略)<br>│   |        |   ...   // 业务公用组件<br>│   |   |____entity    // entity页面组件<br>│   |   |____about     // about页面组件<br>|   |<br>|   |____pages     // UI层(原则：轻page，重component)<br>|   |   |____entity<br>|   |   |    |  list.vue      // 列表页<br>|   |   |    |  create.vue    // 新增页<br>|   |   |    |  edit.vue      // 修改页<br>|   |   | main.vue<br>|   |<br>|   |____plugins   // 自己或第三方插件<br>|   |   | index.js       // 插件入口文件<br>|   |   | directives.js  // 所有Vue指令<br>|   |   | filters.js  // 所有Vue过滤<br>|   |<br>|   |____server    // 接口层<br>|   |   | index.js   // 所有接口<br>|   |   | http.js  // axios二次封装<br>|   |<br>|   |____store     // vuex数据<br>|   |   | index.js<br>|   |<br>|   |____utils     // 工具层<br>|   |   | config.js// 配置文件，包括常量配置<br>|<br>└───public         // 公用文件，不经过webpack处理<br>│   │   favicon.ico<br>│   │   index.html<br>│   vue.config.js  // vue-cli3主配置<br>│   babel.config.js// babel配置<br>│   .eslintrc.js   // eslint配置<br>│   .prettierrc.js // perttier配置<br>│   package.json   // npm配置<br>│   README.md      // 项目说明<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h1 id="十二、推荐-Vue-Router写法"><a href="#十二、推荐-Vue-Router写法" class="headerlink" title="十二、推荐-Vue-Router写法"></a>十二、推荐-Vue-Router写法</h1><p>使用路由懒加载，实现方式是结合Vue异步组件和Webpack代码分割功能。</p>
<p>优点：</p>
<ul>
<li>减小包体积，提高加载速度</li>
<li>当页面&gt;20个时，组件定义需要拉到编辑器顶部才知道具体路径</li>
</ul>
<h3 id="bad-2"><a href="#bad-2" class="headerlink" title="#bad"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/recommend-vuerouter.html#bad">#</a>bad</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> IntentionList <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/pages/intention/list&#x27;</span><br><span class="hljs-keyword">import</span> Variable <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/pages/variable&#x27;</span><br>...<br><br>&#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/intention/list&#x27;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;ilist&#x27;</span>,<br>    <span class="hljs-attr">component</span>: IntentionList<br>&#125;,<br>&#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/variable&#x27;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;variable&#x27;</span>,<br>    <span class="hljs-attr">component</span>: Variable<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<h3 id="good-2"><a href="#good-2" class="headerlink" title="#good"></a><a target="_blank" rel="noopener" href="https://lq782655835.github.io/blogs/team-standard/recommend-vuerouter.html#good">#</a>good</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js">&#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/intention/list&#x27;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;ilist&#x27;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;@/pages/intention/list&#x27;</span>)<br>&#125;,<br>&#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/variable&#x27;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;variable&#x27;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;@/pages/variable&#x27;</span>)<br>&#125;<br> <br>        Copied!<br>    <br></code></pre></td></tr></table></figure>

<blockquote>
<p>import语法需要Babel添加<code>syntax-dynamic-import</code>插件。最新当vue-cli 3.0中默认添加该特性，不需要额外引用。另外，合理控制异步模块的数量。</p>
</blockquote>

      </section>
      <section class="extra">
        
          <ul class="copyright">
  
    <li><strong>本文作者：</strong>wowangmouren</li>
    <li><strong>本文链接：</strong><a href="https://wangwewntao.top/2023/11/08/wmr_29/index.html" title="https:&#x2F;&#x2F;wangwewntao.top&#x2F;2023&#x2F;11&#x2F;08&#x2F;wmr_29&#x2F;index.html">https:&#x2F;&#x2F;wangwewntao.top&#x2F;2023&#x2F;11&#x2F;08&#x2F;wmr_29&#x2F;index.html</a></li>
    <li><strong>版权声明：</strong>本博客所有文章均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" title="BY-NC-SA" target="_blank" rel="noopener">BY-NC-SA</a> 许可协议，转载请注明出处！</li>
  
</ul>
        
        
          <section class="donate">
  <div id="qrcode-donate">
    <img   class="lazyload" data-original="/images/theme/alipay.png" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" >
  </div>
  <div class="icon">
    <a href="javascript:;" id="alipay"><i class="iconfont iconalipay"></i></a>
    <a href="javascript:;" id="wechat"><i class="iconfont iconwechat-fill"></i></a>
  </div>
</section>
        
        
  <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JS/" rel="tag">JS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/" rel="tag">React</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodeJs/" rel="tag">nodeJs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/" rel="tag">vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7/" rel="tag">效率工具</a></li></ul> 

        
  <nav class="nav">
    <a></a>
    <a href="/2023/11/08/wmr_28/">Vue3+TS 快速上手<i class="iconfont iconright"></i></a>
  </nav>

      </section>
      
    </section>
  </div>
</article></div>
      <div class="col-xl-3">
        
          
  <aside class="toc-wrap">
    <h3 class="toc-title">文章目录：</h3>
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80-AI%E5%89%8D%E7%AB%AFCSS%E8%A7%84%E8%8C%83"><span class="toc-text">一.AI前端CSS规范</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E5%8F%B7"><span class="toc-text">分号</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%91%BD%E5%90%8D"><span class="toc-text">命名</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7%E5%A3%B0%E6%98%8E%E9%A1%BA%E5%BA%8F"><span class="toc-text">属性声明顺序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E8%A7%84%E8%8C%83"><span class="toc-text">其他规范</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E8%BF%9E%E6%8E%A5"><span class="toc-text">参考连接</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81AI%E5%89%8D%E7%AB%AFGit%E8%A7%84%E8%8C%83"><span class="toc-text">二、AI前端Git规范</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Git%E5%88%86%E6%94%AF%E5%91%BD%E5%90%8D"><span class="toc-text">Git分支命名</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Git-Commit-Message%E6%A0%BC%E5%BC%8F"><span class="toc-text">Git Commit Message格式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#type-%E6%8F%90%E4%BA%A4%E7%B1%BB%E5%9E%8B%EF%BC%9A"><span class="toc-text">type 提交类型：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#subject-%E6%8F%90%E4%BA%A4%E6%8F%8F%E8%BF%B0"><span class="toc-text">subject 提交描述</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5"><span class="toc-text">参考链接</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E3%80%81AI%E5%89%8D%E7%AB%AFJS%E8%A7%84%E8%8C%83"><span class="toc-text">三、AI前端JS规范</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%98%E9%87%8F"><span class="toc-text">变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E9%87%8F"><span class="toc-text">常量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BD%E6%95%B0"><span class="toc-text">函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B1%BB"><span class="toc-text">类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E9%87%8A"><span class="toc-text">注释</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E8%A1%8C"><span class="toc-text">单行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E8%A1%8C"><span class="toc-text">多行</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%8F%E5%B0%91%E5%B5%8C%E5%A5%97"><span class="toc-text">减少嵌套</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%8F%E5%B0%91%E7%89%B9%E5%AE%9A%E6%A0%87%E8%AE%B0%E5%80%BC"><span class="toc-text">减少特定标记值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-text">表达式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E6%94%AF%E8%BE%83%E5%A4%9A%E5%A4%84%E7%90%86"><span class="toc-text">分支较多处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%8F%98%E9%87%8F%E5%90%8D%E8%87%AA%E8%A7%A3%E9%87%8A-V1-1"><span class="toc-text">使用变量名自解释 V1.1</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%87%BD%E6%95%B0%E5%90%8D%E8%87%AA%E8%A7%A3%E9%87%8A-V1-1"><span class="toc-text">使用函数名自解释 V1.1</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E8%A7%84%E8%8C%83-1"><span class="toc-text">其他规范</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5-1"><span class="toc-text">参考链接</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E3%80%81AI%E5%89%8D%E7%AB%AFVue%E8%A7%84%E8%8C%83"><span class="toc-text">四、AI前端Vue规范</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%91%BD%E5%90%8D"><span class="toc-text">文件命名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B4%A7%E5%AF%86%E8%80%A6%E5%90%88%E7%9A%84%E7%BB%84%E4%BB%B6%E5%91%BD%E5%90%8D"><span class="toc-text">紧密耦合的组件命名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E9%97%AD%E5%90%88%E7%BB%84%E4%BB%B6"><span class="toc-text">自闭合组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%E7%BC%A9%E5%86%99"><span class="toc-text">指令缩写</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E6%95%B0%E6%8D%AE"><span class="toc-text">组件数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#props%E5%91%BD%E5%90%8D"><span class="toc-text">props命名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E5%B1%9E%E6%80%A7%E9%A1%BA%E5%BA%8F%E5%92%8C%E5%88%86%E8%A1%8C%E8%A7%84%E5%88%99"><span class="toc-text">组件属性顺序和分行规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Vue-API%E9%A1%BA%E5%BA%8F"><span class="toc-text">Vue API顺序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Vue%E7%BB%84%E4%BB%B6%E9%A1%B6%E7%BA%A7%E6%A0%87%E7%AD%BE%E9%A1%BA%E5%BA%8F"><span class="toc-text">Vue组件顶级标签顺序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#import%E5%BC%95%E5%85%A5%E9%A1%BA%E5%BA%8F-V1-1"><span class="toc-text">import引入顺序 V1.1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Vue-%E5%A4%8D%E6%9D%82data%E5%8A%A0%E6%B3%A8%E9%87%8A-%E5%88%86%E7%BB%84-V1-1"><span class="toc-text">Vue 复杂data加注释&#x2F;分组 V1.1</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94%E3%80%81AI%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%B7%A5%E5%85%B7%E9%93%BE"><span class="toc-text">五、AI前端工程工具链</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%A7%84%E8%8C%83%E6%8F%90%E4%BA%A4%E4%BB%A3%E7%A0%81"><span class="toc-text">1. 规范提交代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%A7%84%E8%8C%83commit%E6%97%A5%E5%BF%97-%E5%BF%85%E9%9C%80"><span class="toc-text">2. 规范commit日志(必需)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E8%A7%84%E8%8C%83%E6%8F%90%E4%BA%A4%E6%B5%81%E7%A8%8B%EF%BC%88%E5%8F%AF%E9%80%89%EF%BC%89"><span class="toc-text">3. 规范提交流程（可选）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E8%BE%85%E5%8A%A9%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90%EF%BC%88%E5%8F%AF%E9%80%89%EF%BC%89"><span class="toc-text">4. 辅助代码分析（可选）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-text">总结</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AD%E3%80%81AI-JavaScript-%E9%A3%8E%E6%A0%BC%E6%8C%87%E5%8D%97"><span class="toc-text">六、AI JavaScript 风格指南</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E7%9B%AE%E5%BD%95"><span class="toc-text">1.目录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E4%BB%8B%E7%BB%8D"><span class="toc-text">2.介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%8F%98%E9%87%8F"><span class="toc-text">3.变量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%9C%89%E6%84%8F%E4%B9%89%EF%BC%8C%E5%8F%AF%E8%AF%BB%E6%80%A7%E5%A5%BD%E7%9A%84%E5%8F%98%E9%87%8F%E5%90%8D"><span class="toc-text">使用有意义，可读性好的变量名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-ES6-%E7%9A%84-const-%E5%AE%9A%E4%B9%89%E5%B8%B8%E9%87%8F"><span class="toc-text">使用 ES6 的 const 定义常量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E5%8A%9F%E8%83%BD%E7%B1%BB%E4%BC%BC%E7%9A%84%E5%8F%98%E9%87%8F%E5%90%8D%E9%87%87%E7%94%A8%E7%BB%9F%E4%B8%80%E7%9A%84%E5%91%BD%E5%90%8D%E9%A3%8E%E6%A0%BC"><span class="toc-text">对功能类似的变量名采用统一的命名风格</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%98%93%E4%BA%8E%E6%A3%80%E7%B4%A2%E5%90%8D%E7%A7%B0"><span class="toc-text">使用易于检索名称</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E%E5%8F%98%E9%87%8F-%E5%8D%B3%E6%9C%89%E6%84%8F%E4%B9%89%E7%9A%84%E5%8F%98%E9%87%8F%E5%90%8D"><span class="toc-text">使用说明变量(即有意义的变量名)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8D%E8%A6%81%E7%BB%95%E5%A4%AA%E5%A4%9A%E7%9A%84%E5%BC%AF%E5%AD%90"><span class="toc-text">不要绕太多的弯子</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%81%BF%E5%85%8D%E9%87%8D%E5%A4%8D%E7%9A%84%E6%8F%8F%E8%BF%B0"><span class="toc-text">避免重复的描述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%81%BF%E5%85%8D%E6%97%A0%E6%84%8F%E4%B9%89%E7%9A%84%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD"><span class="toc-text">避免无意义的条件判断</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%87%BD%E6%95%B0"><span class="toc-text">4.函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0-%E7%90%86%E6%83%B3%E6%83%85%E5%86%B5%E4%B8%8B%E5%BA%94%E4%B8%8D%E8%B6%85%E8%BF%87-2-%E4%B8%AA"><span class="toc-text">函数参数 (理想情况下应不超过 2 个)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%8A%9F%E8%83%BD%E7%9A%84%E5%8D%95%E4%B8%80%E6%80%A7"><span class="toc-text">函数功能的单一性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%90%8D%E5%BA%94%E6%98%8E%E7%A1%AE%E8%A1%A8%E6%98%8E%E5%85%B6%E5%8A%9F%E8%83%BD"><span class="toc-text">函数名应明确表明其功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%BA%94%E8%AF%A5%E5%8F%AA%E5%81%9A%E4%B8%80%E5%B1%82%E6%8A%BD%E8%B1%A1"><span class="toc-text">函数应该只做一层抽象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A7%BB%E9%99%A4%E9%87%8D%E5%A4%8D%E7%9A%84%E4%BB%A3%E7%A0%81"><span class="toc-text">移除重复的代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%87%E7%94%A8%E9%BB%98%E8%AE%A4%E5%8F%82%E6%95%B0%E7%B2%BE%E7%AE%80%E4%BB%A3%E7%A0%81"><span class="toc-text">采用默认参数精简代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-Object-assign-%E8%AE%BE%E7%BD%AE%E9%BB%98%E8%AE%A4%E5%AF%B9%E8%B1%A1"><span class="toc-text">使用 Object.assign 设置默认对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8D%E8%A6%81%E4%BD%BF%E7%94%A8%E6%A0%87%E8%AE%B0-Flag-%E4%BD%9C%E4%B8%BA%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0"><span class="toc-text">不要使用标记(Flag)作为函数参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%81%BF%E5%85%8D%E5%89%AF%E4%BD%9C%E7%94%A8"><span class="toc-text">避免副作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8D%E8%A6%81%E5%86%99%E5%85%A8%E5%B1%80%E5%87%BD%E6%95%B0"><span class="toc-text">不要写全局函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%87%E7%94%A8%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B"><span class="toc-text">采用函数式编程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E5%88%A4%E6%96%AD%E6%9D%A1%E4%BB%B6"><span class="toc-text">封装判断条件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%81%BF%E5%85%8D%E2%80%9C%E5%90%A6%E5%AE%9A%E6%83%85%E5%86%B5%E2%80%9D%E7%9A%84%E5%88%A4%E6%96%AD"><span class="toc-text">避免“否定情况”的判断</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%81%BF%E5%85%8D%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD"><span class="toc-text">避免条件判断</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%81%BF%E5%85%8D%E7%B1%BB%E5%9E%8B%E5%88%A4%E6%96%AD-part-1"><span class="toc-text">避免类型判断(part 1)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%81%BF%E5%85%8D%E7%B1%BB%E5%9E%8B%E5%88%A4%E6%96%AD-part-2"><span class="toc-text">避免类型判断(part 2)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%81%BF%E5%85%8D%E8%BF%87%E5%BA%A6%E4%BC%98%E5%8C%96"><span class="toc-text">避免过度优化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%97%A0%E6%95%88%E7%9A%84%E4%BB%A3%E7%A0%81"><span class="toc-text">删除无效的代码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E5%AF%B9%E8%B1%A1%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-text">5.对象和数据结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-getters-%E5%92%8C-setters"><span class="toc-text">使用 getters 和 setters</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A9%E5%AF%B9%E8%B1%A1%E6%8B%A5%E6%9C%89%E7%A7%81%E6%9C%89%E6%88%90%E5%91%98"><span class="toc-text">让对象拥有私有成员</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E7%B1%BB"><span class="toc-text">6.类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E4%B8%80%E8%81%8C%E8%B4%A3%E5%8E%9F%E5%88%99-SRP"><span class="toc-text">单一职责原则 (SRP)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%80-%E9%97%AD%E5%8E%9F%E5%88%99-OCP"><span class="toc-text">开&#x2F;闭原则 (OCP)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A9%E6%96%AF%E7%A7%91%E5%A4%AB%E6%9B%BF%E4%BB%A3%E5%8E%9F%E5%88%99-LSP"><span class="toc-text">利斯科夫替代原则 (LSP)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3%E9%9A%94%E7%A6%BB%E5%8E%9F%E5%88%99-ISP"><span class="toc-text">接口隔离原则 (ISP)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96%E5%8F%8D%E8%BD%AC%E5%8E%9F%E5%88%99-DIP"><span class="toc-text">依赖反转原则 (DIP)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-ES6-%E7%9A%84-classes-%E8%80%8C%E4%B8%8D%E6%98%AF-ES5-%E7%9A%84-Function"><span class="toc-text">使用 ES6 的 classes 而不是 ES5 的 Function</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95%E9%93%BE"><span class="toc-text">使用方法链</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%98%E5%85%88%E4%BD%BF%E7%94%A8%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F%E8%80%8C%E9%9D%9E%E7%BB%A7%E6%89%BF"><span class="toc-text">优先使用组合模式而非继承</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E6%B5%8B%E8%AF%95"><span class="toc-text">7.测试</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E4%B8%80%E7%9A%84%E6%B5%8B%E8%AF%95%E6%AF%8F%E4%B8%AA%E6%A6%82%E5%BF%B5"><span class="toc-text">单一的测试每个概念</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E5%B9%B6%E5%8F%91"><span class="toc-text">8.并发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8-Promises-%E6%9B%BF%E4%BB%A3%E5%9B%9E%E8%B0%83"><span class="toc-text">用 Promises 替代回调</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Async-Await-%E6%98%AF%E8%BE%83-Promises-%E6%9B%B4%E5%A5%BD%E7%9A%84%E9%80%89%E6%8B%A9"><span class="toc-text">Async&#x2F;Await 是较 Promises 更好的选择</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86"><span class="toc-text">9.错误处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%AB%E5%BF%98%E4%BA%86%E6%8D%95%E8%8E%B7%E9%94%99%E8%AF%AF"><span class="toc-text">别忘了捕获错误</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8D%E8%A6%81%E5%BF%BD%E7%95%A5%E8%A2%AB%E6%8B%92%E7%BB%9D%E7%9A%84-promises"><span class="toc-text">不要忽略被拒绝的 promises</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-%E6%A0%BC%E5%BC%8F%E5%8C%96"><span class="toc-text">10.格式化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%A7%E5%B0%8F%E5%86%99%E4%B8%80%E8%87%B4"><span class="toc-text">大小写一致</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%83%E7%94%A8%E5%87%BD%E6%95%B0%E7%9A%84%E5%87%BD%E6%95%B0%E5%92%8C%E8%A2%AB%E8%B0%83%E5%87%BD%E6%95%B0%E5%BA%94%E6%94%BE%E5%9C%A8%E8%BE%83%E8%BF%91%E7%9A%84%E4%BD%8D%E7%BD%AE"><span class="toc-text">调用函数的函数和被调函数应放在较近的位置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-%E6%B3%A8%E9%87%8A"><span class="toc-text">11.注释</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AA%E5%AF%B9%E5%AD%98%E5%9C%A8%E4%B8%80%E5%AE%9A%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E5%A4%8D%E6%9D%82%E6%80%A7%E7%9A%84%E4%BB%A3%E7%A0%81%E8%BF%9B%E8%A1%8C%E6%B3%A8%E9%87%8A"><span class="toc-text">只对存在一定业务逻辑复杂性的代码进行注释</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8D%E8%A6%81%E5%9C%A8%E4%BB%A3%E7%A0%81%E5%BA%93%E4%B8%AD%E9%81%97%E7%95%99%E8%A2%AB%E6%B3%A8%E9%87%8A%E6%8E%89%E7%9A%84%E4%BB%A3%E7%A0%81"><span class="toc-text">不要在代码库中遗留被注释掉的代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8D%E9%9C%80%E8%A6%81%E7%89%88%E6%9C%AC%E6%9B%B4%E6%96%B0%E7%B1%BB%E5%9E%8B%E6%B3%A8%E9%87%8A"><span class="toc-text">不需要版本更新类型注释</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%81%BF%E5%85%8D%E4%BD%8D%E7%BD%AE%E6%A0%87%E8%AE%B0"><span class="toc-text">避免位置标记</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%81%BF%E5%85%8D%E5%9C%A8%E6%BA%90%E6%96%87%E4%BB%B6%E4%B8%AD%E5%86%99%E5%85%A5%E6%B3%95%E5%BE%8B%E8%AF%84%E8%AE%BA"><span class="toc-text">避免在源文件中写入法律评论</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-%E8%A1%A5%E5%85%85"><span class="toc-text">12.补充</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-%E5%8F%82%E8%80%83%E6%96%87%E7%AB%A0"><span class="toc-text">13.参考文章</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E6%8E%A8%E8%8D%90-200%E9%94%99%E8%AF%AF%E7%BB%9F%E4%B8%80%E5%A4%84%E7%90%86"><span class="toc-text">七、推荐-200错误统一处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#bad"><span class="toc-text">bad</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#good"><span class="toc-text">good</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-text">解决方案</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E6%8E%A8%E8%8D%90-%E4%BC%98%E9%9B%85%E5%BC%95%E7%94%A8%E5%AD%97%E4%BD%93"><span class="toc-text">八、推荐-优雅引用字体</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E7%A8%8B%E5%BC%8F%E5%AD%97%E4%BD%93%E6%96%B9%E6%B3%95%E7%9A%84%E5%A5%BD%E5%A4%84"><span class="toc-text">编程式字体方法的好处</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#bad-1"><span class="toc-text">bad</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#good-1"><span class="toc-text">good</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%80%E4%BD%B3%E5%AD%97%E4%BD%93%E9%A1%BA%E5%BA%8F%E5%8F%82%E8%80%83"><span class="toc-text">最佳字体顺序参考</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#PC%E7%AB%AF"><span class="toc-text">PC端</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A7%BB%E5%8A%A8%E7%AB%AF"><span class="toc-text">移动端</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B9%9D%E3%80%81%E6%8E%A8%E8%8D%90-Vue%E5%AE%9E%E4%BE%8B%E9%80%89%E9%A1%B9%E9%A1%BA%E5%BA%8F"><span class="toc-text">九、推荐-Vue实例选项顺序</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E3%80%81%E7%BB%84%E4%BB%B6%E8%AE%BE%E8%AE%A1%E9%A3%8E%E6%A0%BC"><span class="toc-text">十、组件设计风格</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A6%81%E6%B1%82-Element-%E5%85%83%E7%B4%A0%E7%BB%9F%E4%B8%80%E4%BD%BF%E7%94%A8El%E5%90%8E%E7%BC%80"><span class="toc-text">要求 Element 元素统一使用El后缀</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A6%81%E6%B1%82-Vue-%E5%AE%9E%E4%BE%8B%E7%BB%9F%E4%B8%80%E4%BD%BF%E7%94%A8VM%E5%90%8E%E7%BC%80"><span class="toc-text">要求 Vue 实例统一使用VM后缀</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A2%AB%E5%8A%A8%E6%8E%A5%E6%94%B6%E4%BA%8B%E4%BB%B6%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8on%E5%89%8D%E7%BC%80"><span class="toc-text">被动接收事件方法使用on前缀</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#slot-%E5%8F%AA%E5%9C%A8%E5%AF%B9%E5%BA%94%E5%90%8D%E7%A7%B0%E7%9A%84-class-%E5%86%85%E8%AE%BE%E7%BD%AE"><span class="toc-text">slot 只在对应名称的 class 内设置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E5%91%BD%E5%90%8D"><span class="toc-text">变量命名</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%B8%80%E3%80%81%E6%8E%A8%E8%8D%90-Vue%E9%A1%B9%E7%9B%AE%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-text">十一、推荐-Vue项目目录结构</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E8%A6%81%E8%AF%B4%E6%98%8E"><span class="toc-text">简要说明</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%A6%E7%BB%86%E8%AF%B4%E6%98%8E"><span class="toc-text">详细说明</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%BA%8C%E3%80%81%E6%8E%A8%E8%8D%90-Vue-Router%E5%86%99%E6%B3%95"><span class="toc-text">十二、推荐-Vue-Router写法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#bad-2"><span class="toc-text">bad</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#good-2"><span class="toc-text">good</span></a></li></ol></li></ol></li></ol>
  </aside>

        
      </div>
    </div>
  </div>
</main>
  

<footer class="footer">
  <div class="footer-social"><a 
        href="tencent://message/?Menu=yes&uin=1020524654 "
        target="_blank"
        class="footer-social-item"
        onMouseOver="this.style.color= '#12B7F5'" 
        onMouseOut="this.style.color='#33333D'">
          <i class="iconfont  iconQQ "></i>
      </a><a 
        href="https://github.com/wowangmouren?tab=repositories "
        target="_blank"
        class="footer-social-item"
        onMouseOver="this.style.color= '#9f7be1'" 
        onMouseOut="this.style.color='#33333D'">
          <i class="iconfont  icongithub-fill "></i>
      </a><a 
        href="mailto:1020524654@qq.com "
        target="_blank"
        class="footer-social-item"
        onMouseOver="this.style.color= '#DA2E76'" 
        onMouseOut="this.style.color='#33333D'">
          <i class="iconfont  iconmail "></i>
      </a></div>
  
    <div class="footer-copyright"><p>欢迎进入王文涛的个人博客~  |  <a target="_blank" href="https://github.com/izhaoo/hexo-theme-zhaoo">主题</a></p></div>
  
</footer>
  
      <div class="fab fab-plus">
    <i class="iconfont iconplus"></i>
  </div>
  
  
  <div class="fab fab-up">
    <i class="iconfont iconcaret-up"></i>
  </div>
  
  
  
    
<script src="/js/color-mode.js"></script>

  
  
</body>

<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>



  
<script src="https://cdn.bootcdn.net/ajax/libs/jquery.lazyload/1.9.1/jquery.lazyload.min.js"></script>




  
<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js"></script>






  
<script src="https://cdn.bootcdn.net/ajax/libs/jquery.qrcode/1.0/jquery.qrcode.min.js"></script>




<script src="/js/utils.js"></script>
<script src="/js/script.js"></script>







  <script>
    (function () {
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
      } else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>













</html>